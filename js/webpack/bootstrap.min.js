(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{117:function(e,t,n){"use strict";n.r(t);var a,o=n(1),r=n(4),i=n(18),c=n(7),l=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var a,o,r=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(a=r.next()).done;)i.push(a.value)}catch(e){o={error:e}}finally{try{a&&!a.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return i},s={},f={},p=Object(o.f)("mentionMinChars",2),u=Object(o.f)("mentionSuggestionCount",5),b=30,g=Object(o.f)("emoji",{}),h=g.emoji||{},m=g.format||"",d=g.assetPath||"",w=Object.entries(h).map(function(e){var t=l(e,2),n=t[0],a=t[1],o=a.split(".");return{name:n,filename:a,basename:o[0],ext:"."+o[1]}}),v='<li data-value=":${name}:" class="at-suggest-emoji"><span class="emoji-wrap">'+m.replace(/{(.+?)}/g,"$${$1}").replace("%1$s","${src}").replace("%2$s","${name}").replace("${src}",d+"/${filename}").replace("${dir}",d)+'</span> <span class="emoji-name">${name}</span></li>';function j(e,t,n){var o=Object(r.i)(t,n);return o?(a=o.rawMatch,o.match):null}function y(e,t,n){e=e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"),n&&(e="(?:^|\\s)"+e);var a=new RegExp(e+"([A-Za-z0-9_+-]*|[^\\x00-\\xff]*)(?:\\n)?$","gi").exec(t);return a?a[2]||a[1]:null}function O(e,t){var n=t?t.contentWindow:"";$(e).atwho({at:"@",tpl:'<li data-value="@${name}" data-id="${id}">${name}</li>',limit:u,callbacks:{remote_filter:function(e,t){if((e=e||"").length>=p){for(var n=!0,a="",r=0,i=e.length;r<i;r++)if(a=e.slice(0,-r),s[a]&&s[a].length<b){f[e]=e,n=!1;break}var c=!1;for(var l in f)if(f.hasOwnProperty(l)&&null!==e.match(new RegExp("^"+l+"+"))){c=!0;break}!n||c||s[e]?t(n?s[e]:s[a]):$.getJSON(Object(o.e)("/user/tagsearch"),{q:e,limit:b},function(n){Array.isArray(n)&&n.forEach(function(e){"object"==typeof e&&"string"==typeof e.name&&(e.name=e.name.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;"))}),t(n),n.length?s[e]=n:f[e]=e})}},before_insert:function(e,t){var n=t.data("value")||"";n=n.slice(1,n.length);var o=/[^\w-]/.test(n),r=/(["'])(.+)(["'])/g.test(n),i=n;return o&&!r&&(i='"'+n+'"'),/.?@(["'])/.test(a||"")||(i=this.at+i),i},highlighter:function(e,t){if(!t)return e;var n=new RegExp(">\\s*(\\w*)("+t.replace("+","\\+")+")(\\w*)\\s*(\\s+.+)?<","ig");return e.replace(n,function(e,t,n,a,o){return void 0===a&&(a=""),void 0===o&&(o=""),"> "+t+"<strong>"+n+"</strong>"+a+o+" <"})},matcher:j},cWindow:n}).atwho({at:":",tpl:v,insert_tpl:"${atwho-data-value}",callbacks:{matcher:y,tplEval:function(e,t){return Object(r.f)(t)}},limit:u,data:w,cWindow:n}),n&&$(n).on("reposition.atwho",function(e,n,a){var o=a.view.$el,r=a.$inputor,i=parseInt(r.css("line-height"),10),c=$(t).offset(),l=(c?c.left:0)+n.left,s=c?c.top:0,f=0,p=a.at,u=a.query.text,b=$(".BodyBox,.js-bodybox"),g=b.css("font-size")+" "+b.css("font-family"),h=(p+u).width(g)-2;"@"===p&&(l-=h),":"===p&&(l-=2),$(o).each(function(e,t){var n=$(t).outerHeight(),a=$(t).height();n&&a&&n>0&&(f+=a+i)});var m=$(window).height()||0,d=$(window).scrollTop()||0,w={left:l,top:s=m-(s+n.top-($(window).scrollTop()||0)-d)>=f?s+n.top+f-d:s+n.top-d};$(o).offset(w)})}
/**
 * Entrypoint for gradually replacing global.js
 *
 * At some point everything in this folder should be able to be removed (new base theme).
 *
 * @copyright 2009-2018 Vanilla Forums Inc.
 * @license https://opensource.org/licenses/GPL-2.0 GPL-2.0
 */$.fn.atwho&&(Object(o.k)(function(){return O(".BodyBox,.js-bodybox")}),Object(o.j)(function(){return O(".BodyBox,.js-bodybox")}),window.gdn.atCompleteInit=O),
/**
 * Primary bootstrapping of the frontend JS. This entrypoint should be the last once executed.
 *
 * @copyright 2009-2018 Vanilla Forums Inc.
 * @license https://opensource.org/licenses/GPL-2.0 GPL-2.0
 */
Object(r.b)(Object(o.f)("debug",!1)),i.a.apiv2=c.a,Object(r.f)("Bootstrapping"),Object(o.a)().then(function(){Object(r.f)("Bootstrapping complete."),Object(o.j)(function(e){Object(o.b)(e.target)});var e=new CustomEvent("X-DOMContentReady",{bubbles:!0,cancelable:!1});document.dispatchEvent(e)}).catch(function(e){Object(r.g)(e)})}},[[117,2,0,1]]]);