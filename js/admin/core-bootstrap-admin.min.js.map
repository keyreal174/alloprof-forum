{"version":3,"sources":["webpack://core_bootstrapAdmin/webpack/bootstrap","webpack://core_bootstrapAdmin/delegated ./src/scripts/application.ts from dll-reference lib_core_admin","webpack://core_bootstrapAdmin/delegated ./src/scripts/utility.ts from dll-reference lib_core_admin","webpack://core_bootstrapAdmin/external \"lib_core_admin\"","webpack://core_bootstrapAdmin/delegated ./node_modules/react/index.js from dll-reference lib_core_admin","webpack://core_bootstrapAdmin/delegated ./node_modules/react-router-dom/es/index.js from dll-reference lib_core_admin","webpack://core_bootstrapAdmin/delegated ./src/scripts/apiv2.ts from dll-reference lib_core_admin","webpack://core_bootstrapAdmin/delegated ./src/scripts/gdn.ts from dll-reference lib_core_admin","webpack://core_bootstrapAdmin/delegated ./node_modules/react-dom/index.js from dll-reference lib_core_admin","webpack://core_bootstrapAdmin/delegated ./src/scripts/Main/NotFoundPage.tsx from dll-reference lib_core_admin","webpack://core_bootstrapAdmin/./src/scripts/Main/App.tsx","webpack://core_bootstrapAdmin/./src/scripts/legacy/atwho.ts","webpack://core_bootstrapAdmin/./src/scripts/legacy/index.ts","webpack://core_bootstrapAdmin/./src/scripts/bootstrap/bootstrap.ts","webpack://core_bootstrapAdmin/./src/scripts/internal.tsx"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","r","value","n","__esModule","default","object","property","prototype","hasOwnProperty","p","s","t","e","lib_core_admin","extendStatics","rawMatch","__extends","setPrototypeOf","__proto__","Array","b","__","this","constructor","create","__assign","assign","arguments","length","Main_App","_super","App","apply","render","routes","applicationfrom_dll_reference_lib_core_admin","getRoutes","map","route","reactfrom_dll_reference_lib_core_admin_default","a","createElement","type","key","props","path","exact","push","esfrom_dll_reference_lib_core_admin","Route","component","NotFoundPagefrom_dll_reference_lib_core_admin","BrowserRouter","basename","getMeta","Switch","PureComponent","atCache","atEmpty","minCharacters","maxSuggestions","serverLimit","emojiData","emojis","emoji","emojiFormat","format","emojiAssetPath","assetPath","emojiList","entries","_a","_b","Symbol","iterator","ar","next","done","error","return","__read","index","emojiImageUrl","parts","split","filename","ext","emojiTemplate","replace","matchAtMention","flag","subtext","shouldStartWithSpace","lines","lastLine","nonExcludedCharacters","excludeWhiteSpace","excluded","regexStr","match","RegExp","exec","matchFakeEmoji","initializeAtComplete","editorElement","iframe","iframeWindow","contentWindow","$","atwho","at","tpl","limit","callbacks","remote_filter","query","callback","shouldContinueFiltering","filterString","slice","isQueryEmpty","getJSON","formatUrl","q","data","isArray","forEach","result","before_insert","$li","username","requiresQuotation","test","hasQuotation","insert","highlighter","li","regexp","str","$1","$2","$3","$4","matcher","cWindow","insert_tpl","tplEval","utilityfrom_dll_reference_lib_core_admin","log","on","event","offset","context","suggestionElement","view","$el","$inputor","lineHeight","parseInt","css","iframeOffset","leftCoordinate","left","topCoordinate","top","selectHeight","text","fontMirror","font","fontWidth","width","each","element","outerHeight","height","windowHeight","window","scrollPosition","scrollTop","newOffset","fn","onReady","onContent","gdn","atCompleteInit","debug","gdnfrom_dll_reference_lib_core_admin","apiv2","apiv2from_dll_reference_lib_core_admin","parent","componentExists","addComponent","nodes","querySelectorAll","node","getAttribute","Component","getComponent","react_domfrom_dll_reference_lib_core_admin_default","logError","target","_executeReady","then","contentEvent","CustomEvent","bubbles","cancelable","document","dispatchEvent","catch"],"mappings":"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","file":"admin/core-bootstrap-admin.min.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/js/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 9);\n","module.exports = (__webpack_require__(2))(9);","module.exports = (__webpack_require__(2))(37);","module.exports = lib_core_admin;","module.exports = (__webpack_require__(2))(1);","module.exports = (__webpack_require__(2))(95);","module.exports = (__webpack_require__(2))(129);","module.exports = (__webpack_require__(2))(7);","module.exports = (__webpack_require__(2))(106);","module.exports = (__webpack_require__(2))(91);","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || Object.assign || function(t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n        s = arguments[i];\n        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n            t[p] = s[p];\n    }\n    return t;\n};\nimport React from \"react\";\nimport { getRoutes, getMeta } from \"@core/application\";\nimport { BrowserRouter as Router, Route, Switch } from \"react-router-dom\";\nimport NotFoundPage from \"@core/Main/NotFoundPage\";\n/**\n * The root application component.\n *\n * This component renders the top-level pages that have been registered with {@link module:application.addRoutes}.\n */\nvar App = /** @class */ (function (_super) {\n    __extends(App, _super);\n    function App() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    App.prototype.render = function () {\n        var routes = getRoutes().map(function (route) {\n            return React.createElement(route.type, __assign({ key: route.key || route.props.path + (route.props.exact ? \"!\" : \"\") }, route.props));\n        });\n        routes.push(React.createElement(Route, { key: \"@not-found\", component: NotFoundPage }));\n        return (React.createElement(Router, { basename: getMeta(\"context.basePath\", \"\") },\n            React.createElement(Switch, null, routes)));\n    };\n    return App;\n}(React.PureComponent));\nexport default App;\n","/**\n * At-who setup for legacy @mentions.\n *\n * @author Adam Charron <adam.c@vanillaforums.com>\n * @copyright 2009-2018 Vanilla Forums Inc.\n * @license GPLv2\n */\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nimport { formatUrl, getMeta } from \"@core/application\";\nimport { log } from \"@core/utility\";\n// Store cache results in an outer scoped variable., so all instances share the same data\n// and can build the cache together.\nvar atCache = {};\nvar atEmpty = {};\n// The current raw match. This is needed to properly match quoted strings.\nvar rawMatch;\n// Set minimum characters to type for @mentions to fire\nvar minCharacters = getMeta(\"mentionMinChars\", 2);\n// Max suggestions to show in dropdown.\nvar maxSuggestions = getMeta(\"mentionSuggestionCount\", 5);\n// Server response limit. This should match the limit set in\n// *UserController->TagSearch* and UserModel->TagSearch\nvar serverLimit = 30;\nvar emojiData = getMeta(\"emoji\", {});\nvar emojis = emojiData.emoji || {};\nvar emojiFormat = emojiData.format || \"\";\nvar emojiAssetPath = emojiData.assetPath || \"\";\nvar emojiList = Object.entries(emojis).map(function (_a) {\n    var _b = __read(_a, 2), index = _b[0], emojiImageUrl = _b[1];\n    var parts = emojiImageUrl.split(\".\");\n    return { name: index, filename: emojiImageUrl, basename: parts[0], ext: \".\" + parts[1] };\n});\nvar emojiContentTemplate = emojiFormat\n    .replace(/{(.+?)}/g, \"$${$1}\")\n    .replace(\"%1$s\", \"${src}\")\n    .replace(\"%2$s\", \"${name}\")\n    .replace(\"${src}\", emojiAssetPath + \"/${filename}\")\n    .replace(\"${dir}\", emojiAssetPath);\nvar emojiTemplate = '<li data-value=\":${name}:\" class=\"at-suggest-emoji\"><span class=\"emoji-wrap\">' +\n    emojiContentTemplate +\n    '</span> <span class=\"emoji-name\">${name}</span></li>';\n/**\n * Custom matching to allow quotation marks in the matching string as well as spaces.\n * Spaces make things more complicated.\n *\n * @param flag - The character sequence used to trigger this match (e.g. :).\n * @param subtext - The string to be tested.\n * @param shouldStartWithSpace - Should the pattern include a test for a whitespace prefix?\n * @returns Matching string if successful.  Null on failure to match.\n */\nexport function matchAtMention(flag, subtext, shouldStartWithSpace) {\n    // Split the string at the lines to allow for a simpler regex.\n    var lines = subtext.split(\"\\n\");\n    var lastLine = lines[lines.length - 1];\n    // If you change this you MUST change the regex in src/scripts/__tests__/legacy.test.js !!!\n    /**\n     * Put together the non-excluded characters.\n     *\n     * @param {boolean} excludeWhiteSpace - Whether or not to exclude whitespace characters.\n     *\n     * @returns {string} A Regex string.\n     */\n    function nonExcludedCharacters(excludeWhiteSpace) {\n        var excluded = \"[^\" +\n            '\"' + // Quote character\n            \"\\\\u0000-\\\\u001f\\\\u007f-\\\\u009f\" + // Control characters\n            \"\\\\u2028\"; // Line terminator\n        if (excludeWhiteSpace) {\n            excluded += \"\\\\s\";\n        }\n        excluded += \"]\";\n        return excluded;\n    }\n    var regexStr = \"@\" + // @ Symbol triggers the match\n        \"(\" +\n        // One or more non-greedy characters that aren't excluded. White is allowed, but a starting quote is required.\n        '\"(' +\n        nonExcludedCharacters(false) +\n        '+?)\"?' +\n        \"|\" + // Or\n        // One or more non-greedy characters that aren't exluded. Whitespace is excluded.\n        \"(\" +\n        nonExcludedCharacters(true) +\n        '+?)\"?' +\n        \")\" +\n        \"(?:\\\\n|$)\"; // Newline terminates.\n    // Determined by at.who library\n    if (shouldStartWithSpace) {\n        regexStr = \"(?:^|\\\\s)\" + regexStr;\n    }\n    var regex = new RegExp(regexStr, \"gi\");\n    var match = regex.exec(lastLine);\n    if (match) {\n        rawMatch = match[0];\n        // Return either of the matching groups (quoted or unquoted).\n        return match[2] || match[1];\n    }\n    else {\n        // No match\n        return null;\n    }\n}\n/**\n * Custom matching for our emoji images. Eg. :) :/ >:(\n *\n * @param flag - The character sequence used to trigger this match (e.g. :).\n * @param subtext - The string to be tested.\n * @param shouldStartWithSpace - Should the pattern include a test for a whitespace prefix?\n * @returns Matching string if successful.  Null on failure to match.\n */\nexport function matchFakeEmoji(flag, subtext, shouldStartWithSpace) {\n    flag = flag.replace(/[\\-\\[\\]\\/\\{\\}\\(\\)\\*\\+\\?\\.\\\\\\^\\$\\|]/g, \"\\\\$&\");\n    if (shouldStartWithSpace) {\n        flag = \"(?:^|\\\\s)\" + flag;\n    }\n    // Some browsers append a linefeed to the end of subtext.  We need to allow for it.\n    var regexp = new RegExp(flag + \"([A-Za-z0-9_+-]*|[^\\\\x00-\\\\xff]*)(?:\\\\n)?$\", \"gi\");\n    var match = regexp.exec(subtext);\n    if (match) {\n        return match[2] || match[1];\n    }\n    else {\n        return null;\n    }\n}\nexport function initializeAtComplete(editorElement, iframe) {\n    // Handle iframe situation\n    var iframeWindow = iframe ? iframe.contentWindow : \"\";\n    var remoteDataHandler = function (query, callback) {\n        // Do this because of undefined when adding spaces to\n        // matcher callback, as it will be monitoring changes.\n        query = query || \"\";\n        // Only all query strings greater than min_characters\n        if (query.length >= minCharacters) {\n            // If the cache array contains less than LIMIT 30\n            // (according to server logic), then there's no\n            // point sending another request to server, as there\n            // won't be any more results, as this is the maximum.\n            var shouldContinueFiltering = true;\n            // Remove last character so that the string can be\n            // found in the cache, if exists, then check if its\n            // matching array has less than the server limit of\n            // matches, which means there are no more, so save the\n            // additional server request from being sent.\n            var filterString = \"\";\n            // Loop through string and find first closest match in\n            // the cache, and if a match, check if more filtering\n            // is required.\n            for (var i = 0, l = query.length; i < l; i++) {\n                filterString = query.slice(0, -i);\n                if (atCache[filterString] && atCache[filterString].length < serverLimit) {\n                    // Add this other query to empty array, so that it\n                    // will not fire off another request.\n                    atEmpty[query] = query;\n                    // Do not filter more, meaning, do not send\n                    // another server request, as all the necessary\n                    // data is already in memory.\n                    shouldContinueFiltering = false;\n                    break;\n                }\n            }\n            // Check if query would be empty, based on previously\n            // cached empty results. Compare against the start of\n            // the latest query string.\n            var isQueryEmpty = false;\n            // Loop through cache of empty query strings.\n            for (var key in atEmpty) {\n                if (atEmpty.hasOwnProperty(key)) {\n                    // See if cached empty results match the start\n                    // of the latest query. If so, then no point\n                    // sending new request, as it will return empty.\n                    if (query.match(new RegExp(\"^\" + key + \"+\")) !== null) {\n                        isQueryEmpty = true;\n                        break;\n                    }\n                }\n            }\n            var filterSuccessHandler = function (data) {\n                if (Array.isArray(data)) {\n                    data.forEach(function (result) {\n                        if (typeof result === \"object\" && typeof result.name === \"string\") {\n                            // Convert special characters to safely insert into template.\n                            result.name = result.name\n                                .replace(/&/g, \"&amp;\")\n                                .replace(/</g, \"&lt;\")\n                                .replace(/>/g, \"&gt;\")\n                                .replace(/\"/g, \"&quot;\")\n                                .replace(/'/g, \"&apos;\");\n                        }\n                    });\n                }\n                callback(data);\n                // If data is empty, cache the results to prevent\n                // other requests against similarly-started\n                // query strings.\n                if (data.length) {\n                    atCache[query] = data;\n                }\n                else {\n                    atEmpty[query] = query;\n                }\n            };\n            // Produce the suggestions based on data either\n            // cached or retrieved.\n            if (shouldContinueFiltering && !isQueryEmpty && !atCache[query]) {\n                $.getJSON(formatUrl(\"/user/tagsearch\"), {\n                    q: query,\n                    limit: serverLimit,\n                }, filterSuccessHandler);\n            }\n            else {\n                // If no point filtering more as the parent filter\n                // has not been maxed out with responses, use the\n                // closest parent filter instead of the latest\n                // query string.\n                if (!shouldContinueFiltering) {\n                    callback(atCache[filterString]);\n                }\n                else {\n                    callback(atCache[query]);\n                }\n            }\n        }\n    };\n    /**\n     * Pre-insert handler for atwho.\n     *\n     * Note, in contenteditable mode (iframe for us), the value is surrounded by span tags.\n     */\n    function beforeInsertHandler(value, $li) {\n        // It's better to use the value provided, as it may have\n        // html tags around it, depending on mode. Using the\n        // regular expression avoids the need to check what mode\n        // the suggestion is made in, and then constructing\n        // it based on that. Optional assignment for undefined\n        // matcher callback results.\n        var username = $li.data(\"value\") || \"\";\n        // Pop off the flag--usually @ or :\n        username = username.slice(1, username.length);\n        // Check if there are any whitespaces, and if so, add\n        // quotation marks around the whole name.\n        var requiresQuotation = /[^\\w-]/.test(username);\n        // Check if there are already quotation marks around\n        // the string--double or single.\n        var hasQuotation = /([\"'])(.+)([\"'])/g.test(username);\n        var insert = username;\n        if (requiresQuotation && !hasQuotation) {\n            // Do not even need to have value wrapped in\n            // any tags at all. It will be done automatically.\n            // insert = value.replace(/(.*\\>?)@([\\w\\d\\s\\-\\+\\_]+)(\\<?.*)/, '$1@\"$2\"$3');\n            insert = '\"' + username + '\"';\n        }\n        // This is needed for checking quotation mark directly\n        // after at character, and preventing another at character\n        // from being inserted into the page.\n        var rawAtMatch = rawMatch || \"\";\n        var atQuote = /.?@([\"'])/.test(rawAtMatch);\n        // If atQuote is false, then insert the at character,\n        // otherwise it means the user typed a quotation mark\n        // directly after the at character, which, would get\n        // inserted again if not checked. atQuote would\n        // be false most of the time; the exception is when\n        // it's true.\n        if (!atQuote) {\n            insert = this.at + insert;\n        }\n        // The last character prevents the matcher from trigger on nearly everything.\n        return insert;\n    }\n    /**\n     * Custom highlighting to accept spaces in names.\n     * This is almost a copy of the default in the library, with tweaks in the regex.\n     */\n    function highlightHandler(li, query) {\n        if (!query) {\n            return li;\n        }\n        var regexp = new RegExp(\">\\\\s*(\\\\w*)(\" + query.replace(\"+\", \"\\\\+\") + \")(\\\\w*)\\\\s*(\\\\s+.+)?<\", \"ig\");\n        // Capture group 4 for possible spaces\n        return li.replace(regexp, function (str, $1, $2, $3, $4) {\n            // Weird Chrome behaviour, so check for undefined, then\n            // set to empty string if so.\n            if (typeof $3 === \"undefined\") {\n                $3 = \"\";\n            }\n            if (typeof $4 === \"undefined\") {\n                $4 = \"\";\n            }\n            return \"> \" + $1 + \"<strong>\" + $2 + \"</strong>\" + $3 + $4 + \" <\";\n        });\n    }\n    $(editorElement)\n        .atwho({\n        at: \"@\",\n        tpl: '<li data-value=\"@${name}\" data-id=\"${id}\">${name}</li>',\n        limit: maxSuggestions,\n        callbacks: {\n            remote_filter: remoteDataHandler,\n            before_insert: beforeInsertHandler,\n            highlighter: highlightHandler,\n            matcher: matchAtMention,\n        },\n        cWindow: iframeWindow,\n    })\n        .atwho({\n        at: \":\",\n        tpl: emojiTemplate,\n        insert_tpl: \"${atwho-data-value}\",\n        callbacks: {\n            matcher: matchFakeEmoji,\n            tplEval: function (tpl, map) { return log(map); },\n        },\n        limit: maxSuggestions,\n        data: emojiList,\n        cWindow: iframeWindow,\n    });\n    /**\n     * This hook is triggered when atWho places a selection list in the window.\n     * The context is passed implicitly when triggered by at.js.\n     *\n     * @param event - A custom event triggered by the advanced editor iframe/wysiwyg.\n     * @param offset - The pixel offsets inside of the iframe.\n     * @param context - Context from the contenteditable inside of the iframe.\n     */\n    function iframeAtWhoRepositionHandler(event, offset, context) {\n        // Actual suggestion box that will appear.\n        var suggestionElement = context.view.$el;\n        // The area where text will be typed (contenteditable body).\n        var $inputor = context.$inputor;\n        // Display it below the text.\n        var lineHeight = parseInt($inputor.css(\"line-height\"), 10);\n        // offset contains the top left values of the offset to the iframe\n        // we need to convert that to main window coordinates\n        var iframeOffset = $(iframe).offset();\n        var leftCoordinate = (iframeOffset ? iframeOffset.left : 0) + offset.left;\n        var topCoordinate = iframeOffset ? iframeOffset.top : 0;\n        var selectHeight = 0;\n        // In wysiwyg mode, the suggestbox follows the typing, which\n        // does not happen in regular mode, so adjust it.\n        // Either @ or : for now.\n        var at = context.at;\n        var text = context.query.text;\n        var fontMirror = $(\".BodyBox,.js-bodybox\");\n        var font = fontMirror.css(\"font-size\") + \" \" + fontMirror.css(\"font-family\");\n        // Get font width\n        var fontWidth = (at + text).width(font) - 2;\n        if (at === \"@\") {\n            leftCoordinate -= fontWidth;\n        }\n        if (at === \":\") {\n            leftCoordinate -= 2;\n        }\n        // atWho adds 3 select areas, presumably for differnet positing on screen (above below etc)\n        // This finds the active one and gets the container height\n        $(suggestionElement).each(function (index, element) {\n            var outerHeight = $(element).outerHeight();\n            var height = $(element).height();\n            if (outerHeight && height && outerHeight > 0) {\n                selectHeight += height + lineHeight;\n            }\n        });\n        // Now should we show the selection box above or below?\n        var windowHeight = $(window).height() || 0;\n        var scrollPosition = $(window).scrollTop() || 0;\n        var selectionPosition = topCoordinate + offset.top - ($(window).scrollTop() || 0);\n        var iAvailableSpace = windowHeight - (selectionPosition - scrollPosition);\n        if (iAvailableSpace >= selectHeight) {\n            // Enough space below\n            topCoordinate = topCoordinate + offset.top + selectHeight - scrollPosition;\n        }\n        else {\n            // Place it above instead\n            // @todo should check if this is more space than below\n            topCoordinate = topCoordinate + offset.top - scrollPosition;\n        }\n        // Move the select box\n        var newOffset = {\n            left: leftCoordinate,\n            top: topCoordinate,\n        };\n        $(suggestionElement).offset(newOffset);\n    }\n    // Only necessary for iframe.\n    // Based on work here: https://github.com/ichord/At.js/issues/124\n    if (iframeWindow) {\n        $(iframeWindow).on(\"reposition.atwho\", iframeAtWhoRepositionHandler);\n    }\n}\n","/**\n * Entrypoint for gradually replacing global.js\n *\n * At some point everything in this folder should be able to be removed (new base theme).\n *\n * @author Adam Charron <adam.c@vanillaforums.com>\n * @copyright 2009-2018 Vanilla Forums Inc.\n * @license GPLv2\n */\nimport { onContent, onReady } from \"@core/application\";\nimport { initializeAtComplete } from \"./atwho\";\n// Initialize legacy @mentions for all BodyBox elements.\nif ($.fn.atwho) {\n    onReady(function () { return initializeAtComplete(\".BodyBox,.js-bodybox\"); });\n    onContent(function () { return initializeAtComplete(\".BodyBox,.js-bodybox\"); });\n    // Also assign this function to the global `gdn` object.\n    // The advanced editor calls this function directly when in wysiwyg format, as it needs to\n    // handle an iframe, and the editor instance needs to be referenced. The advanced editor does not yet use\n    // this build process so it can only communicate through here with a global.\n    window.gdn.atCompleteInit = initializeAtComplete;\n}\n","/**\n * @author Adam Charron <adam.c@vanillaforums.com>\n * @copyright 2009-2018 Vanilla Forums Inc.\n * @license GPLv2\n */\nimport { onContent, getMeta, _executeReady } from \"@core/application\";\nimport { log, logError, debug } from \"@core/utility\";\nimport { _mountComponents } from \"@core/internal\";\nimport gdn from \"@core/gdn\";\nimport apiv2 from \"@core/apiv2\";\n// Right now this is imported here instead of being its own bundle.\n// Once we have some part of vanilla that can function without the legacy js,\n// this should be pulled out into its own javascript bundle.\nimport \"@core/legacy\";\n// Inject the debug flag into the utility.\ndebug(getMeta(\"debug\", false));\n// Export the API to the global object.\ngdn.apiv2 = apiv2;\n// Mount all data-react components.\nonContent(function (e) {\n    _mountComponents(e.target);\n});\nlog(\"Bootstrapping\");\n_executeReady()\n    .then(function () {\n    log(\"Bootstrapping complete.\");\n    var contentEvent = new CustomEvent(\"X-DOMContentReady\", { bubbles: true, cancelable: false });\n    document.dispatchEvent(contentEvent);\n})\n    .catch(function (error) {\n    logError(error);\n});\n","/**\n * Internal functions that should not be used outside of core.\n *\n * @module internal\n */\nimport { addComponent, componentExists, getComponent } from \"@core/application\";\nimport App from \"@core/Main/App\";\nimport { logError } from \"@core/utility\";\nimport React from \"react\";\nimport ReactDOM from \"react-dom\";\n/**\n * Mount all declared Components on the dom.\n *\n * The page signifies that an element contains a component with the `data-react=\"<Component>\"` attribute.\n *\n * @param parent - The parent element to search. This element is not included in the search.\n */\nexport function _mountComponents(parent) {\n    if (!componentExists(\"App\")) {\n        addComponent(\"App\", App);\n    }\n    var nodes = parent.querySelectorAll(\"[data-react]\");\n    Array.prototype.forEach.call(nodes, function (node) {\n        var name = node.getAttribute(\"data-react\");\n        var Component = getComponent(name);\n        if (Component) {\n            ReactDOM.render(React.createElement(Component, null), node);\n        }\n        else {\n            logError(\"Could not find component %s.\", name);\n        }\n    });\n}\n"],"sourceRoot":""}