// Forms
//
// Find the dashboard form styling here.
//
// Styleguide 3.

@mixin list-reset() {
  padding-left: 0;

  li {
    list-style: none;
    justify-content: space-between;
  }

  label {
    font-weight: 500;
    margin-bottom: 0;
  }
}

form {
  ul,
  ol {
    @include list-reset();
  }
}

.form-control {
  line-height: 1.5;
  padding-top: ($control-height-rem - ($border-width * 2) - ($font-size-base * $line-height)) / 2;
  padding-bottom: ($control-height-rem - ($border-width * 2) - ($font-size-base * $line-height)) / 2;
  border: $border-width solid #ccc;
}

// Quick and dirty horizontal form
.form-horizontal {
  li {
    @extend .form-group;
    @extend .row;

    > label {
      @extend .label-wrap;
    }

    > input {
      @extend .input-wrap;
    }

    > select {
      @extend .input-wrap;
    }
  }
}

// Forms
//
//
//
// Styleguide 3.1.

// Form layout
//
// Here's how to build a basic form field.
//
// .stacked - Stacks radio or checkboxes.
//
// Markup:
// <form>
//   <ul>
//     <li class="form-group row">
//       <div class="label-wrap">
//          <label for="fieldID">Field</label>
//          <div class="info">Info text for field</div>
//       </div>
//       <div class="input-wrap">
//         <input type="text" id="fieldID" class="form-control">
//       </div>
//     </li>
//   </ul>
// </form>
//
// Styleguide 3.1.1

.label-wrap {
  img {
    @extend .padded;
    max-width: 50%;
    max-height: 200px;
  }
}

.Info,
.Info2,
.info {
  display: block;
  font-size: $font-size-sm;
  line-height: $line-height-lg;
  color: $grey;
}

// Form grid
.row {
  > .input-wrap {
    @extend .col-sm-16;
  }

  > .label-wrap {
    @extend .col-sm-8;
  }

  > .label-wrap-wide {
    @extend .row-padding-left;
    flex-grow: 3;
  }

  .input-wrap-right {
    @extend .row-padding-right;
  }
}

.input-wrap-multiple {
  display: flex;

  > *:last-child {
    margin-left: $spacer / 2;
  }
}

.stacked label {
  display: block;
}

.row-padding-left {
  padding-left: $padding-default;
}

.row-padding-right {
  padding-right: $padding-default;
}

.form-group.row {
  align-items: center;
  padding-bottom: 1rem;
  border-bottom: 1px dotted $grey-light;

  &:first-child {
    padding-top: 1rem;
    border-top: 1px dotted $grey-light;
  }
}



// Toggles
//
// Toggles can either be a checkbox form element or an anchor.
//
// Styleguide 3.3.

// Anchor toggle
//
// Here's how to build an anchor toggle.
//
// .toggle-wrap-on - On state
//
// Markup:
// <div class="toggle-wrap {{modifier_class}}">
//   <a>
//     <div class="toggle-well"></div>
//     <div class="toggle-slider"></div>
//   </a>
// </div>
//
// Styleguide 3.3.1.

.toggle-wrap {
  display: block;
  position: relative;
  width: $toggle-height * 2;
  height: $toggle-height;
}

.toggle-well {
  display: block;
  position: absolute;
  top: 0;
  left: 0;
  width: $toggle-height * 2;
  height: $toggle-height;
  background-color: $white;
  border-radius: $toggle-height / 2;
  border: $toggle-border-width solid $grey;
  transition: background .4s;
  cursor: pointer;
}

.toggle-slider {
  display: block;
  position: absolute;
  top: $toggle-padding + $toggle-border-width;
  left: $toggle-padding + $toggle-border-width;
  bottom: $toggle-padding + $toggle-border-width;
  width: $toggle-height - ($toggle-padding * 2) - ($toggle-border-width * 2);
  height: $toggle-height - ($toggle-padding * 2) - ($toggle-border-width * 2);
  border-radius: ($toggle-height - ($toggle-padding)) / 2;
  border: $toggle-border-width solid $grey;
  background-color: $white;
  outline: 0;
  transition: left .4s;
  cursor: pointer;
}

.toggle-well-on {
  background-color: $brand-primary;
}

.toggle-slider-on {
  left: $toggle-height + $toggle-padding;
}

.toggle-slider-active {
  left: ($toggle-height / 2) + $toggle-padding;
  transition: left .4s;
}

.toggle-wrap-on {
  .toggle-well {
    @extend .toggle-well-on;
  }

  .toggle-slider {
    @extend .toggle-slider-on;
  }
}

.InProgress {
  .toggle-slider {
    @extend .toggle-slider-active;
  }
}

.toggle-box-label-wrap {
  padding-left: $padding-default;
}

// Checkbox toggle
//
// Here's how to build an checkbox toggle.
//
// Markup:
// <div class="toggle-wrap">
//   <input id="toggle-checkbox" type="checkbox" />
//   <label for="toggle-checkbox"></label>
// </div>
//
// Styleguide 3.3.2.

.toggle-wrap {
  label {
    display: inline;
  }

  input[type="checkbox"] {
    position: absolute;
    margin-left: -9999px;
    visibility: hidden;

    + label {
      &::before,
      &::after {
        content: '';
      }

      &::before {
        @extend .toggle-well;
      }

      &::after {
        @extend .toggle-slider;
      }
    }
  }

  // When checked, move and change background color
  input[type="checkbox"]:checked + label::before {
    @extend .toggle-well-on;
  }

  input[type="checkbox"]:checked + label::after {
    @extend .toggle-slider-on;
  }
}

// Color Pickers
//
//
//
// Markup:
// <div class="js-color-picker color-picker ">
//   <input type="text" class="js-color-picker-value color-picker-value hidden" />
//   <input type="text" class="js-color-picker-text color-picker-text form-control" />
//   <span class="js-color-picker-preview color-picker-preview"></span>
//   <input type="color" class="js-color-picker-color color-picker-color" />
// </div>
//
// Styleguide 3.4

.color-picker {
  position: relative;
  @extend .input-wrap;
}

// Hide the html color input
.color-picker-color {
  position: absolute;
  width: 0;
  height: 0;
  opacity: 0;
  padding: 0;
}

.color-picker-preview {
  position: absolute;
  top: $spacer / 4;
  right: ($spacer / 4) + $border-width-rem;
  width: 2.5rem;
  height: 2rem - ($spacer / 4);
  background: $black;
  border: $border-width solid $border-color;
  cursor: pointer;
}

// File
//
// Custom file input.

.file-upload {
  position: relative;
  display: inline-block;
  width: 100%;
  font-weight: 400;
  cursor: pointer;
}

.file-upload input {
  margin: 0;
  filter: alpha(opacity = 0);
  opacity: 0;
}

.file-upload-choose {
  position: absolute;
  top: 0;
  right: 0;
  left: 0;
  padding: $control-padding-y $spacer * 3 / 4;
  color: $grey;
  border: $input-btn-border-width solid $input-border-color;
  border-radius: $border-radius;
}

.file-upload-browse {
  position: absolute;
  top: 0;
  right: 0;
  @extend .btn;
  @extend .btn-secondary;
}

// Focus state
.file input:focus ~ .file-custom {
  @include box-shadow(0 0 0 .075rem #fff, 0 0 0 .2rem #0074d9);
}


// Select
//
// Replaces the browser default select with a custom one, mostly pulled from
// http://primercss.io.
//
// Includes IE9-specific hacks (noted by ` \9`).

select.form-control {
  background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAUCAMAAACzvE1FAAAADFBMVEUzMzMzMzMzMzMzMzMKAG/3AAAAA3RSTlMAf4C/aSLHAAAAPElEQVR42q3NMQ4AIAgEQTn//2cLdRKppSGzBYwzVXvznNWs8C58CiussPJj8h6NwgorrKRdTvuV9v16Afn0AYFOB7aYAAAAAElFTkSuQmCC);
}

select {
  display: inline-block;
  max-width: 100%;
  padding: .375rem .75rem;
  padding-right: .75rem \9;
  color: $input-color;
  vertical-align: middle;
  background-color: #fff;
  background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAUCAMAAACzvE1FAAAADFBMVEUzMzMzMzMzMzMzMzMKAG/3AAAAA3RSTlMAf4C/aSLHAAAAPElEQVR42q3NMQ4AIAgEQTn//2cLdRKppSGzBYwzVXvznNWs8C58CiussPJj8h6NwgorrKRdTvuV9v16Afn0AYFOB7aYAAAAAElFTkSuQmCC);
  background-repeat: no-repeat;
  background-position: right .75rem center;
  background-image: none \9;
  background-size: 8px 10px;
  border: $input-btn-border-width solid $input-border-color;
  // Use vendor prefixes as `appearance` isn't part of the CSS spec.
  -moz-appearance: none;
  -webkit-appearance: none;

  &:focus {
    border-color: #51a7e8;
    outline: none;
    @include box-shadow(inset 0 1px 2px rgba(0, 0, 0, .075), 0 0 5px rgba(81, 167, 232, .5));
  }

  // Hides the default caret in IE11
  &::-ms-expand {
    opacity: 0;
  }
}


// Label selectors
//
// Label selectors replace checkboxes and radios with a image and/or text selector.
//
// Markup:
// <form>
// <ul class="label-selector">
//   <li class="label-selector-item">
//     <input type="radio" id="babySeal" name="babyAnimals">
//     <label for="babySeal">
//       <div class="image-wrap">
//         <img class="label-selector-image" src="./public/resources/images/baby-seal.jpg" alt="Baby Seal">
//         <div class="overlay">
//           <div class="buttons">
//             <a class="btn btn-transparent">Button</a>
//           </div>
//         </div>
//       </div>
//       <div class="title">Baby Seal</div>
//       <div class="info">by Author</div>
//       <p class="description">Choose this happy baby seal. It's so very happy.</p>
//     </label>
//   </li>
//   <li class="label-selector-item">
//     <input type="radio" id="puppy" name="babyAnimals">
//     <label for="puppy">
//       <div class="image-wrap">
//         <img class="label-selector-image" src="./public/resources/images/puppy.jpg" alt="Puppy">
//         <div class="overlay">
//           <div class="buttons">
//             <a class="btn btn-transparent">Button</a>
//           </div>
//         </div>
//       </div>
//       <div class="title">Puppy</div>
//       <div class="info">by Author</div>
//       <p class="description">Choose this sleepy puppy. Sooo tired, puppy.</p>
//     </label>
//   </li>
// </ul>
// </form>
//
// Styleguide 3.5.

.label-selector {
  @extend .row;
  @include list-reset();

  label {
    padding-left: 0;
  }

  label {
    cursor: pointer;
  }

  input[type=radio],
  input[type=checkbox] {
    position: absolute;
    opacity: 0;
  }

  .active,
  input[type=radio]:checked ~ label,
  input[type=radio]:checked ~ label {
    cursor: default;

    .overlay {
      display: flex;
      align-items: center;
      justify-content: center;
      height: 100%;
      opacity: 1;
      background-color: $white;
      background-color: rgba(255,255,255,.7);

      > * {
        display: none;
      }
    }

    .label-selector-image {
      opacity: .5;
    }
  }

  .label-selector-image {
    display: block;
    width: 100%;
    border: 1px solid $border-color;
  }

  .title {
    text-align: center;
    font-weight: 500;
  }

  .image-wrap {
    position: relative;
    display: block;
    margin-bottom: $spacer / 2;

    &:hover .overlay {
      height: 100%;
    }
  }

  .overlay {
    display: block;
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    width: 100%;
    height: 0;
    z-index: 20;
    background-color: $brand-primary;
    opacity: .9;
    overflow: hidden;
    transition: all .1s;
    text-align: center;


    &::after {
      @include icon;
      font-size: 4rem;
      color: $brand-success;
      text-align: center;
      transition: opacity .1s;
      opacity: 1;
      @include char-content($icon-ok-circle);
    }
  }

  .buttons {
    display: flex;
    flex-wrap: wrap;
    margin-left: 0;
    margin-right: 0;
    padding: $spacer / 2;
    align-items: center;
    justify-content: center;
    width: 100%;
    height: 100%;

    > .btn {
      display: block;
      margin: ($spacer / 6) ($spacer / 4);
      max-height: $line-height * $font-size-base + ($btn-padding-y * 2) + ($border-width * 2);
      min-width: 5rem;
    }
  }

  .description {
    display: none;
  }
}

.label-selector-item {
  @extend .col-xs-12;
  @extend .col-sm-8;
  @extend .col-lg-8;
  @extend .col-xl-6;

  padding: $spacer $spacer ($spacer / 2);
}

// Search input
//
// Search inputs have a hidden button and a search icon on the input.
//
// Markup:
// <form>
//   <div class="search-wrap">
//     <input class="form-control">
//     <button type="submit" class="search-submit">Search</button>
//   </div>
// </form>
//
// Styleguide 3.6.


.search-wrap {
  position: relative;

  .form-control {
    border-radius: 1.25rem;
  }

  &::before {
    position: absolute;
    top: .375rem;
    left: 1rem;
    line-height: $font-size-base * $line-height;
    @extend %icon;
    @include char-content($icon-search);
  }
}

// Hide the button
.search-submit {
  position: absolute;
  left: -9999px;
}
