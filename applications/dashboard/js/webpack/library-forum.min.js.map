{"version":3,"sources":["webpack:///./applications/dashboard/src/scripts/application.tsx","webpack:///./applications/dashboard/src/scripts/utility.ts","webpack:///./applications/dashboard/src/scripts/embeds.tsx","webpack:///./applications/dashboard/src/scripts/dom.ts","webpack:///./applications/dashboard/src/scripts/apiv2.ts","webpack:///./applications/dashboard/src/scripts/state/utility.ts","webpack:///./applications/dashboard/src/scripts/componentIDs.ts","webpack:///./applications/dashboard/src/scripts/components/forms/Paragraph.tsx","webpack:///./applications/dashboard/src/scripts/components/DocumentTitle.tsx","webpack:///./applications/dashboard/src/scripts/gdn.ts","webpack:///./applications/dashboard/src/scripts/state/users/requestPasswordActions.ts","webpack:///./applications/dashboard/src/scripts/state/reducerRegistry.ts","webpack:///./applications/dashboard/src/scripts/state/authenticate/passwordActions.ts","webpack:///./applications/dashboard/src/scripts/components/forms/InputTextBlock.tsx","webpack:///./applications/dashboard/src/scripts/app/authenticate/components/PasswordForm.tsx","webpack:///./applications/dashboard/src/scripts/components/forms/ButtonSubmit.tsx","webpack:///./applications/dashboard/src/scripts/app/authenticate/components/RememberPasswordLink.tsx","webpack:///./applications/dashboard/src/scripts/state/getStore.ts","webpack:///./applications/dashboard/src/scripts/@types/api/general.ts","webpack:///./applications/dashboard/src/scripts/@types/api/authenticate.ts","webpack:///./applications/dashboard/src/scripts/app/authenticate/components/SSOMethods.tsx","webpack:///./applications/dashboard/src/scripts/app/authenticate/RecoverPasswordPage.tsx","webpack:///./applications/dashboard/src/scripts/components/forms/ErrorMessages.tsx","webpack:///./applications/dashboard/src/scripts/components/forms/Checkbox.tsx","webpack:///./applications/dashboard/src/scripts/components/forms/Button.tsx"],"names":["getMeta","key","defaultValue","_dashboard_gdn__WEBPACK_IMPORTED_MODULE_2__","meta","parts","split","haystack","parts_1","__values","parts_1_1","next","done","part","value","hasOwnProperty","setMeta","last","pop","Error","parts_2","parts_2_1","translate","str","defaultTranslation","substr","undefined","translations","t","isAllowedUrl","input","validator_lib_isURL__WEBPACK_IMPORTED_MODULE_4___default","protocols","require_tld","require_protocol","require_host","require_valid_protocol","allow_trailing_dot","allow_protocol_relative_urls","formatUrl","path","indexOf","urlFormat","replace","_components","addComponent","name","component","toLowerCase","componentExists","getComponent","_mountComponents","parent","querySelectorAll","forEach","node","getAttribute","Component","react_dom__WEBPACK_IMPORTED_MODULE_1___default","a","render","react__WEBPACK_IMPORTED_MODULE_0___default","createElement","Object","_dashboard_utility__WEBPACK_IMPORTED_MODULE_3__","_routes","addRoutes","routes","Array","isArray","push","apply","__spread","getRoutes","_readyHandlers","onReady","callback","_executeReady","Promise","resolve","handlerPromises","map","handler","exec","all","then","document","readyState","addEventListener","onContent","makeProfileUrl","username","encodeURIComponent","_debug","debug","newValue","resolvePromisesSequentially","promiseFunctions","reject","count","results","concat","reduce","previousPromise","currentPromise","result","catch","err","log","_i","arguments","length","console","logError","error","logWarning","warn","hashString","prevHash","currVal","charCodeAt","splitStringLoosely","toSplit","splitWith","normalizedName","normalize","normalizedSplitTerm","charactersUsed","RegExp","piece","start","substring","isInstanceOfOneOf","needle","haystack_1","haystack_1_1","simplifyFraction","numerator","denominator","findGCD","b","gcd","shorthand","matchAtMention","subtext","shouldStartWithSpace","requireQuotesForWhitespace","lines","lastLine","nonExcludedCharacters","excludeWhiteSpace","excluded","regexStr","match","rawMatch","IMAGE_REGEX","isFileImage","file","test","type","capitalizeFirstLetter","charAt","toUpperCase","slice","indexArrayByKey","array","object","array_1","array_1_1","item","SAFE_PROTOCOL_REGEX","sanitizeUrl","url","FOCUS_CLASS","embedRenderers","embedComponents","getEditorEmbedTypes","keys","registerEmbedRenderer","renderer","registerEmbedComponent","renderEmbed","elements","data","inEditor","root","classList","add","content","onRenderComplete","escapeHTML","div","appendChild","createTextNode","innerHTML","unescapeHTML","escapedString","child","childNodes","nodeValue","hideElement","element","setAttribute","unhideElement","remove","removeAttribute","elementIsVisible","offsetWidth","offsetHeight","getClientRects","getFormData","formElement","HTMLFormElement","FormData","delegatedEventListeners","delegateEvent","eventName","filterSelector","scopeSelector","scope","functionKey","toString","querySelector","HTMLElement","eventHash","_dashboard_utility__WEBPACK_IMPORTED_MODULE_0__","includes","wrappedCallback","event","target","closest","call","removeDelegatedEvent","_a","removeEventListener","removeAllDelegatedEvents","toggleAttribute","attribute","dataMap","WeakMap","setData","initialValue","has","get","set","getData","attributeString","hasAttribute","ensureHtmlElement","selectorOrElement","testChar","emojiSupportedCache","isEmojiSupported","canvas","getContext","offset","window","devicePixelRatio","ctx","fillStyle","textBaseline","font","fillText","getImageData","emojiOptions","className","size","convertToSafeEmojiCharacters","stringOrNode","twemoji__WEBPACK_IMPORTED_MODULE_1___default","parse","loadEventCallbacks","rejectionCache","Map","ensureScript","scriptUrl","existingScript","callbacks","head","getElementsByTagName","script_1","src","onerror","timeout_1","setTimeout","onload","clearTimeout","delete","getNextTabbableElement","options","defaultTabbableOptions","documentElement","excludedElements","excludedRoots","reverse","fromElement","activeElement","allowLooping","finalOptions","__assign","tabbables","tabbable__WEBPACK_IMPORTED_MODULE_2___default","filter","tabbableElement","contains","_b","_c","excludedRoot","currentTabIndex","targetIndex","checkDomTreeWasClicked","rootNode","clickedElement","checkDomTreeHasFocus","possibleTargets","relatedTarget","explicitOriginalTarget","possibleTargets_1","possibleTargets_1_1","body","hasFocus","watchFocusInDomTree","triggeringElement","handleStickyHeaderState","goingDown","lastScrollPos","currentScrollPos","isAtTopOfPage","elementHeight","isPastHeader","style","position","offsetTop","elementTop","top","parseInt","toggle","stickyHeader","header","currentScrollPos_1","Math","max","scrollY","lastScrollPos_1","e","lodash_debounce__WEBPACK_IMPORTED_MODULE_3___default","requestAnimationFrame","leading","getDraggedImage","dataTransfer","files","preventDefault","from","getPastedImage","clipboardData","items","getAsFile","Boolean","getElementHeight","previousBottomMargin","height","getBoundingClientRect","getComputedStyle","marginTop","marginBottom","topHeight","bottomHeight","bottomMargin","fieldErrorTransformer","responseData","status","errors","_dashboard_utility__WEBPACK_IMPORTED_MODULE_1__","api","axios__WEBPACK_IMPORTED_MODULE_2___default","create","baseURL","_dashboard_application__WEBPACK_IMPORTED_MODULE_0__","headers","common","X-Requested-With","transformResponse","defaults","paramsSerializer","params","qs__WEBPACK_IMPORTED_MODULE_3___default","stringify","indices","uploadImage","image","append","post","sent","getFieldErrors","loadable","field","_dashboard_types_api__WEBPACK_IMPORTED_MODULE_4__","ERROR","LOADING","getGlobalErrorMessage","validFields","validFields_1","validFields_1_1","message","__webpack_exports__","createAction","payload","generateApiActionCreators","requestType","successType","errorType","dummyResponseType","dummyMetaType","request","createApiRequestAction","success","response","createApiSuccessAction","createApiErrorAction","apiThunk","endpoint","actionCreators","dispatch","_dashboard_apiv2__WEBPACK_IMPORTED_MODULE_0__","axiosError","uniqueIDFromPrefix","suffix","lodash_uniqueId__WEBPACK_IMPORTED_MODULE_0___default","getRequiredID","props","id","getOptionalID","Paragraph","_super","_this","this","_dashboard_componentIDs__WEBPACK_IMPORTED_MODULE_2__","__extends","prototype","componentClasses","classnames__WEBPACK_IMPORTED_MODULE_1___default","isError","accessibilityProps","aria-live","role","defaultProps","DocumentTitle","componentDidMount","title","getHeadTitle","componentWillUpdate","nextProps","children","siteTitle","_dashboard_application__WEBPACK_IMPORTED_MODULE_1__","join","gdn","permissions","POST_REQUEST_PASSWORD_REQUEST","POST_REQUEST_PASSWORD_ERROR","POST_REQUEST_PASSWORD_SUCCESS","AFTER_REQUEST_PASSWORD_SUCCESS_NAVIGATE","afterRequestPasswordSuccessNavigate","_dashboard_state_utility__WEBPACK_IMPORTED_MODULE_0__","otherActions","requestPasswordActions","postRequestPassword","haveGot","wasReadyCalled","reducers","registerReducer","reducer","getReducers","reducerRegistry","register","POST_AUTHENTICATE_PASSWORD_REQUEST","POST_AUTHENTICATE_PASSWORD_ERROR","POST_AUTHENTICATE_PASSWORD_SUCCESS","authenticatePasswordActions","postAuthenticatePassword","_dashboard_apiv2__WEBPACK_IMPORTED_MODULE_1__","urlParms","URLSearchParams","location","href","_dashboard_application__WEBPACK_IMPORTED_MODULE_2__","InputTextBlock","inputRef","createRef","onChange","state","_dashboard_componentIDs__WEBPACK_IMPORTED_MODULE_4__","describedBy","inputClasses","inputClassNames","hasErrors","errorID","labelID","label","_Paragraph__WEBPACK_IMPORTED_MODULE_3__","labelNote","disabled","required","placeholder","aria-invalid","aria-describedby","aria-labelledby","ref","_ErrorMessages__WEBPACK_IMPORTED_MODULE_2__","current","componentWillUnount","defineProperty","focus","select","PasswordForm","usernameInput","react__WEBPACK_IMPORTED_MODULE_2___default","passwordInput","handleCheckBoxChange","setState","rememberMe","checked","handleUsernameChange","handlePasswordChange","password","handleSubmit","authenticate","persist","_dashboard_componentIDs__WEBPACK_IMPORTED_MODULE_9__","formDescribedBy","globalErrorMessage","passwordState","formDescriptionID","method","onSubmit","noValidate","_dashboard_components_forms_Paragraph__WEBPACK_IMPORTED_MODULE_8__","_dashboard_components_forms_InputTextBlock__WEBPACK_IMPORTED_MODULE_5__","allowEdit","defaultUsername","_dashboard_components_forms_Checkbox__WEBPACK_IMPORTED_MODULE_6__","react_router_dom__WEBPACK_IMPORTED_MODULE_3__","to","_dashboard_components_forms_ButtonSubmit__WEBPACK_IMPORTED_MODULE_7__","allowSubmit","componentDidUpdate","prevProps","_dashboard_types_api__WEBPACK_IMPORTED_MODULE_11__","mapStateToProps","mapDispatchToProps","_dashboard_state_authenticate_passwordActions__WEBPACK_IMPORTED_MODULE_10__","withRedux","react_redux__WEBPACK_IMPORTED_MODULE_12__","react_router_dom__WEBPACK_IMPORTED_MODULE_4__","ButtonSubmit","_Button__WEBPACK_IMPORTED_MODULE_2__","prefix","RememberPasswordLink","react__WEBPACK_IMPORTED_MODULE_1___default","react_router_dom__WEBPACK_IMPORTED_MODULE_2__","onClick","store","initialState","initialActions","__ACTIONS__","middleware","redux_thunk__WEBPACK_IMPORTED_MODULE_2__","composeEnhancers","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","redux__WEBPACK_IMPORTED_MODULE_0__","enhancer","getStore","_dashboard_state_reducerRegistry__WEBPACK_IMPORTED_MODULE_1__","LoadStatus","AuthenticationStep","SSOMethods","ssoMethods","index","methodStyles","backgroundColor","ui","color","foregroundColor","photoUrl","aria-hidden","buttonName","_dashboard_components_forms_Paragraph__WEBPACK_IMPORTED_MODULE_2__","RecoverPasswordPage","lodash_uniqueId__WEBPACK_IMPORTED_MODULE_8___default","emainInput","react__WEBPACK_IMPORTED_MODULE_3___default","handleEmailChange","email","pageTitleID","pageTitle","_dashboard_components_DocumentTitle__WEBPACK_IMPORTED_MODULE_2__","requestPasswordState","_dashboard_types_api__WEBPACK_IMPORTED_MODULE_9__","SUCCESS","_dashboard_components_forms_Paragraph__WEBPACK_IMPORTED_MODULE_5__","_components_RememberPasswordLink__WEBPACK_IMPORTED_MODULE_7__","onNavigateAway","_dashboard_components_forms_InputTextBlock__WEBPACK_IMPORTED_MODULE_6__","_dashboard_components_forms_ButtonSubmit__WEBPACK_IMPORTED_MODULE_4__","users","requestPassword","_dashboard_state_users_requestPasswordActions__WEBPACK_IMPORTED_MODULE_10__","react_redux__WEBPACK_IMPORTED_MODULE_11__","ErrorMessages","errorList","Button","_dashboard_componentIDs__WEBPACK_IMPORTED_MODULE_3__","classnames__WEBPACK_IMPORTED_MODULE_2___default","xmlns","viewBox","fill","d"],"mappings":"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","file":"applications/dashboard/js/webpack/library-forum.min.js","sourcesContent":["/**\n * Application functions for interop between Components in different packages.\n *\n * @copyright 2009-2018 Vanilla Forums Inc.\n * @license https://opensource.org/licenses/GPL-2.0 GPL-2.0\n */\n\nimport React, { ComponentClass } from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { RouteProps } from \"react-router-dom\";\nimport gdn from \"@dashboard/gdn\";\nimport { PromiseOrNormalCallback, logError } from \"@dashboard/utility\";\nimport isUrl from \"validator/lib/isURL\";\n\n/**\n * Get a piece of metadata passed from the server.\n *\n * @param key - The key to lookup.\n * @param defaultValue - A fallback value in case the key cannot be found.\n *\n * @returns Returns a meta value or the default value.\n */\nexport function getMeta(key: string, defaultValue?: any) {\n    if (!gdn.meta) {\n        return defaultValue;\n    }\n\n    const parts = key.split(\".\");\n    let haystack = gdn.meta;\n\n    for (const part of parts) {\n        if (!haystack.hasOwnProperty(part)) {\n            return defaultValue;\n        }\n        haystack = haystack[part];\n    }\n    return haystack;\n}\n\n/**\n * Set a piece of metadata. This will override what was passed from the server.\n *\n * @param key - The key to store under.\n * @param value - The value to set.\n */\nexport function setMeta(key: string, value: any) {\n    const parts = key.split(\".\");\n    const last = parts.pop();\n\n    if (!last) {\n        throw new Error(`Unable to set meta value ${key}. ${last} is not a valid object key.`);\n    }\n\n    let haystack = gdn.meta;\n\n    for (const part of parts) {\n        if (haystack[part] === null || typeof haystack[part] !== \"object\") {\n            haystack[part] = {};\n        }\n        haystack = haystack[part];\n    }\n    haystack[last] = value;\n}\n\n/**\n * Translate a string into the current locale.\n *\n * @param str - The string to translate.\n * @param defaultTranslation - The default translation to use.\n *\n * @returns Returns the translation or the default.\n */\nexport function translate(str: string, defaultTranslation?: string): string {\n    // Codes that begin with @ are considered literals.\n    if (str.substr(0, 1) === \"@\") {\n        return str.substr(1);\n    }\n\n    if (gdn.translations[str] !== undefined) {\n        return gdn.translations[str];\n    }\n\n    return defaultTranslation !== undefined ? defaultTranslation : str;\n}\n\n/**\n * The t function is an alias for translate.\n */\nexport const t = translate;\n\n/**\n * Determine if a string is an allowed URL.\n *\n * In the future this may be extended to check if we want to whitelist/blacklist various URLs.\n *\n * @param input - The string to check.\n */\nexport function isAllowedUrl(input: string): boolean {\n    // Options https://github.com/chriso/validator.js#validators\n    const options = {\n        protocols: [\"http\", \"https\"],\n        require_tld: true,\n        require_protocol: true,\n        require_host: true,\n        require_valid_protocol: true,\n        allow_trailing_dot: false,\n        allow_protocol_relative_urls: false,\n    };\n    return isUrl(input, options);\n}\n\n/**\n * Format a URL in the format passed from the controller.\n *\n * @param path - The path to format.\n *\n * @returns Returns a URL that can be used in the APP.\n */\nexport function formatUrl(path: string): string {\n    if (path.indexOf(\"//\") >= 0) {\n        return path;\n    } // this is an absolute path.\n\n    const urlFormat = getMeta(\"UrlFormat\", \"/{Path}\");\n\n    if (path.substr(0, 1) === \"/\") {\n        path = path.substr(1);\n    }\n\n    if (urlFormat.indexOf(\"?\") >= 0) {\n        path = path.replace(\"?\", \"&\");\n    }\n\n    return urlFormat.replace(\"{Path}\", path);\n}\n\n/**\n * @type {Object} The currently registered Components.\n * @private\n */\nconst _components = {};\n\n/**\n * Register a component in the Components registry.\n *\n * @param name The name of the component.\n * @param component The component to register.\n */\nexport function addComponent(name: string, component: ComponentClass) {\n    _components[name.toLowerCase()] = component;\n}\n\n/**\n * Test to see if a component has been registered.\n *\n * @param name The name of the component to test.\n * @returns Returns **true** if the component has been registered or **false** otherwise.\n */\nexport function componentExists(name: string): boolean {\n    return _components[name.toLowerCase()] !== undefined;\n}\n\n/**\n * Get a component from the component registry.\n *\n * @param name The name of the component.\n * @returns Returns the component or **undefined** if there is no registered component.\n */\nexport function getComponent(name: string): ComponentClass | undefined {\n    return _components[name.toLowerCase()];\n}\n\n/**\n * Mount all declared Components on the dom.\n *\n * The page signifies that an element contains a component with the `data-react=\"<Component>\"` attribute.\n *\n * @param parent - The parent element to search. This element is not included in the search.\n */\nexport function _mountComponents(parent: Element) {\n    const nodes = parent.querySelectorAll(\"[data-react]\").forEach(node => {\n        const name = node.getAttribute(\"data-react\") || \"\";\n        const Component = getComponent(name);\n\n        if (Component) {\n            ReactDOM.render(<Component />, node);\n        } else {\n            logError(\"Could not find component %s.\", name);\n        }\n    });\n}\n\n/**\n * @type {Array} The currently registered routes.\n * @private\n */\nconst _routes: any[] = [];\n\n/**\n * Register one or more routes to the app component.\n *\n * @param routes An array of routes to add.\n */\nexport function addRoutes(routes: Array<React.ReactElement<RouteProps>>) {\n    if (!Array.isArray(routes)) {\n        _routes.push(routes);\n    } else {\n        _routes.push(...routes);\n    }\n}\n\n/**\n * Get all of the currently registered routes.\n *\n * @returns Returns an array of routes.\n */\nexport function getRoutes(): Array<React.ReactElement<RouteProps>> {\n    return _routes;\n}\n\n/**\n * @type {Array}\n * @private\n */\nconst _readyHandlers: PromiseOrNormalCallback[] = [];\n\n/**\n * Register a callback that executes when the document and the core libraries are ready to use.\n *\n * @param callback - The function to call. This can return a Promise but doesn't have to.\n */\nexport function onReady(callback: PromiseOrNormalCallback) {\n    _readyHandlers.push(callback);\n}\n\n/**\n * Execute all of the registered events in order.\n *\n * @returns A Promise when the events have all fired.\n */\nexport function _executeReady(): Promise<any[]> {\n    return new Promise(resolve => {\n        const handlerPromises = _readyHandlers.map(handler => handler());\n        const exec = () => {\n            return Promise.all(handlerPromises).then(resolve);\n        };\n\n        if (document.readyState !== \"loading\") {\n            return exec();\n        } else {\n            document.addEventListener(\"DOMContentLoaded\", exec);\n        }\n    });\n}\n\n/**\n * Execute a callback when a piece of DOM content is ready to be operated on.\n *\n * This is similar to onReady() but also includes content that is added dynamically (ex. AJAX).\n * Note that this function is meant to bridge the non-react parts of the application with react.\n *\n * @param {function} callback - The callback to execute.\n */\nexport function onContent(callback) {\n    document.addEventListener(\"X-DOMContentReady\", callback);\n}\n\n/**\n * Make a URL to a user's profile.\n */\nexport function makeProfileUrl(username: string) {\n    const userPath = `/profile/${encodeURIComponent(username)}`;\n    return formatUrl(userPath);\n}\n","/**\n * General utility functions.\n * This file should have NO external dependencies other than javascript.\n *\n * @copyright 2009-2018 Vanilla Forums Inc.\n * @license https://opensource.org/licenses/GPL-2.0 GPL-2.0\n */\n\n/**\n * @type {boolean} The current debug setting.\n * @private\n */\nlet _debug = false;\n\n/**\n * Get or set the debug flag.\n *\n * @param newValue - The new value of debug.\n * @returns the current debug setting.\n */\nexport function debug(newValue?: boolean): boolean {\n    if (newValue !== undefined) {\n        _debug = newValue;\n    }\n\n    return _debug;\n}\n\ntype NormalCallback = (...args: any[]) => any;\ntype PromiseCallback = (...args: any[]) => Promise<any>;\n\nexport type PromiseOrNormalCallback = NormalCallback | PromiseCallback;\n\n/**\n * Resolve an array of functions that return promises sequentially.\n *\n * @param promiseFunctions - The functions to execute.\n *\n * @returns An array of all results in sequential order.\n *\n * @example\n * const urls = ['/url1', '/url2', '/url3']\n * const functions = urls.map(url => () => fetch(url))\n * resolvePromisesSequentially(funcs)\n *   .then(console.log)\n *   .catch(console.error)\n */\nexport function resolvePromisesSequentially(promiseFunctions: PromiseOrNormalCallback[]): Promise<any[]> {\n    if (!Array.isArray(promiseFunctions)) {\n        throw new Error(\"First argument needs to be an array of Promises\");\n    }\n\n    return new Promise((resolve, reject) => {\n        let count = 0;\n        let results = [];\n\n        function iterationFunction(previousPromise, currentPromise) {\n            return previousPromise\n                .then(result => {\n                    if (count++ !== 0) {\n                        results = results.concat(result);\n                    }\n\n                    return currentPromise(result, results, count);\n                })\n                .catch(err => reject(err));\n        }\n\n        promiseFunctions = promiseFunctions.concat(() => Promise.resolve());\n\n        promiseFunctions.reduce(iterationFunction, Promise.resolve(false)).then(() => {\n            resolve(results);\n        });\n    });\n}\n\n/**\n * Log something to console.\n *\n * This only prints in debug mode.\n *\n * @param value - The value to log.\n */\nexport function log(...value: any[]) {\n    if (_debug) {\n        // tslint:disable-next-line:no-console\n        console.log(...value);\n    }\n}\n\n/**\n * Log an error to console.\n *\n * @param value - The value to log.\n */\nexport function logError(...value: any[]) {\n    // tslint:disable-next-line:no-console\n    console.error(...value);\n}\n\n/**\n * Log a warning to console.\n *\n * @param value - The value to log.\n */\nexport function logWarning(...value: any[]) {\n    // tslint:disable-next-line:no-console\n    console.warn(...value);\n}\n\n/**\n * A simple, fast method of hashing a string. Similar to Java's hash function.\n * https://stackoverflow.com/a/7616484/1486603\n *\n * @param str - The string to hash.\n *\n * @returns The hash code returned.\n */\nexport function hashString(str: string): number {\n    function hashReduce(prevHash, currVal) {\n        // tslint:disable-next-line:no-bitwise\n        return (prevHash << 5) - prevHash + currVal.charCodeAt(0);\n    }\n    return str.split(\"\").reduce(hashReduce, 0);\n}\n\n/**\n * Split a string in multiple pieces similar to String.prototype.split but ignore most acccent characters.\n *\n * This will still return pieces with accents.\n *\n * @param toSplit The string to split.\n * @param splitWith The string to split with.\n */\nexport function splitStringLoosely(toSplit: string, splitWith: string): string[] {\n    const normalizedName = toSplit.normalize(\"NFD\").replace(/[\\u0300-\\u036f]/g, \"\");\n    const normalizedSplitTerm = splitWith.normalize(\"NFD\").replace(/[\\u0300-\\u036f]/g, \"\");\n    const normalizedPieces = normalizedName.split(new RegExp(`(${normalizedSplitTerm})`, \"i\"));\n\n    let charactersUsed = 0;\n    return normalizedPieces.map(piece => {\n        const start = charactersUsed;\n        charactersUsed += piece.length;\n        return toSplit.substring(start, charactersUsed);\n    });\n}\n\ninterface IClass {\n    new (): any;\n}\n\nexport function isInstanceOfOneOf(needle: any, haystack: IClass[]) {\n    for (const classItem of haystack) {\n        if (needle instanceof classItem) {\n            return true;\n        }\n    }\n\n    return false;\n}\n\nexport function simplifyFraction(numerator: number, denominator: number) {\n    const findGCD = (a, b) => {\n        return b ? findGCD(b, a % b) : a;\n    };\n    const gcd = findGCD(numerator, denominator);\n\n    numerator = numerator / gcd;\n    denominator = denominator / gcd;\n\n    return {\n        numerator,\n        denominator,\n        shorthand: denominator + \":\" + numerator,\n    };\n}\n\ninterface IMentionMatch {\n    match: string;\n    rawMatch: string;\n}\n\n/**\n * Custom matching to allow quotation marks in the matching string as well as spaces.\n * Spaces make things more complicated.\n *\n * @param subtext - The string to be tested.\n * @param shouldStartWithSpace - Should the pattern include a test for a whitespace prefix?\n * @returns Matching string if successful.  Null on failure to match.\n */\nexport function matchAtMention(\n    subtext: string,\n    shouldStartWithSpace: boolean = false,\n    requireQuotesForWhitespace: boolean = true,\n): IMentionMatch | null {\n    // Split the string at the lines to allow for a simpler regex.\n    const lines = subtext.split(\"\\n\");\n    const lastLine = lines[lines.length - 1];\n\n    // If you change this you MUST change the regex in src/scripts/__tests__/legacy.test.js !!!\n    /**\n     * Put together the non-excluded characters.\n     *\n     * @param {boolean} excludeWhiteSpace - Whether or not to exclude whitespace characters.\n     *\n     * @returns {string} A Regex string.\n     */\n    function nonExcludedCharacters(excludeWhiteSpace) {\n        let excluded =\n            \"[^\" +\n            '\"' + // Quote character\n            \"\\\\u0000-\\\\u001f\\\\u007f-\\\\u009f\" + // Control characters\n            \"\\\\u2028\"; // Line terminator\n\n        if (excludeWhiteSpace) {\n            excluded += \"\\\\s\";\n        }\n\n        excluded += \"]\";\n        return excluded;\n    }\n\n    let regexStr =\n        \"@\" + // @ Symbol triggers the match\n        \"(\" +\n        // One or more non-greedy characters that aren't excluded. Whitespace is allowed, but a starting quote is required.\n        '\"(' +\n        nonExcludedCharacters(false) +\n        '+?)\"?' +\n        \"|\" + // Or\n        // One or more non-greedy characters that aren't exluded. Whitespace may be excluded.\n        \"(\" +\n        nonExcludedCharacters(requireQuotesForWhitespace) +\n        '+?)\"?' +\n        \")\" +\n        \"(?:\\\\n|$)\"; // Newline terminates.\n\n    // Determined by at.who library\n    if (shouldStartWithSpace) {\n        regexStr = \"(?:^|\\\\s)\" + regexStr;\n    }\n    const regex = new RegExp(regexStr, \"gi\");\n    const match = regex.exec(lastLine);\n    if (match) {\n        return {\n            rawMatch: match[0],\n            match: match[2] || match[1], // Return either of the matching groups (quoted or unquoted).\n        };\n    }\n\n    // No match\n    return null;\n}\n\n/** This should mirror extensions allowed in Vanilla\\ImageResizer.php */\nconst IMAGE_REGEX = /^image\\/(gif|jpe?g|png)/i;\n\n/**\n * A filter for use with [].filter\n *\n * Matches only image image type files.\n * @private\n *\n * @param file - A File object.\n * @see https://developer.mozilla.org/en-US/docs/Web/API/File\n *\n * @returns Whether or not the file is an acceptable image\n */\nexport function isFileImage(file: File): boolean {\n    if (IMAGE_REGEX.test(file.type)) {\n        return true;\n    }\n\n    log(\"Filtered out non-image file: \", file.name);\n    return false;\n}\n\nexport function capitalizeFirstLetter(str: string): string {\n    return str.charAt(0).toUpperCase() + str.slice(1);\n}\n\n/**\n * Transform an array of objects and an map of objets with a given key.\n *\n * Objects that do not contain the given key are dropped.\n *\n * @param array The array to go through.\n * @param key The key to lookup.\n */\nexport function indexArrayByKey<T extends object>(\n    array: T[],\n    key: string,\n): {\n    [key: string]: T;\n} {\n    const object = {};\n    for (const item of array) {\n        if (key in item) {\n            if (!(item[key] in object)) {\n                object[item[key]] = [];\n            }\n            object[item[key]].push(item);\n        }\n    }\n    return object;\n}\n\nconst SAFE_PROTOCOL_REGEX = /^(http:\\/\\/|https:\\/\\/|tel:|mailto:\\/\\/)/;\n\n/**\n * Sanitize a URL to ensure that it matches a whitelist of approved url schemes. If the url does not match one of these schemes, prepend `unsafe:` before it.\n *\n * Allowed protocols\n * - \"http://\",\n * - \"https://\",\n * - \"tel:\",\n * - \"mailto://\",\n *\n * @param url The url to sanitize.\n */\nexport function sanitizeUrl(url: string) {\n    if (url.match(SAFE_PROTOCOL_REGEX)) {\n        return url;\n    } else {\n        return \"unsafe:\" + url;\n    }\n}\n","/**\n * Embed utility functions and types.\n * This file should have NO external dependencies other than javascript.\n *\n * @copyright 2009-2018 Vanilla Forums Inc.\n * @license https://opensource.org/licenses/GPL-2.0 GPL-2.0\n */\n\nimport React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { IDiscussionEmbed, ICommentEmbed, IScrapeData } from \"@dashboard/@types/api\";\n\nexport const FOCUS_CLASS = \"embed-focusableElement\";\n\nexport type IQuoteEmbedData = IDiscussionEmbed | ICommentEmbed;\nexport type IEmbedData = IScrapeData;\n\nexport interface IEmbedElements {\n    root: HTMLElement;\n    content: HTMLElement;\n}\n\nexport type EmbedRenderer = (elements: IEmbedElements, data: IEmbedData, inEditor: boolean) => Promise<void>;\n\nexport interface IEmbedProps<T = IScrapeData> {\n    data: T;\n    inEditor: boolean;\n    onRenderComplete: () => void;\n}\n\nconst embedRenderers: {\n    [type: string]: EmbedRenderer;\n} = {};\nconst embedComponents: {\n    [type: string]: React.ComponentClass<IEmbedProps>;\n} = {};\n\n/**\n * Get all of the registered embed types.\n */\nexport function getEditorEmbedTypes() {\n    return Object.keys(embedRenderers);\n}\n\n/**\n * Register an embed rendering function.\n */\nexport function registerEmbedRenderer(type: string, renderer: EmbedRenderer) {\n    embedRenderers[type] = renderer;\n}\n\n/**\n * Register an embed rendering function.\n */\nexport function registerEmbedComponent(type: string, component: React.ComponentClass<IEmbedProps>) {\n    embedComponents[type] = component;\n}\n\n/**\n * Render an embed into a DOM node based on it's type.\n */\nexport function renderEmbed(elements: IEmbedElements, data: IEmbedData, inEditor = true): Promise<void> {\n    return new Promise((resolve, reject) => {\n        if (!data.type) {\n            throw new Error(\"The embed type was not provided.\");\n        }\n\n        if (data.type === \"link\") {\n            elements.root.classList.add(\"embedText\");\n            elements.content.classList.add(\"embedText-content\");\n            elements.content.classList.add(\"embedLink-content\");\n        }\n\n        if (data.type === \"quote\") {\n            elements.root.classList.add(\"embedText\");\n            elements.content.classList.add(\"embedText-content\");\n            elements.content.classList.add(\"embedQuote-content\");\n        }\n\n        const renderer = data.type && embedRenderers[data.type];\n        const Component = data.type && embedComponents[data.type];\n\n        if (renderer) {\n            return renderer(elements, data, inEditor);\n        } else if (Component) {\n            ReactDOM.render(\n                <Component data={data as IScrapeData} inEditor={inEditor} onRenderComplete={resolve} />,\n                elements.content,\n            );\n        } else {\n            throw new Error(\"Could not find a renderer for the embed type - \" + data.type);\n        }\n    });\n}\n","/**\n * Utilities that have a hard dependency on the DOM.\n *\n * @copyright 2009-2018 Vanilla Forums Inc.\n * @license https://opensource.org/licenses/GPL-2.0 GPL-2.0\n */\n\nimport * as utility from \"@dashboard/utility\";\nimport twemoji from \"twemoji\";\nimport tabbable from \"tabbable\";\nimport { logError, log } from \"@dashboard/utility\";\nimport debounce from \"lodash/debounce\";\n\n/**\n * Use the browser's built-in functionality to quickly and safely escape a string.\n *\n * @param str - The string to escape.\n *\n * @returns Escaped HTML.\n */\nexport function escapeHTML(str: string): string {\n    const div = document.createElement(\"div\");\n    div.appendChild(document.createTextNode(str));\n    return div.innerHTML;\n}\n\n/**\n * Use the browser's built-in functionality to quickly unescape a string.\n * UNSAFE with unsafe strings; only use on previously-escaped ones!\n *\n * @param escapedString - A previously escaped string.\n *\n * @returns The unescaped string.\n */\nexport function unescapeHTML(escapedString: string): string {\n    const div = document.createElement(\"div\");\n    div.innerHTML = escapedString;\n    const child = div.childNodes[0];\n    return child && child.nodeValue ? child.nodeValue : \"\";\n}\n\n/**\n * Add the hidden class and aria-hidden attribute to an Element.\n *\n * @param element - The DOM Element to modify.\n */\nexport function hideElement(element: Element) {\n    element.classList.add(\"u-isHidden\");\n    element.setAttribute(\"aria-hidden\", \"true\");\n}\n\n/**\n * Remove the hidden class and aria-hidden attribute to an Element.\n *\n * @param element - The DOM Element to modify.\n */\nexport function unhideElement(element: Element) {\n    element.classList.remove(\"u-isHidden\");\n    element.removeAttribute(\"aria-hidden\");\n}\n\n/**\n * Check if an element is visible or not.\n *\n * @param element - The element to check.\n *\n * @returns The visibility.\n */\nexport function elementIsVisible(element: HTMLElement): boolean {\n    return !!(element.offsetWidth || element.offsetHeight || element.getClientRects().length);\n}\n\n/**\n * Get the form data out of a form element.\n *\n * @param {Element} formElement - The element to get the data out of.\n *\n * @returns {Object}\n */\nexport function getFormData(formElement) {\n    if (!(formElement instanceof HTMLFormElement)) {\n        return {};\n    }\n\n    const data = new FormData(formElement) as any;\n    const result = {};\n\n    data.forEach((key, value) => {\n        result[key] = value;\n    });\n\n    return result;\n}\n\nconst delegatedEventListeners = {};\n\n/**\n * Create an event listener using event delegation.\n *\n * @param eventName - The Event to listen for.\n * @param filterSelector - A CSS selector to match against.\n * @param callback - The callback function. This gets passed the fired event.\n * @param scopeSelector - And element to scope the event listener to.\n *\n * @returns The hash of the event. Save this to use removeDelegatedEvent().\n */\nexport function delegateEvent(\n    eventName: string,\n    filterSelector: string,\n    callback: (event: Event, triggeringElement: HTMLElement) => boolean | void,\n    scopeSelector?: string | HTMLElement,\n): string | undefined {\n    let functionKey = eventName + filterSelector + callback.toString();\n\n    let scope;\n\n    if (typeof scopeSelector === \"string\") {\n        scope = document.querySelector(scopeSelector);\n\n        if (!scope) {\n            throw new Error(`Unable to find element in the document for scopeSelector: ${scopeSelector}`);\n        } else {\n            functionKey += scopeSelector;\n        }\n    } else if (scopeSelector instanceof HTMLElement) {\n        scope = scopeSelector;\n    } else {\n        scope = document;\n    }\n\n    const eventHash = utility.hashString(functionKey).toString();\n\n    if (!Object.keys(delegatedEventListeners).includes(eventHash)) {\n        const wrappedCallback = event => {\n            // Get the nearest DOMNode that matches the given selector.\n            const match = filterSelector ? event.target.closest(filterSelector) : event.target;\n\n            if (match) {\n                // Call the callback with the matching element as the context.\n                return callback.call(match, event, match);\n            }\n        };\n\n        const listener = scope.addEventListener(eventName, wrappedCallback);\n        delegatedEventListeners[eventHash] = {\n            scope,\n            eventName,\n            wrappedCallback,\n        };\n        return eventHash;\n    }\n}\n\n/**\n * Remove a delegated event listener.\n *\n * @param eventHash - The event hash passed from delegateEvent().\n */\nexport function removeDelegatedEvent(eventHash: string) {\n    const { scope, eventName, wrappedCallback } = delegatedEventListeners[eventHash];\n    scope.removeEventListener(eventName, wrappedCallback);\n    delete delegatedEventListeners[eventHash];\n}\n\nexport function removeAllDelegatedEvents() {\n    Object.keys(delegatedEventListeners).forEach(key => {\n        removeDelegatedEvent(key);\n    });\n}\n\n/**\n * Toggle any attribute on an element.\n *\n * @param element - The element to toggle on.\n * @param attribute - The attribute to toggle.\n */\nexport function toggleAttribute(element: Element, attribute: string) {\n    const newValue = element.getAttribute(attribute) === \"false\";\n    element.setAttribute(attribute, newValue);\n}\n\nconst dataMap = new WeakMap();\n\n/**\n * Set a piece of data specific to a DOM Element. Similar to `$.data`.\n *\n * @param element - The DOM Element to assosciate the data with.\n * @param key - The key to assosciate the data with.\n * @param value - The value to store.\n */\nexport function setData(element: Element, key: string, value: any) {\n    const initialValue = dataMap.has(element) ? dataMap.get(element) : {};\n    initialValue[key] = value;\n\n    dataMap.set(element, initialValue);\n}\n\n/**\n * Get a piece of data specific to a DOM Element. Similar to `$.data`.\n *\n * @param element - The DOM Element to lookup.\n * @param key - The key to lookup.\n * @param defaultValue - A value to use if the element or key aren't found.\n */\nexport function getData(element: Element, key: string, defaultValue?: any) {\n    if (dataMap.has(element) && dataMap.get(element)[key]) {\n        return dataMap.get(element)[key];\n    }\n\n    const attributeString = `data-${key}`;\n\n    if (element.hasAttribute(attributeString)) {\n        return element.getAttribute(attributeString);\n    }\n\n    return defaultValue;\n}\n\n/**\n * Get an HTML element from a CSS selector or DOM Node.\n *\n * @param {string|Node} selectorOrElement - A CSS selector or an HTML element.\n *\n * @throws {Error} - If no element was found.\n * @returns {HTMLElement} - An HTMLElement no matter what.\n */\nexport function ensureHtmlElement(selectorOrElement) {\n    if (typeof selectorOrElement === \"string\") {\n        selectorOrElement = document.querySelector(selectorOrElement);\n    }\n\n    if (!(selectorOrElement instanceof HTMLElement)) {\n        throw new Error(`HTMLElement could not be found for ${selectorOrElement}.`);\n    }\n\n    return selectorOrElement;\n}\n\n// Test Char for Emoji 5.0\nconst testChar = \"\\uD83E\\uDD96\"; // U+1F996 T-Rex -> update test character with new emoji version support.\n\nlet emojiSupportedCache: boolean | null = null;\n\nexport function isEmojiSupported() {\n    if (emojiSupportedCache !== null) {\n        return emojiSupportedCache;\n    }\n\n    if (process.env.NODE_ENV !== \"test\") {\n        // Test environment\n        const canvas = document.createElement(\"canvas\");\n        if (canvas.getContext && canvas.getContext(\"2d\")) {\n            const pixelRatio = window.devicePixelRatio || 1;\n            const offset = 12 * pixelRatio;\n            const ctx = canvas.getContext(\"2d\");\n            ctx!.fillStyle = \"#f00\";\n            ctx!.textBaseline = \"top\";\n            ctx!.font = \"32px Arial\";\n            ctx!.fillText(testChar, 0, 0);\n            emojiSupportedCache = ctx!.getImageData(offset, offset, 1, 1).data[0] !== 0;\n        } else {\n            emojiSupportedCache = false;\n        }\n    } else {\n        emojiSupportedCache = true;\n    }\n\n    return emojiSupportedCache;\n}\n\nconst emojiOptions = {\n    className: \"fallBackEmoji\",\n    size: \"72x72\",\n};\n\n/**\n * Returns either native emoji or fallback image\n *\n * @param stringOrNode - A DOM Node or string to convert.\n */\nexport function convertToSafeEmojiCharacters(stringOrNode: string | Node) {\n    if (isEmojiSupported()) {\n        return stringOrNode;\n    }\n    return twemoji.parse(stringOrNode, emojiOptions);\n}\n\n// A weakmap so we can store multiple load callbacks per script.\nconst loadEventCallbacks: WeakMap<Node, Array<(event) => void>> = new WeakMap();\nconst rejectionCache: Map<string, Error> = new Map();\n\n/**\n * Dynamically load a javascript file.\n */\nexport function ensureScript(scriptUrl: string) {\n    return new Promise((resolve, reject) => {\n        const existingScript: HTMLScriptElement | null = document.querySelector(`script[src='${scriptUrl}']`);\n        if (rejectionCache.has(scriptUrl)) {\n            reject(rejectionCache.get(scriptUrl));\n        }\n        if (existingScript) {\n            if (loadEventCallbacks.has(existingScript)) {\n                // Add another resolveCallback into the weakmap.\n                const callbacks = loadEventCallbacks.get(existingScript);\n                callbacks && callbacks.push(resolve);\n            } else {\n                // Script is already loaded. Resolve immediately.\n                resolve();\n            }\n        } else {\n            // The script doesn't exist. Lets create it.\n            const head = document.getElementsByTagName(\"head\")[0];\n            const script = document.createElement(\"script\");\n            script.type = \"text/javascript\";\n            script.src = scriptUrl;\n            script.onerror = (event: ErrorEvent) => {\n                const error = new Error(\"Failed to load a required embed script\");\n                rejectionCache.set(scriptUrl, error);\n                reject(error);\n            };\n\n            const timeout = setTimeout(() => {\n                const error = new Error(`Loading of the script ${scriptUrl} has timed out.`);\n                rejectionCache.set(scriptUrl, error);\n                reject(error);\n            }, 10000);\n\n            loadEventCallbacks.set(script, [resolve]);\n\n            script.onload = event => {\n                clearTimeout(timeout);\n                const callbacks = loadEventCallbacks.get(script);\n                callbacks && callbacks.forEach(callback => callback(event));\n                loadEventCallbacks.delete(script);\n            };\n\n            head.appendChild(script);\n        }\n    });\n}\n\ninterface ITabbableOptions {\n    root: Element;\n    excludedElements: Element[];\n    excludedRoots: Element[];\n    reverse: boolean;\n    fromElement: Element;\n    allowLooping: boolean;\n}\n\n/**\n * Get the next tabbable item within a given tabindex.\n *\n * WARNING: Performance can be poor if you pass many excluded roots and do not\n * sufficiently narrow the tree your are looking in.\n *\n * @param options\n * @property root - The root element to look in.\n * @property excludedElements - Elements to ignore.\n * @property excludedRoots - These element's children will be ignored.\n * @property reverse - True to get the previous element instead.\n * @property fromElement - The currently focused element.\n * @property allowLooping - Whether or not the focus should loop around from beginning <-> end.\n */\nexport function getNextTabbableElement(options?: Partial<ITabbableOptions>): HTMLElement | null {\n    const defaultTabbableOptions: ITabbableOptions = {\n        root: document.documentElement,\n        excludedElements: [],\n        excludedRoots: [],\n        reverse: false,\n        fromElement: document.activeElement,\n        allowLooping: true,\n    };\n\n    // Merge the passed options and the defaults.\n    const finalOptions = {\n        ...defaultTabbableOptions,\n        ...options,\n    } as ITabbableOptions;\n\n    if (!(finalOptions.fromElement instanceof HTMLElement)) {\n        logError(\"Unable to tab to next element, `fromElement` given is not valid: \", finalOptions.fromElement);\n        return null;\n    }\n\n    const tabbables = tabbable(finalOptions.root).filter((tabbableElement: Element) => {\n        // We want to excempt items that are the active item or a parent of the active item\n        // because otherwise we would not be able to tab away from them.\n        const elementIsActiveOrChildOfActive =\n            finalOptions.fromElement === tabbableElement || tabbableElement.contains(finalOptions.fromElement);\n\n        if (!elementIsActiveOrChildOfActive) {\n            if (finalOptions.excludedElements.includes(tabbableElement)) {\n                return false;\n            }\n            for (const excludedRoot of finalOptions.excludedRoots) {\n                if (excludedRoot !== tabbableElement && excludedRoot.contains(tabbableElement)) {\n                    return false;\n                }\n            }\n        }\n\n        return true;\n    });\n\n    const currentTabIndex = tabbables.indexOf(finalOptions.fromElement);\n\n    if (currentTabIndex < 0) {\n        return null;\n    }\n\n    let targetIndex = finalOptions.reverse ? currentTabIndex - 1 : currentTabIndex + 1;\n\n    if (finalOptions.allowLooping) {\n        // Loop over the beginning and ends\n        if (targetIndex < 0) {\n            targetIndex = tabbables.length - 1;\n        } else if (targetIndex >= tabbables.length) {\n            targetIndex = 0;\n        }\n    }\n\n    return tabbables[targetIndex] || null;\n}\n\nfunction checkDomTreeWasClicked(rootNode: Element | null, clickedElement: Element) {\n    return rootNode && clickedElement && (rootNode.contains(clickedElement as Element) || rootNode === clickedElement);\n}\n\n/**\n * Determine if the currently focused element is somewhere inside of (or the same as)\n * a given Element.\n *\n * @param rootNode - The root node to look in.\n */\nfunction checkDomTreeHasFocus(rootNode: Element | null, event: FocusEvent, callback: (hasFocus: boolean) => void) {\n    setTimeout(() => {\n        const possibleTargets = [\n            // NEEDS TO COME FIRST, because safari will populate relatedTarget on focusin, and its not what we're looking for.\n            document.activeElement, // IE11, Safari.\n            event.relatedTarget as Element, // Chrome (The actual standard)\n            (event as any).explicitOriginalTarget, // Firefox\n        ];\n\n        let activeElement = null;\n        for (const target of possibleTargets) {\n            if (target && target !== document.body) {\n                activeElement = target;\n                break;\n            }\n        }\n\n        if (activeElement !== null) {\n            const hasFocus =\n                rootNode && activeElement && (activeElement === rootNode || rootNode.contains(activeElement));\n\n            // We will only invalidate based on something actually getting focus.\n            callback(!!hasFocus);\n        }\n    }, 0);\n}\n\n/**\n * Register a callback for focusin and focusin out events. The main improvement here over registering\n * the listeners yourself is that the events fire for the whole tree as 1 item instead of as\n * individual notes.\n *\n * This is particularly useful when you want to track focus leaving or enterring a component\n * without caring about the individual contents inside.\n *\n * @param rootNode - The root dom node to watch on.\n * @param callback - A callback for when the tree focuses and blurs.\n */\nexport function watchFocusInDomTree(rootNode: Element, callback: (hasFocus: boolean) => void) {\n    rootNode.addEventListener(\n        \"focusout\",\n        (event: FocusEvent) => {\n            checkDomTreeHasFocus(rootNode, event, hasFocus => {\n                !hasFocus && callback(false);\n            });\n        },\n        true,\n    );\n\n    rootNode.addEventListener(\n        \"focusin\",\n        (event: FocusEvent) => {\n            checkDomTreeHasFocus(rootNode, event, hasFocus => {\n                hasFocus && callback(true);\n            });\n        },\n        true,\n    );\n\n    document.addEventListener(\"click\", event => {\n        const triggeringElement = event.target as Element;\n        const wasClicked = checkDomTreeWasClicked(rootNode, triggeringElement);\n        if (!wasClicked) {\n            callback(false);\n        }\n    });\n}\n\n/**\n * Sticky header handling\n */\nfunction handleStickyHeaderState(element, data) {\n    const goingDown = data.lastScrollPos < data.currentScrollPos;\n    const isAtTopOfPage = data.currentScrollPos === 0;\n    const elementHeight = element.offsetHeight;\n    const isPastHeader =\n        element.style.position !== \"fixed\" && element.offsetTop + elementHeight <= data.currentScrollPos;\n    const elementTop = element.style.top !== \"\" ? parseInt(element.style.top, 10) : false;\n\n    element.classList.toggle(\"isScrollingDown\", goingDown);\n    element.classList.toggle(\"isScrollingUp\", !goingDown);\n    element.classList.toggle(\"isAtTop\", isAtTopOfPage);\n\n    if (goingDown) {\n        element.style.position = \"\";\n        if (isPastHeader) {\n            element.style.top = `${data.currentScrollPos - elementHeight}px`;\n        } else {\n            if (!elementTop) {\n                element.style.top = `${data.currentScrollPos}px`;\n            }\n        }\n    } else {\n        // going UP\n        if (data.currentScrollPos <= elementTop) {\n            element.style.top = \"\";\n            element.style.position = \"fixed\";\n        }\n    }\n}\n\n/**\n * Vanilla's default way to handle sticky headers\n */\nexport function stickyHeader() {\n    const header = document.querySelector(\".stickyHeader\");\n    if (header !== null) {\n        let currentScrollPos = Math.max(window.scrollY, 0);\n        let lastScrollPos = -1;\n\n        handleStickyHeaderState(header, {\n            currentScrollPos,\n            lastScrollPos,\n        });\n\n        window.addEventListener(\"scroll\", e => {\n            debounce(\n                () => {\n                    window.requestAnimationFrame(data => {\n                        lastScrollPos = currentScrollPos;\n                        currentScrollPos = Math.max(window.scrollY, 0);\n                        handleStickyHeaderState(header, {\n                            currentScrollPos,\n                            lastScrollPos,\n                        });\n                    });\n                },\n                100,\n                {\n                    leading: true,\n                },\n            )();\n        });\n    } else {\n        utility.log(\"No sticky header found\");\n    }\n}\n\n/**\n * Handler for an file being dragged and dropped.\n *\n * @param event - https://developer.mozilla.org/en-US/docs/Web/API/DragEvent\n */\nexport function getDraggedImage(event: DragEvent): File | undefined {\n    if (event.dataTransfer && event.dataTransfer.files && event.dataTransfer.files.length) {\n        event.preventDefault();\n        const files = Array.from(event.dataTransfer.files);\n\n        // Currently only 1 file is supported.\n        const mainFile = files[0];\n        return mainFile;\n    }\n}\n\n/**\n * Handler for an file being pasted.\n *\n * @param event - https://developer.mozilla.org/en-US/docs/Web/API/DragEvent\n */\nexport function getPastedImage(event: ClipboardEvent): File | undefined | null {\n    if (event.clipboardData && event.clipboardData.items && event.clipboardData.items.length) {\n        const files = Array.from(event.clipboardData.items)\n            .map((item: any) => (item.getAsFile ? item.getAsFile() : null))\n            .filter(Boolean);\n\n        if (files.length > 0) {\n            event.preventDefault();\n            // Currently only 1 file is supported.\n            const mainFile = files[0];\n            return mainFile;\n        }\n    }\n}\n\n/**\n * Calculate the height of element with simulated margin collapse.\n *\n * This is ideal for getting the calculate height of a fixed number of items. (not the entire parent).\n *\n * It considers:\n * - Element height\n * - Padding\n * - Borders\n * - Margins\n * - Margin collapsing.\n *\n * @param element - The element to measure\n * @param previousBottomMargin - The bottom margin of the previous element. You can use the returned bottom margin from this function to get this.\n */\nexport function getElementHeight(\n    element: Element,\n    previousBottomMargin: number = 0,\n): {\n    height: number;\n    bottomMargin: number;\n} {\n    const height = element.getBoundingClientRect().height;\n    const { marginTop, marginBottom } = window.getComputedStyle(element);\n\n    let topHeight = marginTop ? parseInt(marginTop, 10) : 0;\n    // Simulate a margin-collapsed height.\n    topHeight = Math.max(topHeight - previousBottomMargin, 0);\n\n    const bottomHeight = marginBottom ? parseInt(marginBottom, 10) : 0;\n    const finalHeight = height + topHeight + bottomHeight;\n\n    return {\n        height: finalHeight,\n        bottomMargin: bottomHeight,\n    };\n}\n","/**\n * Entrypoint for the APIv2 calls. Prepulates an axios instance with some config settings.\n *\n * @copyright 2009-2018 Vanilla Forums Inc.\n * @license https://opensource.org/licenses/GPL-2.0 GPL-2.0\n */\n\nimport { formatUrl, t } from \"@dashboard/application\";\nimport { isFileImage, indexArrayByKey } from \"@dashboard/utility\";\nimport axios from \"axios\";\nimport qs from \"qs\";\nimport { IEmbedData } from \"@dashboard/embeds\";\nimport { IFieldError, LoadStatus, ILoadable } from \"@dashboard/@types/api\";\n\nfunction fieldErrorTransformer(responseData) {\n    if (responseData.status >= 400 && responseData.errors && responseData.errors.length > 0) {\n        responseData.errors = indexArrayByKey(responseData.errors, \"field\");\n    }\n\n    return responseData;\n}\n\nconst api = axios.create({\n    baseURL: formatUrl(\"/api/v2/\"),\n    headers: {\n        common: {\n            \"X-Requested-With\": \"vanilla\",\n        },\n    },\n    transformResponse: [...axios.defaults.transformResponse, fieldErrorTransformer],\n    paramsSerializer: params => qs.stringify(params, { indices: false }),\n});\n\nexport default api;\n\n/**\n * Upload an image using Vanilla's API v2.\n *\n * @param file - The file to upload.\n *\n * @throws If the file given is not an image. You must check yourself first.\n */\nexport async function uploadImage(image: File): Promise<IEmbedData> {\n    if (!isFileImage(image)) {\n        throw new Error(\n            `Unable to upload an image of type ${image.type}. Supported formats included .gif, .jpg and .png`,\n        );\n    }\n\n    const data = new FormData();\n    data.append(\"file\", image, image.name);\n    data.append(\"type\", \"image\");\n\n    const result = await api.post(\"/media\", data);\n    result.data.type = \"image\";\n    return result.data;\n}\n\n/**\n * Extract a field specific error from an ILoadable if applicable.\n *\n * @param loadable - The loadable to extract from.\n * @param field - The field to extract.\n *\n * @returns an array of IFieldErrors if found or undefined.\n */\nexport function getFieldErrors(loadable: ILoadable<any>, field: string): IFieldError[] | undefined {\n    if (loadable.status === LoadStatus.ERROR || loadable.status === LoadStatus.LOADING) {\n        if (loadable.error && loadable.error.errors && loadable.error.errors[field]) {\n            return loadable.error.errors[field];\n        }\n    }\n}\n\n/**\n * Extract a global error message out of an ILoadable if applicable.\n *\n * @param loadable - The loadable to extract from.\n * @param validFields - Field to check for overriding fields errors from. A global error only shows if there are no valid field errors.\n *\n * @returns A global error message or an undefined.\n */\nexport function getGlobalErrorMessage(loadable: ILoadable<any>, validFields: string[]): string | undefined {\n    if (loadable.status === LoadStatus.ERROR || loadable.status === LoadStatus.LOADING) {\n        for (const field of validFields) {\n            if (getFieldErrors(loadable, field)) {\n                return;\n            }\n        }\n\n        if (loadable.error) {\n            return loadable.error.message || t(\"An error has occurred, please try again.\");\n        }\n    }\n}\n","/**\n * State utility functions.\n *\n * @copyright 2009-2018 Vanilla Forums Inc.\n * @license https://opensource.org/licenses/GPL-2.0 GPL-2.0\n */\n\nimport { IApiResponse, IApiError } from \"@dashboard/@types/api\";\nimport apiv2 from \"@dashboard/apiv2\";\nimport { AxiosResponse, AxiosError } from \"axios\";\n\n// Utility to pull a group of action types out of an actions object\nexport type ActionsUnion<A extends IActionCreatorsMapObject> = ReturnType<A[keyof A]>;\n\n// Utility to create a generic action action.\n\n/**\n * Utility to create an action with our a without a payload of a given type.\n * The action generated can have its type narrowed in a reducer switch statement if the type T matches.\n *\n * @see ActionsUnion\n *\n * @param type The action type.\n * @param payload The payload data.\n */\nexport function createAction<ActionType extends string>(type: ActionType): IAction<ActionType>;\nexport function createAction<ActionType extends string, Payload>(\n    type: ActionType,\n    payload: Payload,\n): IActionWithPayload<ActionType, Payload>;\nexport function createAction<ActionType extends string, Payload>(type: ActionType, payload?: Payload) {\n    return payload === undefined ? { type } : { type, payload };\n}\n\n/**\n * Create request, response, and error action creators.\n *\n * The dummy types are needed because typescript currently requires all generic types to be specified or all to be inferred. They cannot currently be mixed.\n *\n * @see https://github.com/Microsoft/TypeScript/issues/10571#issuecomment-345402872\n *\n * @param requestType The string for the request type. This should be a unique constant.\n * @param successType The string for the success type. This should be a unique constant.\n * @param errorType The string for the error type. This should be a unique constant.\n * @param dummyResponseType A placeholder to infer the type of the response. This isn't used for anything other than inferring a type.\n * @param dummyMetaType A placeholder to infer the type of the meta. This isn't used for anything other than inferringa  type.\n *\n * @example\n *\n * ```\n * const GET_THING_REQUEST = \"GET_THING_REQUEST\";\n * const GET_THING_SUCCESS = \"GET_THING_SUCCESS\";\n * const GET_THING_ERROR = \"GET_THING_ERROR\";\n * interface IThing { thing: string }\n * interface IThingOptions { page?: number }\n *\n * generateApiActionCreators(GET_THING_REQUEST, GET_THING_SUCCESS, GET_THING_ERROR, {} as IThing, {} as IThingOptions);\n * ```\n */\nexport function generateApiActionCreators<\n    RequestActionType extends string,\n    SuccessActionType extends string,\n    ErrorActionType extends string,\n    ResponseDataType,\n    Meta = any\n>(\n    requestType: RequestActionType,\n    successType: SuccessActionType,\n    errorType: ErrorActionType,\n    dummyResponseType?: ResponseDataType,\n    dummyMetaType?: Meta,\n): {\n    request: (meta?: Meta) => IApiAction<RequestActionType, Meta>;\n    success: (\n        payload: IApiResponse<ResponseDataType>,\n        meta?: Meta,\n    ) => IApiSuccessAction<SuccessActionType, Meta, ResponseDataType>;\n    error: (error: IApiError, meta?: Meta) => IApiErrorAction<ErrorActionType, Meta>;\n} {\n    return {\n        request: (meta: Meta) => createApiRequestAction(requestType, meta),\n        success: (response: IApiResponse<ResponseDataType>, meta: Meta) =>\n            createApiSuccessAction(successType, meta, response),\n        error: (error: IApiError, meta: Meta) => createApiErrorAction(errorType, meta, error),\n    };\n}\n\ntype GeneratedActionCreators = ReturnType<typeof generateApiActionCreators>;\n\n// Thunk types\ntype RequestType = \"get\" | \"post\" | \"put\" | \"delete\" | \"patch\";\nexport function apiThunk(\n    requestType: RequestType,\n    endpoint: string,\n    actionCreators: GeneratedActionCreators,\n    params: any,\n) {\n    return dispatch => {\n        dispatch(actionCreators.request(params));\n        apiv2[requestType as any](endpoint, params)\n            .then((response: AxiosResponse) => {\n                dispatch(actionCreators.success(response, params));\n            })\n            .catch((axiosError: AxiosError) => {\n                const error = axiosError.response ? axiosError.response.data : (axiosError as any);\n                dispatch(actionCreators.error(error));\n            });\n    };\n}\n\n// Action interfaces\nexport interface IAction<T extends string> {\n    type: T;\n}\n\nexport interface IActionWithPayload<T extends string, P> extends IAction<T> {\n    payload: P;\n}\n\nexport interface IActionCreator<T extends string> {\n    (): IAction<T>;\n}\n\ntype FunctionType = (...args: any[]) => any;\ninterface IActionCreatorsMapObject {\n    [actionCreator: string]: FunctionType;\n}\n\n// API Action interfaces\ninterface IApiAction<ActionType, Meta> {\n    type: ActionType;\n    meta: Meta;\n}\n\ninterface IApiErrorAction<ActionType, Meta> extends IApiAction<ActionType, Meta> {\n    payload: IApiError;\n}\n\ninterface IApiSuccessAction<ActionType, Meta, ResponseDataType> extends IApiAction<ActionType, Meta> {\n    payload: IApiResponse<ResponseDataType>;\n}\n\n/**\n * Create an API request action. For use in createApiActions().\n *\n * @param type The action's type.\n * @param meta The type of the meta for the action.\n */\nfunction createApiRequestAction<ActionType extends string, Meta>(\n    type: ActionType,\n    meta: Meta,\n): IApiAction<ActionType, Meta> {\n    return {\n        type,\n        meta,\n    };\n}\n\n/**\n * Create an API error action. For use in createApiActions().\n *\n * @param type The action's type.\n * @param meta The type of the meta for the action.\n * @param error An API error.\n */\nfunction createApiErrorAction<ActionType extends string, Meta>(\n    type: ActionType,\n    meta: Meta,\n    error: IApiError,\n): IApiErrorAction<ActionType, Meta> {\n    return {\n        type,\n        meta,\n        payload: error,\n    };\n}\n\n/**\n * Create an API success action. For use in createApiActions().\n *\n * @param type The action's type.\n * @param meta The type of the meta for the action.\n * @param payload The shape of the IApiResponse data.\n */\nfunction createApiSuccessAction<ActionType extends string, Meta, ResponseDataType>(\n    type: ActionType,\n    meta: Meta,\n    payload: IApiResponse<ResponseDataType>,\n): IApiSuccessAction<ActionType, Meta, ResponseDataType> {\n    return {\n        type,\n        meta,\n        payload,\n    };\n}\n","/**\n * Utilities and types for handling unique and/or required HTML ids in react components.\n *\n * @copyright 2009-2018 Vanilla Forums Inc.\n * @license https://opensource.org/licenses/GPL-2.0 GPL-2.0\n */\n\nimport uniqueId from \"lodash/uniqueId\";\n\n// Optional ID\nexport interface IOptionalComponentID {\n    id?: string | boolean;\n}\n\n// Requires ID\nexport interface IRequiredComponentID {\n    id: string;\n}\n\nexport function uniqueIDFromPrefix(suffix: string) {\n    return (suffix + uniqueId()) as string;\n}\n\nexport function getRequiredID(props: IRequiredComponentID, suffix: string): string {\n    if (props.id) {\n        return props.id;\n    } else {\n        return uniqueIDFromPrefix(suffix);\n    }\n}\n\nexport function getOptionalID(props: IOptionalComponentID, suffix?: string): string | null {\n    if (props.id) {\n        // we want an ID\n        if (typeof props.id === \"string\") {\n            // Handled by parent component\n            return props.id;\n        } else if (typeof props.id === \"boolean\" && suffix) {\n            return uniqueIDFromPrefix(suffix);\n        }\n        throw new Error(\"To generate and ID, you must provide a suffix.\");\n    } else {\n        return null;\n    }\n}\n","/**\n * @copyright 2009-2018 Vanilla Forums Inc.\n * @license https://opensource.org/licenses/GPL-2.0 GPL-2.0\n */\n\nimport React from \"react\";\nimport classNames from \"classnames\";\nimport { getOptionalID, IOptionalComponentID } from \"@dashboard/componentIDs\";\n\ninterface IProps extends IOptionalComponentID {\n    className?: string;\n    isError?: boolean;\n    content?: string | Node | null;\n}\n\nexport default class Paragraph extends React.Component<IProps> {\n    public static defaultProps = {\n        id: false,\n    };\n\n    public id: string;\n\n    constructor(props) {\n        super(props);\n        this.id = getOptionalID(props, \"Paragraph\") as string;\n    }\n\n    public render() {\n        if (this.props.content) {\n            const componentClasses = classNames({ isError: this.props.isError }, this.props.className);\n\n            let accessibilityProps = {};\n\n            if (this.props.isError) {\n                accessibilityProps = {\n                    \"aria-live\": \"assertive\",\n                    role: \"alert\",\n                };\n            }\n\n            return (\n                <p id={this.id} className={componentClasses} {...accessibilityProps}>\n                    {this.props.content}\n                </p>\n            );\n        } else {\n            return null;\n        }\n    }\n}\n","/**\n * @copyright 2009-2018 Vanilla Forums Inc.\n * @license https://opensource.org/licenses/GPL-2.0 GPL-2.0\n */\n\nimport React from \"react\";\nimport { getMeta } from \"@dashboard/application\";\n\n/**\n * A component for displaying and setting the document title.\n *\n * This component can render a default title or a custom title depending on the usage.\n *\n * @example <caption>Render the title in the default h1</caption>\n * <DocumentTitle title=\"Page Title\" />\n *\n * @example <caption>Render a custom title</caption>\n * <DocumentTitle title=\"Title Bar Title >\n *     <h1>Page Title</h1>\n * </DocumentTitle>\n */\nexport default class DocumentTitle extends React.Component<IProps> {\n    public componentDidMount() {\n        document.title = this.getHeadTitle(this.props);\n    }\n\n    public componentWillUpdate(nextProps: IProps) {\n        document.title = this.getHeadTitle(nextProps);\n    }\n\n    public render() {\n        if (this.props.children) {\n            return this.props.children;\n        } else {\n            return <h1>{this.props.title}</h1>;\n        }\n    }\n\n    /**\n     * Calculate the status bar title from the props.\n     *\n     * @param props - The props used to calculate the title.\n     * @returns Returns the title as a string.\n     */\n    private getHeadTitle(props: IProps): string {\n        const siteTitle: string = getMeta(\"ui.siteName\", \"\");\n        const parts: string[] = [];\n\n        if (props.title && props.title.length > 0) {\n            parts.push(props.title);\n        }\n        if (siteTitle.length > 0 && siteTitle !== props.title) {\n            parts.push(siteTitle);\n        }\n\n        return parts.join(\" - \");\n    }\n}\n\ninterface IProps {\n    title: string;\n    children?: React.ReactNode;\n}\n","/**\n * A module to isolate meta data passed from the server into a single dependency.\n * This should always be used instead of accessing window.gdn directly.\n *\n * @copyright 2009-2018 Vanilla Forums Inc.\n * @license https://opensource.org/licenses/GPL-2.0 GPL-2.0\n */\n\ninterface IGdn {\n    meta: AnyObject;\n    permissions: AnyObject;\n    translations: AnyObject;\n    [key: string]: any;\n}\n\n/** The gdn object may be set in an inline script in the head of the document. */\nconst gdn = window.gdn || {};\n\nif (!(\"meta\" in gdn)) {\n    gdn.meta = {};\n}\n\nif (!(\"permissions\" in gdn)) {\n    gdn.permissions = {};\n}\n\nif (!(\"translations\" in gdn)) {\n    gdn.translations = {};\n}\n\nexport default gdn as IGdn;\n","/**\n * @copyright 2009-2018 Vanilla Forums Inc.\n * @license http://www.opensource.org/licenses/gpl-2.0.php GNU GPL v2\n */\n\nimport { generateApiActionCreators, ActionsUnion, apiThunk, createAction } from \"@dashboard/state/utility\";\nimport { IRequestPasswordOptions } from \"@dashboard/@types/api\";\n\n// Authenticating user /authenticate/password\nexport const POST_REQUEST_PASSWORD_REQUEST = \"POST_REQUEST_PASSWORD_REQUEST\";\nexport const POST_REQUEST_PASSWORD_ERROR = \"POST_REQUEST_PASSWORD_ERROR\";\nexport const POST_REQUEST_PASSWORD_SUCCESS = \"POST_REQUEST_PASSWORD_SUCCESS\";\nexport const AFTER_REQUEST_PASSWORD_SUCCESS_NAVIGATE = \"AFTER_REQUEST_PASSWORD_SUCCESS_NAVIGATE\";\n\nexport const afterRequestPasswordSuccessNavigate = () => createAction(AFTER_REQUEST_PASSWORD_SUCCESS_NAVIGATE);\n\nconst otherActions = {\n    afterRequestPasswordSuccessNavigate,\n};\n\nconst requestPasswordActions = generateApiActionCreators(\n    POST_REQUEST_PASSWORD_REQUEST,\n    POST_REQUEST_PASSWORD_SUCCESS,\n    POST_REQUEST_PASSWORD_ERROR,\n    // https://github.com/Microsoft/TypeScript/issues/10571#issuecomment-345402872\n    {},\n    {} as IRequestPasswordOptions,\n);\n\nexport type ActionTypes = ActionsUnion<typeof requestPasswordActions> | ActionsUnion<typeof otherActions>;\n\nexport const postRequestPassword = (params: IRequestPasswordOptions) =>\n    apiThunk(\"post\", \"users/request-password\", requestPasswordActions, params);\n","/**\n * A reducer registry so that we can have dynamically loading reducers.\n *\n * @see http://nicolasgallagher.com/redux-modules-and-code-splitting/\n *\n * @copyright 2009-2018 Vanilla Forums Inc.\n * @license http://www.opensource.org/licenses/gpl-2.0.php GNU GPL v2\n */\n\nimport { logError } from \"@dashboard/utility\";\nimport { Reducer, ReducersMapObject } from \"redux\";\nimport { onReady } from \"@dashboard/application\";\n\nlet haveGot = false;\nlet wasReadyCalled = false;\nconst reducers = {};\n\nonReady(() => {\n    wasReadyCalled = true;\n});\n\nexport function registerReducer(name: string, reducer: Reducer) {\n    if (haveGot) {\n        logError(\"Cannot register reducer %s after reducers applied to the store.\", name);\n    } else {\n        reducers[name] = reducer;\n    }\n}\n\nexport function getReducers(): ReducersMapObject<any, any> {\n    haveGot = true;\n\n    if (!wasReadyCalled) {\n        logError(\"getReducers() was called before onReady\");\n    }\n\n    return {\n        ...reducers,\n    };\n}\n\n/**\n * @deprecated\n */\nconst reducerRegistry = {\n    register: registerReducer,\n    getReducers,\n};\n\nexport default reducerRegistry;\n","/**\n * @copyright 2009-2018 Vanilla Forums Inc.\n * @license http://www.opensource.org/licenses/gpl-2.0.php GNU GPL v2\n */\n\nimport { generateApiActionCreators, ActionsUnion, apiThunk } from \"@dashboard/state/utility\";\nimport { IAuthenticatePasswordResponseData, IAuthenticatePasswordParams } from \"@dashboard/@types/api\";\nimport apiv2 from \"@dashboard/apiv2\";\nimport { AxiosResponse, AxiosError } from \"axios\";\nimport { formatUrl } from \"@dashboard/application\";\n\n// Authenticating user /authenticate/password\nexport const POST_AUTHENTICATE_PASSWORD_REQUEST = \"POST_AUTHENTICATE_PASSWORD_REQUEST\";\nexport const POST_AUTHENTICATE_PASSWORD_ERROR = \"POST_AUTHENTICATE_PASSWORD_ERROR\";\nexport const POST_AUTHENTICATE_PASSWORD_SUCCESS = \"POST_AUTHENTICATE_PASSWORD_SUCCESS\";\n\nconst authenticatePasswordActions = generateApiActionCreators(\n    POST_AUTHENTICATE_PASSWORD_REQUEST,\n    POST_AUTHENTICATE_PASSWORD_SUCCESS,\n    POST_AUTHENTICATE_PASSWORD_ERROR,\n    // https://github.com/Microsoft/TypeScript/issues/10571#issuecomment-345402872\n    {} as IAuthenticatePasswordResponseData,\n    {} as IAuthenticatePasswordParams,\n);\n\nexport const postAuthenticatePassword = (params: IAuthenticatePasswordParams) => dispatch => {\n    dispatch(authenticatePasswordActions.request(params));\n    apiv2\n        .post(\"/authenticate/password\", params)\n        .then((response: AxiosResponse) => {\n            dispatch(authenticatePasswordActions.success(response, params));\n            const urlParms = new URLSearchParams();\n            window.location.href = formatUrl(urlParms.get(\"target\") || \"/\");\n        })\n        .catch((axiosError: AxiosError) => {\n            const error = axiosError.response ? axiosError.response.data : (axiosError as any);\n            dispatch(authenticatePasswordActions.error(error));\n        });\n};\n\nexport type ActionTypes = ActionsUnion<typeof authenticatePasswordActions>;\n","/**\n * @copyright 2009-2018 Vanilla Forums Inc.\n * @license https://opensource.org/licenses/GPL-2.0 GPL-2.0\n */\n\nimport React from \"react\";\nimport classNames from \"classnames\";\nimport ErrorMessages from \"./ErrorMessages\";\nimport Paragraph from \"./Paragraph\";\nimport { getRequiredID, IOptionalComponentID } from \"@dashboard/componentIDs\";\nimport { IFieldError } from \"@dashboard/@types/api\";\n\nexport interface IInputTextProps extends IOptionalComponentID {\n    className?: string;\n    label: string;\n    value: string;\n    onChange: (event: React.ChangeEvent<HTMLInputElement>) => void;\n    labelNote?: string;\n    inputClassNames?: string;\n    type?: string;\n    labelID?: string;\n    defaultValue?: string;\n    placeholder?: string;\n    valid?: boolean;\n    descriptionID?: string;\n    required?: boolean;\n    errors?: IFieldError[];\n    disabled?: boolean;\n}\n\ninterface IState {\n    id: string;\n}\n\nexport default class InputTextBlock extends React.Component<IInputTextProps, IState> {\n    public static defaultProps = {\n        disabled: false,\n        type: \"text\",\n        errors: [],\n    };\n\n    private inputRef: React.RefObject<HTMLInputElement> = React.createRef();\n\n    public constructor(props) {\n        super(props);\n        this.state = {\n            id: getRequiredID(props, \"inputText\") as string,\n        };\n    }\n\n    public render() {\n        const componentClasses = classNames(\"inputBlock\", this.props.className);\n        const inputClasses = classNames(\"inputBlock-inputText\", \"InputBox\", \"inputText\", this.props.inputClassNames);\n        const hasErrors = !!this.props.errors && this.props.errors.length > 0;\n\n        let describedBy;\n        if (hasErrors) {\n            describedBy = this.errorID;\n        }\n\n        return (\n            <label className={componentClasses}>\n                <span id={this.labelID} className=\"inputBlock-labelAndDescription\">\n                    <span className=\"inputBlock-labelText\">{this.props.label}</span>\n                    <Paragraph id={false} className=\"inputBlock-labelNote\" content={this.props.labelNote} />\n                </span>\n\n                <span className=\"inputBlock-inputWrap\">\n                    <input\n                        id={this.state.id}\n                        className={inputClasses}\n                        defaultValue={this.props.defaultValue}\n                        value={this.props.value}\n                        type={this.props.type}\n                        disabled={this.props.disabled}\n                        required={this.props.required}\n                        placeholder={this.props.placeholder}\n                        aria-invalid={hasErrors}\n                        aria-describedby={describedBy}\n                        aria-labelledby={this.labelID}\n                        onChange={this.onChange}\n                        ref={this.inputRef}\n                    />\n                </span>\n                <ErrorMessages id={this.errorID} errors={this.props.errors} />\n            </label>\n        );\n    }\n\n    /**\n     * Use a native change event instead of React's because of https://github.com/facebook/react/issues/1159\n     */\n    public componentDidMount() {\n        this.inputRef.current!.addEventListener(\"change\", this.onChange);\n    }\n\n    /**\n     * Use a native change event instead of React's because of https://github.com/facebook/react/issues/1159\n     */\n    public componentWillUnount() {\n        this.inputRef.current!.removeEventListener(\"change\", this.onChange);\n    }\n\n    public get value(): any {\n        return this.inputRef.current ? this.inputRef.current.value : \"\";\n    }\n\n    public set value(value) {\n        if (this.inputRef.current) {\n            this.inputRef.current.value = value;\n        } else {\n            throw new Error(\"inputDom does not exist\");\n        }\n    }\n\n    public focus() {\n        this.inputRef.current!.focus();\n    }\n\n    public select() {\n        this.inputRef.current!.select();\n    }\n\n    private onChange = event => {\n        if (this.props.onChange) {\n            this.props.onChange(event);\n        }\n    };\n\n    private get labelID(): string {\n        return this.state.id + \"-label\";\n    }\n\n    private get errorID(): string {\n        return this.state.id + \"-errors\";\n    }\n}\n","/**\n * @copyright 2009-2018 Vanilla Forums Inc.\n * @license https://opensource.org/licenses/GPL-2.0 GPL-2.0\n */\n\nimport { getFieldErrors, getGlobalErrorMessage } from \"@dashboard/apiv2\";\nimport { t } from \"@dashboard/application\";\nimport React from \"react\";\nimport { withRouter, Link } from \"react-router-dom\";\nimport InputTextBlock from \"@dashboard/components/forms/InputTextBlock\";\nimport Checkbox from \"@dashboard/components/forms/Checkbox\";\nimport ButtonSubmit from \"@dashboard/components/forms/ButtonSubmit\";\nimport Paragraph from \"@dashboard/components/forms/Paragraph\";\nimport { IRequiredComponentID, getRequiredID } from \"@dashboard/componentIDs\";\nimport { IStoreState, IPasswordState } from \"@dashboard/@types/state\";\nimport { postAuthenticatePassword } from \"@dashboard/state/authenticate/passwordActions\";\nimport { IAuthenticatePasswordParams, LoadStatus } from \"@dashboard/@types/api\";\nimport { connect } from \"react-redux\";\n\ninterface IProps {\n    passwordState: IPasswordState;\n    authenticate: typeof postAuthenticatePassword;\n    defaultUsername?: string;\n}\n\ninterface IState extends IRequiredComponentID {\n    rememberMe: boolean;\n    username: string;\n    password: string;\n    id: string;\n}\n\n/**\n * Username + password from for signins.\n */\nexport class PasswordForm extends React.Component<IProps, IState> {\n    private usernameInput: React.RefObject<InputTextBlock> = React.createRef();\n    private passwordInput: React.RefObject<InputTextBlock> = React.createRef();\n\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            id: getRequiredID(props, \"passwordForm\"),\n            rememberMe: true,\n            username: \"\",\n            password: \"\",\n        };\n    }\n\n    public render() {\n        let formDescribedBy;\n        const globalErrorMessage = getGlobalErrorMessage(this.props.passwordState, [\"username\", \"password\"]);\n        if (globalErrorMessage) {\n            formDescribedBy = this.formDescriptionID;\n        }\n\n        return (\n            <form\n                id={this.state.id}\n                aria-describedby={formDescribedBy}\n                className=\"passwordForm\"\n                method=\"post\"\n                onSubmit={this.handleSubmit}\n                noValidate\n            >\n                <Paragraph\n                    id={this.formDescriptionID}\n                    className=\"authenticateUser-paragraph\"\n                    content={globalErrorMessage}\n                    isError={true}\n                />\n                <InputTextBlock\n                    label={t(\"Email/Username\")}\n                    required={true}\n                    disabled={!this.allowEdit}\n                    errors={getFieldErrors(this.props.passwordState, \"username\")}\n                    defaultValue={this.props.defaultUsername || \"\"}\n                    ref={this.usernameInput}\n                    onChange={this.handleUsernameChange}\n                    value={this.state.username}\n                />\n                <InputTextBlock\n                    label={t(\"Password\")}\n                    required={true}\n                    disabled={!this.allowEdit}\n                    errors={getFieldErrors(this.props.passwordState, \"password\")}\n                    type=\"password\"\n                    ref={this.passwordInput}\n                    onChange={this.handlePasswordChange}\n                    value={this.state.password}\n                />\n                <div className=\"inputBlock inputBlock-tighter\">\n                    <div className=\"rememberMeAndForgot\">\n                        <span className=\"rememberMeAndForgot-rememberMe\">\n                            <Checkbox\n                                label={t(\"Keep me signed in\")}\n                                onChange={this.handleCheckBoxChange}\n                                checked={this.state.rememberMe}\n                            />\n                        </span>\n                        <span className=\"rememberMeAndForgot-forgot\">\n                            <Link to=\"/authenticate/recoverpassword\">{t(\"Forgot your password?\")}</Link>\n                        </span>\n                    </div>\n                </div>\n                <ButtonSubmit disabled={!this.allowSubmit} content={t(\"Sign In\")} />\n            </form>\n        );\n    }\n\n    /**\n     * Whenever the component gets new form state, we check for errors and focus the relavent errored inputs.\n     */\n    public componentDidUpdate(prevProps: IProps) {\n        if (this.props.passwordState === prevProps.passwordState) {\n            return;\n        }\n\n        if (getFieldErrors(this.props.passwordState, \"username\")) {\n            this.usernameInput.current!.select();\n        } else if (getFieldErrors(this.props.passwordState, \"password\")) {\n            this.passwordInput.current!.select();\n        } else {\n            this.usernameInput.current!.select();\n        }\n    }\n\n    /**\n     * Whether or not inputs in the form can be edited.\n     */\n    private get allowEdit() {\n        return this.props.passwordState.status !== LoadStatus.LOADING;\n    }\n\n    private get allowSubmit() {\n        const { username, password } = this.state;\n        return username.length > 0 && password.length > 0;\n    }\n\n    /**\n     * Handler for the remember me checkbox.\n     */\n    private handleCheckBoxChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n        this.setState({ rememberMe: event.target.checked || false });\n    };\n\n    /**\n     * Change handler for the email input.\n     */\n    private handleUsernameChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n        const { value } = event.target;\n        this.setState({ username: value });\n    };\n\n    /**\n     * Change handler for the email input.\n     */\n    private handlePasswordChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n        const { value } = event.target;\n        this.setState({ password: value });\n    };\n\n    /**\n     * Submit handler for the form.\n     */\n    private handleSubmit = (event: React.SyntheticEvent<any>) => {\n        event.preventDefault();\n        const { username, password, rememberMe } = this.state;\n\n        this.props.authenticate({\n            username,\n            password,\n            persist: rememberMe,\n        });\n    };\n\n    /**\n     * Get the description ID for the form.\n     */\n    private get formDescriptionID() {\n        return this.state.id + \"-description\";\n    }\n}\n\nfunction mapStateToProps({ authenticate }: IStoreState) {\n    return {\n        passwordState: authenticate.password,\n    };\n}\n\nfunction mapDispatchToProps(dispatch) {\n    return {\n        authenticate: (params: IAuthenticatePasswordParams) => {\n            dispatch(postAuthenticatePassword(params));\n        },\n    };\n}\n\nconst withRedux = connect(\n    mapStateToProps,\n    mapDispatchToProps,\n);\nexport default withRedux(withRouter(PasswordForm));\n","/**\n * @copyright 2009-2018 Vanilla Forums Inc.\n * @license https://opensource.org/licenses/GPL-2.0 GPL-2.0\n */\n\nimport { t } from \"@dashboard/application\";\nimport React from \"react\";\nimport classNames from \"classnames\";\nimport Button from \"./Button\";\nimport { uniqueIDFromPrefix, getOptionalID, IOptionalComponentID } from \"@dashboard/componentIDs\";\n\ninterface IProps extends IOptionalComponentID {\n    content: string | Node;\n    className?: string;\n    disabled?: boolean;\n}\n\nexport default class ButtonSubmit extends React.Component<IProps, IOptionalComponentID> {\n    public static defaultProps = {\n        disabled: false,\n    };\n\n    constructor(props) {\n        super(props);\n    }\n\n    public render() {\n        const componentClasses = classNames(\n            \"Primary\",\n            \"buttonCTA\",\n            \"BigButton\",\n            \"button-fullWidth\",\n            this.props.className,\n        );\n\n        return (\n            <Button\n                id={this.props.id}\n                disabled={this.props.disabled}\n                type=\"submit\"\n                content={this.props.content}\n                className={componentClasses}\n                prefix=\"submitButton\"\n            >\n                {this.props.content}\n            </Button>\n        );\n    }\n}\n","/**\n * @copyright 2009-2018 Vanilla Forums Inc.\n * @license https://opensource.org/licenses/GPL-2.0 GPL-2.0\n */\n\nimport { t } from \"@dashboard/application\";\nimport React from \"react\";\nimport { Link } from \"react-router-dom\";\n\ninterface IProps {\n    onClick?: () => void;\n}\n\nexport default class RememberPasswordLink extends React.Component<IProps> {\n    public render() {\n        return (\n            <p className=\"authenticateUser-paragraph isCentered\">\n                {t(\"Remember your password?\")}{\" \"}\n                <Link onClick={this.props.onClick} to=\"/authenticate/signin\">\n                    {t(\"Sign In\")}\n                </Link>\n            </p>\n        );\n    }\n}\n","/**\n * @copyright 2009-2018 Vanilla Forums Inc.\n * @license http://www.opensource.org/licenses/gpl-2.0.php GNU GPL v2\n */\n\nimport { createStore, compose, applyMiddleware, combineReducers, Store } from \"redux\";\nimport { getReducers } from \"@dashboard/state/reducerRegistry\";\nimport thunk from \"redux-thunk\";\nimport { IStoreState } from \"@dashboard/@types/state\";\n\n// There may be an initial state to import.\nconst initialState = {};\nconst initialActions = window.__ACTIONS__ || [];\n\nconst middleware = [thunk];\n\n// Browser may have redux dev tools installed, if so integrate with it.\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\nconst enhancer = composeEnhancers(applyMiddleware(...middleware));\n\n// Build the store, add devtools extension support if it's available.\nlet store;\n\nexport default function getStore<S extends IStoreState = IStoreState>(): Store<S> {\n    if (store === undefined) {\n        // Get our reducers.\n        const reducer = combineReducers(getReducers());\n        store = createStore(reducer, initialState, enhancer);\n\n        // Dispatch initial actions returned from the server.\n        initialActions.forEach(store.dispatch);\n    }\n\n    return store;\n}\n","/**\n * @copyright 2009-2018 Vanilla Forums Inc.\n * @license https://opensource.org/licenses/GPL-2.0 GPL-2.0\n */\n\nexport const enum LoadStatus {\n    PENDING = \"PENDING\",\n    LOADING = \"LOADING\",\n    SUCCESS = \"SUCCESS\",\n    ERROR = \"ERROR\",\n}\n\ninterface IPendingValue {\n    status: LoadStatus.PENDING;\n}\n\ninterface ILoadingValue<T> {\n    status: LoadStatus.LOADING;\n    data?: T;\n    error?: IApiError;\n}\n\ninterface ISuccessValue<T> {\n    status: LoadStatus.SUCCESS;\n    data: T;\n    error?: undefined;\n}\n\ninterface IErrorValue<T> {\n    status: LoadStatus.ERROR;\n    error: IApiError;\n    data?: T;\n}\n\nexport type ILoadable<T> = IPendingValue | ILoadingValue<T> | ISuccessValue<T> | IErrorValue<T>;\n\nexport interface IApiResponse<DataType = any> {\n    data: DataType;\n    status: number;\n    headers: any;\n}\n\nexport interface IFieldError {\n    message: string; // translated message\n    code: string; // translation code\n    field: string;\n    status?: number; // HTTP status\n}\n\nexport interface IApiError {\n    message: string;\n    status: number;\n    errors?: {\n        [key: string]: IFieldError[];\n    };\n}\n","/**\n * @copyright 2009-2018 Vanilla Forums Inc.\n * @license https://opensource.org/licenses/GPL-2.0 GPL-2.0\n */\n\nimport { IUserFragment } from \"@dashboard/@types/api\";\n\nexport interface IUserAuthenticator {\n    authenticatorID: string;\n    type: string;\n    isUnique: boolean;\n    name: string;\n    ui: {\n        url: string;\n        buttonName: string;\n        photoUrl: string | null;\n        backgroundColor: string | null;\n        foregroundColor: string | null;\n    };\n    isUserLinked?: boolean;\n    sso?: any;\n}\n\nexport const enum AuthenticationStep {\n    AUTHENTICATED = \"authenticated\",\n    LINK_USER = \"linkUser\",\n}\n\nexport interface IAuthenticateResponse {\n    authenticationStep: AuthenticationStep;\n    user?: IUserFragment;\n    authSessionID?: string;\n    targetUrl?: string;\n}\n\nexport interface IAuthenticatePasswordParams {\n    username: string;\n    password: string;\n    persist?: boolean;\n}\n\nexport interface IAuthenticatePasswordResponseData extends IUserFragment {}\n","/**\n * @copyright 2009-2018 Vanilla Forums Inc.\n * @license https://opensource.org/licenses/GPL-2.0 GPL-2.0\n */\n\nimport { t } from \"@dashboard/application\";\nimport React from \"react\";\nimport Paragraph from \"@dashboard/components/forms/Paragraph\";\nimport { IUserAuthenticator } from \"@dashboard/@types/api\";\n\ninterface IProps {\n    ssoMethods?: IUserAuthenticator[];\n}\n\nexport default class SSOMethods extends React.Component<IProps> {\n    public render() {\n        if (!this.props.ssoMethods || this.props.ssoMethods.length === 0) {\n            return null;\n        }\n\n        const ssoMethods = this.props.ssoMethods.map((method, index) => {\n            const methodStyles = {\n                backgroundColor: method.ui.backgroundColor || undefined,\n                color: method.ui.foregroundColor || undefined,\n            };\n            return (\n                <a\n                    href={method.ui.url}\n                    key={index}\n                    className=\"BigButton button Button button-sso button-fullWidth\"\n                    style={methodStyles}\n                >\n                    <span className=\"button-ssoContents\">\n                        <img src={method.ui.photoUrl || undefined} className=\"ssoMethod-icon\" aria-hidden={true} />\n                        <span className=\"button-ssoLabel\">{t(method.ui.buttonName)}</span>\n                        <span className=\"ssoMethod-icon ssoMethod-iconSpacer\" aria-hidden=\"true\" />\n                    </span>\n                </a>\n            );\n        });\n\n        return (\n            <div className=\"ssoMethods\">\n                <Paragraph content={t(\"Sign in with one of the following:\")} />\n                {ssoMethods}\n            </div>\n        );\n    }\n}\n","/**\n * @copyright 2009-2018 Vanilla Forums Inc.\n * @license https://opensource.org/licenses/GPL-2.0 GPL-2.0\n */\n\nimport { getFieldErrors, getGlobalErrorMessage } from \"@dashboard/apiv2\";\nimport { t } from \"@dashboard/application\";\nimport DocumentTitle from \"@dashboard/components/DocumentTitle\";\nimport React from \"react\";\nimport ButtonSubmit from \"@dashboard/components/forms/ButtonSubmit\";\nimport Paragraph from \"@dashboard/components/forms/Paragraph\";\nimport InputTextBlock from \"@dashboard/components/forms/InputTextBlock\";\nimport RememberPasswordLink from \"./components/RememberPasswordLink\";\nimport uniqueId from \"lodash/uniqueId\";\nimport { IStoreState, IRequestPasswordState } from \"@dashboard/@types/state\";\nimport { IRequestPasswordOptions, LoadStatus } from \"@dashboard/@types/api\";\nimport {\n    postRequestPassword,\n    afterRequestPasswordSuccessNavigate,\n} from \"@dashboard/state/users/requestPasswordActions\";\nimport { connect } from \"react-redux\";\n\ninterface IState {\n    email: string;\n}\n\ninterface IProps {\n    requestPasswordState: IRequestPasswordState;\n    postRequestPassword: typeof postRequestPassword;\n    onNavigateAway: () => void;\n}\n\nexport class RecoverPasswordPage extends React.Component<IProps, IState> {\n    public id = uniqueId(\"RecoverPasswordPage\");\n    public pageTitleID: string;\n    public emainInput: React.RefObject<InputTextBlock> = React.createRef();\n\n    constructor(props) {\n        super(props);\n        this.id = this.pageTitleID = this.id + \"-pageTitle\";\n\n        this.state = {\n            email: \"\",\n        };\n    }\n\n    public render() {\n        const pageTitle = (\n            <DocumentTitle title={t(\"Recover Password\")}>\n                <h1 id={this.pageTitleID} className=\"isCentered\">\n                    {t(\"Recover Password\")}\n                </h1>\n            </DocumentTitle>\n        );\n\n        if (this.props.requestPasswordState.status === LoadStatus.SUCCESS) {\n            return (\n                <div id={this.id} className=\"authenticateUserCol\">\n                    {pageTitle}\n                    <Paragraph\n                        content={t(\"A message has been sent to your email address with password reset instructions.\")}\n                        className=\"authenticateUser-paragraph\"\n                    />\n                    <RememberPasswordLink onClick={this.props.onNavigateAway} />\n                </div>\n            );\n        } else {\n            return (\n                <div className=\"authenticateUserCol\">\n                    {pageTitle}\n                    <Paragraph\n                        content={t(\"RecoverPasswordLabelCode\", \"Enter your email to continue.\")}\n                        className=\"authenticateUser-paragraph\"\n                    />\n                    <form id={this.id} onSubmit={this.handleSubmit} aria-labelledby={this.pageTitleID} noValidate>\n                        <Paragraph\n                            className=\"authenticateUser-paragraph\"\n                            content={getGlobalErrorMessage(this.props.requestPasswordState, [\"email\"])}\n                            isError={true}\n                        />\n                        <InputTextBlock\n                            label={t(\"Email\")}\n                            required={true}\n                            disabled={!this.allowEdit}\n                            errors={getFieldErrors(this.props.requestPasswordState, \"email\")}\n                            value={this.state.email}\n                            onChange={this.handleEmailChange}\n                            ref={this.emainInput}\n                        />\n                        <ButtonSubmit\n                            disabled={!this.allowEdit || this.state.email.length === 0}\n                            content={t(\"Request a new password\")}\n                        />\n                    </form>\n                    <RememberPasswordLink />\n                </div>\n            );\n        }\n    }\n\n    /**\n     * Whenever the component gets new form state, we check for errors and focus the relavent errored inputs.\n     */\n    public componentDidUpdate(prevProps: IProps) {\n        if (this.props.requestPasswordState === prevProps.requestPasswordState) {\n            return;\n        }\n        if (this.props.requestPasswordState.status === LoadStatus.ERROR) {\n            this.emainInput.current!.select();\n        }\n    }\n\n    /**\n     * Change handler for the email input.\n     */\n    private handleEmailChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n        const { value } = event.target;\n        this.setState({ email: value });\n    };\n\n    /**\n     * Submit handler for the form.\n     */\n    private handleSubmit = event => {\n        event.preventDefault();\n        const { email } = this.state;\n        this.props.postRequestPassword({ email });\n    };\n\n    /**\n     * Whether or not the user can edit elements in the form.\n     */\n    private get allowEdit() {\n        return this.props.requestPasswordState.status !== LoadStatus.LOADING;\n    }\n}\n\nfunction mapStateToProps({ users }: IStoreState) {\n    return {\n        requestPasswordState: users.requestPassword,\n    };\n}\n\nfunction mapDispatchToProps(dispatch) {\n    return {\n        postRequestPassword: (params: IRequestPasswordOptions) => {\n            dispatch(postRequestPassword(params));\n        },\n        onNavigateAway: () => {\n            dispatch(afterRequestPasswordSuccessNavigate());\n        },\n    };\n}\n\nconst withRedux = connect(\n    mapStateToProps,\n    mapDispatchToProps,\n);\n\nexport default withRedux(RecoverPasswordPage);\n","/**\n * @copyright 2009-2018 Vanilla Forums Inc.\n * @license https://opensource.org/licenses/GPL-2.0 GPL-2.0\n */\n\nimport React, { ReactNode } from \"react\";\nimport classNames from \"classnames\";\nimport { uniqueIDFromPrefix, getRequiredID, IRequiredComponentID } from \"@dashboard/componentIDs\";\nimport { IFieldError } from \"@dashboard/@types/api\";\n\ninterface IProps extends IRequiredComponentID {\n    className?: string;\n    errors?: IFieldError[];\n}\n\ninterface IState {\n    id: string;\n}\n\nexport default class ErrorMessages extends React.Component<IProps, IState> {\n    constructor(props) {\n        super(props);\n        this.state = {\n            id: getRequiredID(props, \"errorMessages\") as string,\n        };\n    }\n\n    public render() {\n        const { errors } = this.props;\n\n        if (errors && errors.length > 0) {\n            const componentClasses = classNames(\"inputBlock-errors\", this.props.className);\n\n            const errorList = (errors as any).map((error: any, index) => {\n                return (\n                    <span key={index} className=\"inputBlock-error\">\n                        {error.message}\n                    </span>\n                );\n            });\n\n            return (\n                <span id={this.state.id} className={componentClasses}>\n                    {errorList}\n                </span>\n            );\n        } else {\n            return null;\n        }\n    }\n}\n","/**\n * @copyright 2009-2018 Vanilla Forums Inc.\n * @license https://opensource.org/licenses/GPL-2.0 GPL-2.0\n */\n\nimport { t } from \"@dashboard/application\";\nimport React from \"react\";\nimport classNames from \"classnames\";\nimport { uniqueIDFromPrefix, getOptionalID, IOptionalComponentID } from \"@dashboard/componentIDs\";\n\ninterface IProps extends IOptionalComponentID {\n    id?: string;\n    className?: string;\n    checked: boolean;\n    disabled?: boolean;\n    onChange: any;\n    label: string;\n}\n\ninterface IState {\n    id: string;\n}\n\nexport default class Button extends React.Component<IProps, IState> {\n    public static defaultProps = {\n        disabled: false,\n        id: false,\n    };\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            id: getOptionalID(props, \"checkbox\") as string,\n        };\n    }\n\n    get labelID(): string {\n        return this.state.id + \"-label\";\n    }\n\n    public render() {\n        const componentClasses = classNames(\"checkbox\", this.props.className);\n\n        return (\n            <label id={this.state.id} className={componentClasses}>\n                <input\n                    className=\"checkbox-input\"\n                    aria-labelledby={this.labelID}\n                    type=\"checkbox\"\n                    onChange={this.props.onChange}\n                    checked={this.props.checked}\n                />\n                <span className=\"checkbox-box\" aria-hidden=\"true\">\n                    <span className=\"checkbox-state\">\n                        <svg\n                            className=\"checkbox-icon checkbox-checkIcon\"\n                            xmlns=\"http://www.w3.org/2000/svg\"\n                            viewBox=\"0 0 10 10\"\n                        >\n                            <title>{t(\"✓\")}</title>\n                            <path\n                                fill=\"currentColor\"\n                                d=\"M10,2.7c0-0.2-0.1-0.3-0.2-0.4L8.9,1.3c-0.2-0.2-0.6-0.2-0.9,0L3.8,5.6L1.9,3.7c-0.2-0.2-0.6-0.2-0.9,0L0.2,4.6c-0.2,0.2-0.2,0.6,0,0.9l3.2,3.2c0.2,0.2,0.6,0.2,0.9,0l5.5-5.5C9.9,3,10,2.8,10,2.7z\"\n                            />\n                        </svg>\n                    </span>\n                </span>\n                <span id={this.labelID} className=\"checkbox-label\">\n                    {this.props.label}\n                </span>\n            </label>\n        );\n    }\n}\n","/**\n * @copyright 2009-2018 Vanilla Forums Inc.\n * @license https://opensource.org/licenses/GPL-2.0 GPL-2.0\n */\n\nimport { t } from \"@dashboard/application\";\nimport React from \"react\";\nimport classNames from \"classnames\";\nimport { uniqueIDFromPrefix, getOptionalID, IOptionalComponentID } from \"@dashboard/componentIDs\";\n\ninterface IProps extends IOptionalComponentID {\n    className?: string;\n    type: string;\n    content: string | Node;\n    disabled?: boolean;\n    prefix: string;\n}\n\ninterface IState {\n    id?: string;\n}\n\nexport default class Button extends React.Component<IProps, IState> {\n    public static defaultProps = {\n        id: false,\n        disabled: false,\n        type: \"button\",\n        prefix: \"button\",\n    };\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            id: getOptionalID(props, props.prefix) as string | undefined,\n        };\n    }\n\n    public render() {\n        const componentClasses = classNames(\"button\", \"Button\", this.props.className);\n\n        return (\n            <button\n                id={this.state.id}\n                disabled={this.props.disabled}\n                type={this.props.type}\n                className={componentClasses}\n            >\n                {this.props.content}\n            </button>\n        );\n    }\n}\n"],"sourceRoot":""}