var vanillaknowledge=(window.webpackJsonpvanillaknowledge=window.webpackJsonpvanillaknowledge||[]).push([[4],{131:function(e,t,n){n(25),e.exports=n(155)},155:function(e,t,n){"use strict";n.r(t);var r=n(23),o=(n(9),n(22),n(4)),i="[mentions] set active suggestion",a="[mentions] load users request",l="[mentions] load users failure",s="[mentions] load users success";var u=function(){function e(){this.MAX_PARTIAL_LOOKUP_ITERATIONS=10,this.root={}}return e.prototype.insert=function(e,t){for(var n=this.root,r=0;r<e.length;r++){var o=e[r];if(n.children||(n.children={}),!(o in n.children)){var i=r!==e.length-1?{}:{children:{}};n.children[o]=i}n=n.children[o]}n.value=t},e.prototype.getNode=function(e){var t=this.root;if(void 0===e)return t;for(var n=0;n<e.length;n++){var r=e.charAt(n);if(!t.children||!t.children[r])return null;t=t.children[r]}return t},e.prototype.getValue=function(e){var t=this.getNode(e);return t&&t.value||null},e.prototype.getValueFromPartialsOfWord=function(e){for(var t=Math.min(this.MAX_PARTIAL_LOOKUP_ITERATIONS,e.length);t>0;t--){var n=e.substring(0,t),r=this.getValue(n);if(null!=r)return r}return null},e}(),c=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},f={lastSuccessfulUsername:null,currentUsername:null,usersTrie:new u,activeSuggestionID:"",activeSuggestionIndex:0};
/**
 * @author Adam (charrondev) Charron <adam.c@vanillaforums.com>
 * @copyright 2009-2018 Vanilla Forums Inc.
 * @license GPL-2.0-only
 */
var d="[instance] create",h="[instance] set selection",p=(n(17),n(14)),v=n.n(p),m=(n(38),n(15),n(5)),y=(n(51),n(12)),g=n.n(y),b=n(33),O=n(1),S=n.n(O),w=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),_=(function(e){function t(t){var n=e.call(this,t)||this;return n.focusableElement.setAttribute("tabindex",-1),n}w(t,e),t.create=function(t){var n=e.create.call(this,t);return n.setAttribute("contenteditable",!1),n.classList.add(b.a),n},t.prototype.remove=function(){if(!this.quill)return Object(m.g)("Attempted to focus a an embed blot that has not been mounted yet.");var n=this.focusableElement===document.activeElement,r=this.offset(this.quill.scroll);if(e.prototype.remove.call(this),this.quill.update(v.a.sources.USER),n){var o=R(this.quill,r,t);o?o.focus():this.quill.setSelection(r,0,v.a.sources.USER)}},t.prototype.insertNewlineAfter=function(){if(!this.quill)return Object(m.g)("Attempted to focus a an embed blot that has not been mounted yet.");S.a.create("block","").insertInto(this.quill.scroll,this.next),this.quill.update(v.a.sources.USER),this.quill.setSelection(this.offset()+1,0,v.a.sources.USER)},t.prototype.focus=function(){if(!this.quill)return Object(m.g)("Attempted to focus a an embed blot that has not been mounted yet.");var e=this.offset(this.scroll);this.quill.setSelection(e,0,v.a.sources.API),this.focusableElement.focus()},Object.defineProperty(t.prototype,"focusableElement",{get:function(){if(this.domNode.classList.contains(b.a))return this.domNode;var e=this.domNode.querySelector("."+b.a);if(e instanceof HTMLElement)return e;throw new Error("Attempting to focus a DOM Node that either does not exist or is not an HTMLElement."+e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"quill",{get:function(){return this.scroll&&this.scroll.domNode.parentNode?v.a.find(this.scroll.domNode.parentNode):null},enumerable:!0,configurable:!0}),t.tagName="div",t.className="js-embed",t.blotName="embed-focusable"}(y.BlockEmbed),function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}()),I=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},A=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(I(arguments[t]));return e},j=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}_(t,e),t.allowedChildren=A(g.a.allowedChildren)}(g.a),n(30)),x=n.n(j),N=n(16),E=n.n(N),P=n(21),U=n.n(P),q=n(37),D=n.n(q),T=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),L=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return T(t,e),t.create=function(t){var n=e.create.call(this,t);return n.setAttribute("spellcheck",!1),n.classList.add("code"),n.classList.add("codeBlock"),n},t.blotName="codeBlock",t.tagName="code",t.className="codeBlock",t.allowedChildren=[E.a,U.a,D.a],t}(x.a),k=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a};function R(e,t,n){var r=n?function(e){return e instanceof n}:function(e){return!0};return e.scroll.descendant(r,t)[0]}var C=1;new Map;
/**
 * @author Adam (charrondev) Charron <adam.c@vanillaforums.com>
 * @copyright 2009-2018 Vanilla Forums Inc.
 * @license GPL-2.0-only
 */
var M=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},B={index:0,length:0},G={},F={currentSelection:B,lastGoodSelection:B,mentionSelection:null};function V(e,t){var n=e[t.payload.editorID];if(t.type===d&&n)throw new Error("Failed to create editor instance with id "+t.payload.editorID+". Id already exists");if(t.type!==d&&!n)throw new Error("Could not perform an action for editor ID "+t.payload.editorID+" that doesn't exist. Be sure to create an instance first.")}var H=n(11),J=Object(H.c)({mentions:function(e,t){switch(void 0===e&&(e=f),t.type){case a:var n=t.payload.username;e.usersTrie.insert(n,{status:o.a.LOADING});var r=!1,u=e.lastSuccessfulUsername;return null!=u&&n.length>=u.length&&n.substring(0,u.length)===u&&(r=!0),c({},e,{currentUsername:n,lastSuccessfulUsername:r?e.lastSuccessfulUsername:null});case l:var d=t.payload,h=(n=d.username,d.error);return e.usersTrie.insert(n,{status:o.a.ERROR,data:void 0,error:h}),e;case s:var p=t.payload,v=(n=p.username,p.users);e.usersTrie.insert(n,{status:o.a.SUCCESS,data:function(e,t){var n=Intl.Collator("en",{usage:"sort",sensitivity:"variant",ignorePunctuation:!0,numeric:!0});return e.sort(function(e,r){return e.name.includes(t)&&!r.name.includes(t)?-1:r.name.includes(t)&&!e.name.includes(t)?1:n.compare(e.name,r.name)})}(v,n)});var m=v.length>0?v[0].domID:"";return c({},e,{activeSuggestionID:m,activeSuggestionIndex:0,lastSuccessfulUsername:n,currentUsername:n===e.currentUsername?null:e.currentUsername});case i:var y=t.payload,g=y.suggestionID,b=y.suggestionIndex;return c({},e,{activeSuggestionID:g,activeSuggestionIndex:b});default:return e}},instances:function(e,t){var n,r;switch(void 0===e&&(e=G),t.type){case d:return V(e,t),M({},e,((n={})[t.payload.editorID]=F,n));case h:V(e,t);var o=t.payload,i=o.selection,a=o.editorID,l=o.quill,s=e[a],u=s.lastGoodSelection;return M({},e,((r={})[a]=M({},s,{currentSelection:i,lastGoodSelection:null!==i?i:u,mentionSelection:function(e,t){if(!e.hasFocus())return null;if(!t)return null;if(t.length>0)return null;if(function(e,t,n){return void 0===n&&(n=null),null===n&&(n=e.getSelection()),!!n&&(n.length>0?e.scroll.descendants(t,n.index,n.length).length>0:!!e.scroll.descendant(t,n.index)[0])}(e,L,t))return null;var n=k(e.getLeaf(t.index),1)[0].offset(e.scroll),r=t.index-n,o=e.getText(n,r),i=o.lastIndexOf("@");if(-1===i)return null;var a=n+i,l=o.substring(i);return l.length-1>=C&&Object(m.h)(l,!1,!1)?{index:a,length:l.length}:null}(l,i)}),r));default:return e}}});
/**
 * @author Adam (charrondev) Charron <adam.c@vanillaforums.com>
 * @copyright 2009-2018 Vanilla Forums Inc.
 * @license GPL-2.0-only
 */
/*
 * @author Adam (charrondev) Charron <adam.c@vanillaforums.com>
 * @copyright 2009-2018 Vanilla Forums Inc.
 * @license https://opensource.org/licenses/GPL-2.0 GPL-2.0
 */
Object(r.b)("editor",J)},25:function(e,t,n){"use strict";n.r(t);var r=n(2);
/**
 * Set wepback's public path.
 * Otherwise the lookups of dynamically imported webpack files can fail on sites that have a different webroot
 * Eg. installed in a subfolder / using Reverse Proxy.
 *
 * @author Adam Charron <adam.c@vanillaforums.com>
 * @copyright 2009-2018 Vanilla Forums Inc.
 * @license GPL-2.0-only
 */n.p=Object(r.c)("/")}},[[131,2,0,1]]]);
//# sourceMappingURL=knowledge.min.js.map?cf9a434c9279cb39fb17