{"version":3,"sources":["webpack:///./plugins/rich-editor/src/scripts/quill/blots/embeds/ErrorBlot.ts","webpack:///./plugins/rich-editor/src/scripts/components/popovers/pieces/Popover.tsx","webpack:///./plugins/rich-editor/src/scripts/components/popovers/pieces/PopoverController.tsx","webpack:///./plugins/rich-editor/src/scripts/components/toolbars/pieces/ToolbarPositioner.tsx","webpack:///./plugins/rich-editor/src/scripts/quill/Formatter.ts","webpack:///./plugins/rich-editor/src/scripts/quill/blots/abstract/ContentBlot.ts","webpack:///./plugins/rich-editor/src/scripts/quill/blots/abstract/withWrapper.ts","webpack:///./plugins/rich-editor/src/scripts/components/toolbars/pieces/MenuItem.tsx","webpack:///./plugins/rich-editor/src/scripts/components/toolbars/pieces/MenuItems.tsx","webpack:///./plugins/rich-editor/src/scripts/components/icons.tsx","webpack:///./plugins/rich-editor/src/scripts/components/context.tsx","webpack:///./plugins/rich-editor/src/scripts/components/editor/Editor.tsx","webpack:///./applications/dashboard/src/scripts/permissions.ts","webpack:///./plugins/rich-editor/src/scripts/components/popovers/EmbedPopover.tsx","webpack:///./plugins/rich-editor/src/scripts/quill/blots/abstract/FocusableEmbedBlot.ts","webpack:///./plugins/rich-editor/src/scripts/components/editor/pieces/EditorUploadButton.tsx","webpack:///./plugins/rich-editor/src/scripts/components/editor/pieces/EditorDescriptions.tsx","webpack:///./plugins/rich-editor/src/scripts/quill/blots/embeds/ExternalEmbedBlot.ts","webpack:///./plugins/rich-editor/src/scripts/quill/ClipboardModule.ts","webpack:///./plugins/rich-editor/src/scripts/quill/blots/embeds/EmojiBlot.ts","webpack:///./plugins/rich-editor/src/scripts/quill/blots/embeds/MentionBlot.ts","webpack:///./plugins/rich-editor/src/scripts/quill/blots/embeds/MentionComboBoxBlot.ts","webpack:///./plugins/rich-editor/src/scripts/quill/KeyboardBindings.ts","webpack:///./plugins/rich-editor/src/scripts/quill/VanillaTheme.ts","webpack:///./plugins/rich-editor/src/scripts/quill/FocusModule.ts","webpack:///./plugins/rich-editor/src/scripts/quill/EmbedInsertionModule.ts","webpack:///./plugins/rich-editor/src/scripts/quill/HistoryModule.ts","webpack:///./plugins/rich-editor/src/scripts/quill/registerQuill.ts","webpack:///./plugins/rich-editor/src/scripts/components/popovers/pieces/emojiData.ts","webpack:///./plugins/rich-editor/src/scripts/components/popovers/pieces/EmojiButton.tsx","webpack:///./plugins/rich-editor/src/scripts/components/popovers/pieces/EmojiPicker.tsx","webpack:///./plugins/rich-editor/src/scripts/components/popovers/EmojiPopover.tsx","webpack:///./plugins/rich-editor/src/scripts/components/toolbars/pieces/ToolbarContainer.tsx","webpack:///./plugins/rich-editor/src/scripts/components/toolbars/pieces/InlineToolbarLinkInput.tsx","webpack:///./plugins/rich-editor/src/scripts/components/toolbars/pieces/InlineToolbarMenuItems.tsx","webpack:///./plugins/rich-editor/src/scripts/components/toolbars/InlineToolbar.tsx","webpack:///./plugins/rich-editor/src/scripts/components/toolbars/pieces/MentionSuggestion.tsx","webpack:///./plugins/rich-editor/src/scripts/components/toolbars/pieces/MentionSuggestionList.tsx","webpack:///./plugins/rich-editor/src/scripts/components/toolbars/MentionToolbar.tsx","webpack:///./plugins/rich-editor/src/scripts/components/toolbars/pieces/ParagraphToolbarMenuItems.tsx","webpack:///./plugins/rich-editor/src/scripts/components/toolbars/ParagraphToolbar.tsx","webpack:///./plugins/rich-editor/src/scripts/quill/blots/blocks/CodeBlockBlot.ts","webpack:///./plugins/rich-editor/src/scripts/state/mention/MentionTrie.ts","webpack:///./plugins/rich-editor/src/scripts/state/mention/mentionReducer.ts","webpack:///./plugins/rich-editor/src/scripts/state/instance/instanceReducer.ts","webpack:///./plugins/rich-editor/src/scripts/state/editorReducer.ts","webpack:///./plugins/rich-editor/src/scripts/mountEditor.tsx","webpack:///./plugins/rich-editor/src/scripts/entries/forum.ts","webpack:///./plugins/rich-editor/src/scripts/quill/blots/blocks/BlockBlot.ts","webpack:///./plugins/rich-editor/src/scripts/quill/blots/inline/CodeBlot.ts","webpack:///./plugins/rich-editor/src/scripts/quill/blots/embeds/MentionAutoCompleteBlot.ts","webpack:///./plugins/rich-editor/src/scripts/quill/blots/abstract/WrapperBlot.ts","webpack:///./plugins/rich-editor/src/scripts/quill/blots/blocks/BlockquoteBlot.ts","webpack:///./plugins/rich-editor/src/scripts/quill/utility.ts","webpack:///./plugins/rich-editor/src/scripts/quill/components/SpoilerButton.tsx","webpack:///./plugins/rich-editor/src/scripts/quill/blots/blocks/SpoilerBlot.tsx","webpack:///./plugins/rich-editor/src/scripts/quill/blots/abstract/ClassFormatBlot.ts","webpack:///./plugins/rich-editor/src/scripts/quill/blots/abstract/LineBlot.ts","webpack:///./plugins/rich-editor/src/scripts/state/mention/mentionActions.ts","webpack:///./plugins/rich-editor/src/scripts/state/instance/instanceActions.ts","webpack:///./build/entries/public-path.ts","webpack:///./plugins/rich-editor/src/scripts/quill/blots/embeds/LoadingBlot.ts"],"names":["_dashboard_embeds__WEBPACK_IMPORTED_MODULE_3__","__webpack_require__","ErrorBlot","_super","domNode","_this","call","this","closeButton","querySelector","HTMLElement","addEventListener","remove","__extends","create","data","node","classList","add","descriptionId","lodash_uniqueId__WEBPACK_IMPORTED_MODULE_2___default","error","document","createElement","setAttribute","Object","_dashboard_application__WEBPACK_IMPORTED_MODULE_1__","innerHTML","message","appendChild","value","messageNode","textContent","blotName","className","tagName","_abstract_FocusableEmbedBlot__WEBPACK_IMPORTED_MODULE_0__","_dashboard_application__WEBPACK_IMPORTED_MODULE_2__","Popover","props","state","id","descriptionID","titleID","prototype","render","additionalClassRoot","classes","classnames__WEBPACK_IMPORTED_MODULE_1___default","_a","isHidden","isVisible","headerClasses","_b","bodyClasses","_c","footerClasses","_d","alertMessage","react__WEBPACK_IMPORTED_MODULE_0___default","a","aria-live","role","screenReaderDescription","accessibleDescription","aria-describedby","aria-labelledby","aria-hidden","tabIndex","ref","titleRef","title","type","onClick","onCloseClick","additionalHeaderContent","body","footer","Component","classnames__WEBPACK_IMPORTED_MODULE_4__","classnames__WEBPACK_IMPORTED_MODULE_4___default","n","PopoverController","handleFocusChange","hasFocus","setState","togglePopover","prevState","closeMenuHandler","event","detail","firingKey","constructor","name","onClose","activeElement","parentElement","controllerRef","current","contains","buttonRef","focus","createRef","initalFocusRef","_dashboard_componentIDs__WEBPACK_IMPORTED_MODULE_1__","defineProperty","buttonClasses","isOpen","classNameRoot","aria-controls","componentID","aria-expanded","aria-haspopup","icon","children","initialFocusRef","componentDidUpdate","prevProps","_rich_editor_quill_utility__WEBPACK_IMPORTED_MODULE_3__","componentDidMount","_dashboard_dom__WEBPACK_IMPORTED_MODULE_2__","PureComponent","_rich_editor_components_context__WEBPACK_IMPORTED_MODULE_2__","ToolbarPositioner","windowResizeListener","lodash_debounce__WEBPACK_IMPORTED_MODULE_1___default","quillWidth","quill","root","offsetWidth","debouncedWidthUpdate","shouldComponentUpdate","nextProps","nextState","splitProps","extractValuesFromProps","splitNextProps","shouldUpdate","isActive","selectionIndex","selectionLength","__values","keys","otherProps","next","done","key","params","x","getXCoordinates","y","getYCoordinates","window","componentWillUnmount","removeEventListener","__rest","getBounds","bounds","numLines","getLines","length","lastLine","index","getIndex","Math","min","flyoutWidth","start","left","end","right","horizontalAlignment","halfToolbarSize","max","averageOffset","round","position","nubPosition","flyoutHeight","nubHeight","verticalAlignment","top","nubPointsDown","bottom","__webpack_exports__","quill_blots_embed__WEBPACK_IMPORTED_MODULE_11__","quill_blots_embed__WEBPACK_IMPORTED_MODULE_11___default","Formatter","bold","range","handleInlineFormat","quill_formats_bold__WEBPACK_IMPORTED_MODULE_2___default","italic","quill_formats_italic__WEBPACK_IMPORTED_MODULE_3___default","strike","quill_formats_strike__WEBPACK_IMPORTED_MODULE_4___default","codeInline","_rich_editor_quill_blots_inline_CodeBlot__WEBPACK_IMPORTED_MODULE_6__","link","linkValue","_rich_editor_quill_utility__WEBPACK_IMPORTED_MODULE_5__","quill_formats_link__WEBPACK_IMPORTED_MODULE_1___default","formatText","quill_core__WEBPACK_IMPORTED_MODULE_0___default","sources","USER","paragraph","BLOCK_FORMAT_NAMES","forEach","formatLine","API","update","h2","quill_formats_header__WEBPACK_IMPORTED_MODULE_10___default","h3","codeBlock","lines","getLine","firstLine","offset","scroll","fullRange","INLINE_FORMAT_NAMES","SILENT","difference","replaceInlineEmbeds","_rich_editor_quill_blots_blocks_CodeBlockBlot__WEBPACK_IMPORTED_MODULE_7__","blockquote","_rich_editor_quill_blots_blocks_BlockquoteBlot__WEBPACK_IMPORTED_MODULE_8__","spoiler","_rich_editor_quill_blots_blocks_SpoilerBlot__WEBPACK_IMPORTED_MODULE_9__","formatKey","isEnabled","getFormat","lengthDifference","descendants","embed","text","innerText","replace","replaceWith","_LineBlot__WEBPACK_IMPORTED_MODULE_2__","ContentBlot","_withWrapper__WEBPACK_IMPORTED_MODULE_1__","_WrapperBlot__WEBPACK_IMPORTED_MODULE_0__","allowedChildren","parchment__WEBPACK_IMPORTED_MODULE_1__","parchment__WEBPACK_IMPORTED_MODULE_1___default","withWrapper","blotConstructor","BlotWithWrapper","statics","parentName","Error","attach","parent","Wrapper","wrap","prev","optimize","context","getWrapper","recursively","wrapper","topLevelWrapper","child","replaceWithIntoScroll","insertInto","insertBefore","newBlot","moveChildren","MenuItem","apply","arguments","react_default","isDisabled","preventDefault","handleKeyPress","stopPropagation","focusNextItem","focusPrevItem","label","classnames_default","ariaAttributes","aria-label","__assign","onKeyDown","MenuItems_MenuItems","MenuItems","menuItemRefs","MenuItems_extends","lastIndex","menuItemData","menuItemsClass","aria-orientation","orientation","map","itemData","prevIndex","nextIndex","pieces_MenuItem","MenuItems_assign","itemRole","nextItem","prevItem","push","focusFirstItem","firstItem","focusLastItem","lastItem","defaultProps","classnames__WEBPACK_IMPORTED_MODULE_2__","classnames__WEBPACK_IMPORTED_MODULE_2___default","currentColorFill","fill","viewBox","d","style","code","fillRule","emoji","pilcrow","heading2","heading3","extraClasses","spoilerClasses","points","emojiGroup_smileysPeople","group","emojiGroup_animalsNature","emojiGroup_foodDrink","emojiGroup_travelPlaces","emojiGroup_activities","emojiGroup_objects","emojiGroup_symbols","emojiGroup_flags","image","react_redux__WEBPACK_IMPORTED_MODULE_1__","createContext","Consumer","Provider","withRedux","ownProps","editorID","instanceState","editor","instances","lastGoodSelection","activeFormats","withEditor","WrappedComponent","ReduxComponent","displayName","ComponentWithEditor","_rich_editor_quill_registerQuill__WEBPACK_IMPORTED_MODULE_19__","Editor","quillMountRef","store","_dashboard_state_getStore__WEBPACK_IMPORTED_MODULE_2__","allowPasteListener","onQuillUpdate","newValue","oldValue","source","shouldDispatch","quill_core__WEBPACK_IMPORTED_MODULE_17___default","events","SELECTION_CHANGE","dispatch","_rich_editor_state_instance_instanceActions__WEBPACK_IMPORTED_MODULE_14__","setSelection","getSelection","quoteButtonClickHandler","triggeringElement","embedInserter","getModule","url","getAttribute","scrapeMedia","_dashboard_utility__WEBPACK_IMPORTED_MODULE_4__","hasUploadPermission","_dashboard_permissions__WEBPACK_IMPORTED_MODULE_3__","bodybox","theme","display","_rich_editor_quill_utility__WEBPACK_IMPORTED_MODULE_15__","setupBodyBoxSync","setupDebugPasteListener","createInstance","on","EDITOR_CHANGE","requestAnimationFrame","addQuoteHandler","forceUpdate","_dashboard_dom__WEBPACK_IMPORTED_MODULE_16__","delegatedHandlerHash","editorDescriptionID","quillDependantItems","Fragment","_rich_editor_components_toolbars_InlineToolbar__WEBPACK_IMPORTED_MODULE_9__","_rich_editor_components_toolbars_ParagraphToolbar__WEBPACK_IMPORTED_MODULE_8__","_rich_editor_components_toolbars_MentionToolbar__WEBPACK_IMPORTED_MODULE_7__","_rich_editor_components_popovers_EmojiPopover__WEBPACK_IMPORTED_MODULE_6__","_rich_editor_components_editor_pieces_EditorUploadButton__WEBPACK_IMPORTED_MODULE_10__","_rich_editor_components_popovers_EmbedPopover__WEBPACK_IMPORTED_MODULE_5__","react_redux__WEBPACK_IMPORTED_MODULE_13__","_rich_editor_components_context__WEBPACK_IMPORTED_MODULE_11__","_rich_editor_components_editor_pieces_EditorDescriptions__WEBPACK_IMPORTED_MODULE_12__","data-gramm","contentEditable","data-placeholder","initialValue","setContents","JSON","parse","stringify","getContents","ops","form","container","closest","pastedData","clipboardData","getData","delta","react_hot_loader__WEBPACK_IMPORTED_MODULE_18__","module","_dashboard_gdn__WEBPACK_IMPORTED_MODULE_0__","hasPermission","permissions","isBanned","isAdmin","permissions_1","permissions_1_1","hasInternal","str","toLowerCase","bans","bans_1","bans_1_1","ban","except","has","except_1","except_1_1","permission","getBan","substr","indexOf","_dashboard_componentIDs__WEBPACK_IMPORTED_MODULE_7__","EmbedPopover","clearInput","buttonKeyDownHandler","quill_modules_keyboard__WEBPACK_IMPORTED_MODULE_1___default","match","nativeEvent","isInputValid","submitUrl","buttonClickHandler","inputChangeHandler","target","normalizeUrl","embedModule","Icon","_rich_editor_components_icons__WEBPACK_IMPORTED_MODULE_6__","_pieces_PopoverController__WEBPACK_IMPORTED_MODULE_5__","placeholder","onChange","disabled","_pieces_Popover__WEBPACK_IMPORTED_MODULE_4__","_rich_editor_components_context__WEBPACK_IMPORTED_MODULE_3__","parchment__WEBPACK_IMPORTED_MODULE_5__","parchment__WEBPACK_IMPORTED_MODULE_5___default","FocusableEmbedBlot","focusableElement","_dashboard_embeds__WEBPACK_IMPORTED_MODULE_1__","_dashboard_utility__WEBPACK_IMPORTED_MODULE_3__","hadFocus","quill_core__WEBPACK_IMPORTED_MODULE_2___default","potentialNewEmbedToFocus","_utility__WEBPACK_IMPORTED_MODULE_4__","insertNewlineAfter","selfPosition","childToFocus","parentNode","find","quill_blots_block__WEBPACK_IMPORTED_MODULE_0__","EditorUploadButton","inputRef","onFakeButtonClick","click","onInputChange","file","files","embedInsertion","imagePromise","_dashboard_apiv2__WEBPACK_IMPORTED_MODULE_3__","createEmbed","dataPromise","loaderData","aria-pressed","_rich_editor_components_icons__WEBPACK_IMPORTED_MODULE_1__","accept","EditorDescriptions","_rich_editor_quill_utility__WEBPACK_IMPORTED_MODULE_8__","ExternalEmbedBlot","needsSetup","replaceLoaderWithFinalForm","_rich_editor_quill_blots_embeds_LoadingBlot__WEBPACK_IMPORTED_MODULE_7__","element","_dashboard_dom__WEBPACK_IMPORTED_MODULE_0__","createEmbedWarningFallback","linkText","div","sanitizedText","warningTitle","_dashboard_application__WEBPACK_IMPORTED_MODULE_5__","_dashboard_embeds__WEBPACK_IMPORTED_MODULE_2__","WARNING_HTML","createEmbedFromData","loaderElement","jsEmbed","_abstract_FocusableEmbedBlot__WEBPACK_IMPORTED_MODULE_3__","descriptionNode","lodash_uniqueId__WEBPACK_IMPORTED_MODULE_1___default","embedExternal","_dashboard_utility__WEBPACK_IMPORTED_MODULE_6__","embedExternalContent","setImmediate","content","then","catch","e","warning","finalBlot","resolveDataFromValue","loader","embedElement","_ErrorBlot__WEBPACK_IMPORTED_MODULE_4__","Promise","resolve","LOADING_VALUE","loading","_dashboard_state_getStore__WEBPACK_IMPORTED_MODULE_6__","ClipboardModule","options","linkMatcher","nodeType","Node","TEXT_NODE","inCodeFormat","splitOps","splitLinkOperationsOutOfText","addMatcher","inputText","matches","ops_1","split","beforeLink","shift","insert","attributes","join","onPaste","defaultPrevented","quill_delta__WEBPACK_IMPORTED_MODULE_1___default","retain","scrollTop","documentElement","selection","concat","convert","delete","updateContents","instance","getState","_rich_editor_quill_blots_blocks_CodeBlockBlot__WEBPACK_IMPORTED_MODULE_4__","_rich_editor_quill_blots_inline_CodeBlot__WEBPACK_IMPORTED_MODULE_5__","quill_modules_clipboard__WEBPACK_IMPORTED_MODULE_0___default","EmojiBlot","dom","emojiChar","embed_default","MentionBlot","MentionBlot_extends","dataset","userid","userID","toString","username","href","application","parseInt","MentionComboBoxBlot","MentionComboBoxBlot_extends","replacement","parchment_default","scope","Scope","BLOCK","__spread","container_default","MentionAutoCompleteBlot","inline_default","text_default","KeyboardBindings","bindings","handleMultilineEnter","line","KeyboardBindings_read","tail","utility","handleCodeBlockEnter","test","handleBlockStartDelete","clearFirstPositionMultiLineBlot","rangeStartsBeforeSelection","rangeEndsAfterSelection","isFirstLineSelected","selectionIsEntireScroll","blotMatches","LineBlot","CodeBlockBlot","delta_default","newSelection","emitter_default","transformTextToLink","lineStart","results","getText","lastWord","isAlreadyLink","blot","link_default","core_default","transformLinkOnlyLineToEmbed","firstBlotName","head","includes","trim","embedInsertionModule","deleteText","insertText","resetDefaultBindings","addBlockNewLineHandlers","addBlockArrowKeyHandlers","addBlockBackspaceHandlers","addLinkTransformKeyboardBindings","overwriteFormatHandlers","handleMultiLineBackspace","handleCodeBlockBackspace","insertNewlineBeforeRange","insertNewlineAfterRange","tab","keyboard_default","ENTER","collapsed","handler","format","makeFormatHandler","underline","toUpperCase","shortKey","CodeBlot","BACKSPACE","MULTI_LINE_BLOTS","commonCriteria","UP","LEFT","DOWN","RIGHT","VanillaTheme","themeOptions","VanillaTheme_assign","scrollingContainer","addModule","keyboardBindings","quill_KeyboardBindings","modules","keyboard","VanillaTheme_extends","theme_default","EmbedFocusModule","lastSelection","escapeMobileFullScreen","getComputedStyle","editorRoot","getPropertyValue","ESCAPE","shiftKey","formWrapper","fromElement","toggle","handleTab","getEmbedBlotForFocusedElement","nextElement","excludedRoots","allowLooping","focusFirstLine","handleShiftTab","prevElement","reverse","focusLastLine","handleArrowKeyFromEmbed","directionKeyCode","blotForActiveElement","isEndOfScroll","isStartOfScroll","isUpOrLeft","isDownOrRight","blotToMoveTo","getNextBlotFromArrowKey","arrowToBlot","handleDeleteOnQuill","currentBlot","previousBlot","isCurrentBlotEmpty","keyDownListener","currentLineBlot","FocusModule_read","keyCode","isKeyCodeArrowKey","inActiveMention","isKeyCodeDelete","tabListener","eventWasHandled","TAB","oldRange","setupEmbedClickHandler","setupMobileHandler","FocusModule_extends","fullDocumentRange","lastEmbedBlot","firstEmbedBlot","newElementStart","Element","closestEmbed","endOfBlot","clickedElement","DELETE","module_default","EmbedInsertionModule","getStore","embedValue","externalEmbed","pasteHandler","apiv2","dragHandler","setupImageUploads","EmbedInsertionModule_extends","formData","FormData","append","scrapePromise","post","result","SHORTKEY","navigator","platform","HistoryModule","HistoryModule_assign","EMBED_KEY","EMBED_CONFIRM_KEY","CODE_KEY","Z_KEYCODE","undoKeyboardListener","scripts_embeds","redo","undo","HistoryModule_extends","record","changeDelta","oldDelta","operationsContainKey","cutoff","undoDelta","diff","actionIsEmbedCompletion","redoDelta","hasDeleteRecordOfLoadingEmbed","hasAddRecordOfLoadingEmbed","ops_1_1","op","get_default","history_default","registerQuill","register","blots/block","BlockBlot","formats/blockquote/line","BlockquoteBlot","formats/blockquote/content","formats/blockquote/wrapper","formats/spoiler/line","SpoilerBlot","formats/spoiler/content","formats/spoiler/wrapper","formats/codeBlock","formats/header","header_default","formats/list","list_default","formats/list/item","list","formats/embed-error","formats/embed-loading","LoadingBlot","formats/embed-external","formats/mention","embeds_MentionBlot","formats/mention-combobox","embeds_MentionComboBoxBlot","formats/mention-autocomplete","formats/bold","bold_default","formats/codeInline","formats/italic","italic_default","formats/link","formats/strike","strike_default","formats/emoji","embeds_EmojiBlot","formats/indent","indent","themes/vanilla","quill_VanillaTheme","modules/embed/insertion","quill_EmbedInsertionModule","modules/embed/focus","FocusModule","modules/history","quill_HistoryModule","modules/clipboard","blotLookup","BlotClass","import","order","registerQuill_spread","EMOJI_GROUPS","icons","EMOJIS","EmojiButton_EmojiButton","EmojiButton","insertEmojiBlot","insertEmbed","onKeyUp","onKeyRight","onKeyLeft","emojiData","componentClasses","elButton","domButton","dangerouslySetInnerHTML","__html","checkFocus","activeIndex","pieces_EmojiButton","COL_SIZE","ROW_SIZE","rowIndexesByGroupId","cellIndexesByGroupId","groupID","floor","lastEmojiIndex","EmojiPicker_EmojiPicker","EmojiPicker","lastRowIndex","getRowFromIndex","handleOnSectionRendered","newRowIndex","rowStartIndex","selectedGroupIndex","values","groupRow","groupKey","scrollToCategory","categoryID","newIndex","scrollToRow","cellRenderer","columnIndex","rowIndex","pos","jumpRowUp","jumpRowDown","jumpIndexLeft","jumpIndexRight","focusOnCategories","categories","getElementById","categoryPickerID","firstButton","jumpIndex","targetFocusPosition","keepEmojiIndexInBounds","targetRowPosition","keepRowIndexInBounds","gridEl","handleKeyDown","contentID","EmojiPicker_extends","description","extraHeadingContent","groupIndex","isSelected","handleCategoryClick","aria-current","grid","es","height","width","containerRole","columnCount","columnWidth","rowCount","rowHeight","overscanRowCount","scrollToAlignment","aria-readonly","undefined","onSectionRendered","targetRow","targetIndex","pieces_EmojiPicker","EmojiPopover_EmojiPopover","EmojiPopover","componentIDs","EmojiPopover_extends","ToolbarContainer_ToolbarContainer","ToolbarContainer","flyoutRef","nubRef","toolbarStyles","visibility","nubStyles","zIndex","offsetHeight","pieces_ToolbarContainer","pieces_InlineToolbarLinkInput","InlineToolbarLinkInput","cachedRange","showFormatMenu","showLinkMenu","InlineToolbarLinkInput_extends","inputValue","onInputKeyDown","InlineToolbarMenuItems","formatBold","formatter","formatItalic","formatStrike","formatCode","InlineToolbarMenuItems_extends","onLinkClick","InlineToolbar_InlineToolbar","InlineToolbar","linkInput","selfRef","ignoreLinkToolbarFocusRequirement","menuHasFocus","commandKHandler","inCodeBlock","isOneLineOrLess","isLinkMenuVisible","reset","currentText","toggleLinkMenu","isLinkMenuOpen","escFunction","clearLinkInput","isFormatMenuVisible","cancel","InlineToolbar_extends","prevSelection","pieces_InlineToolbarMenuItems","selectionHasContent","selectionHasLength","addBinding","metaKey","MentionSuggestion","matchedString","mentionData","onMouseEnter","photoUrl","domID","matched","formattedName","piece","Intl","Collator","usage","sensitivity","ignorePunctuation","numeric","compare","aria-selected","src","alt","MentionSuggestionLoading","loadingData","MentionSuggestionSpacer","MentionSuggestionList_MentionSuggestionList","MentionSuggestionList","activeItemId","onItemClick","mentionProps","showLoader","mentionSelection","hasResults","hasFocusedElement","items","mentionProp","loaderID","pieces_MentionSuggestionList","MentionToolbar_MentionToolbar","MentionToolbar","ID","uniqueId_default","comboBoxID","isConvertingMention","MENTION_COMPLETION_CHARACTERS","confirmActiveMention","suggestions","activeSuggestionIndex","activeSuggestionID","status","api","SUCCESS","hasApiResponse","cancelActiveMention","userLength","SUGGESTION_LIMIT","lastIndex_1","currentItemIsLoader","getIDFromIndex","newItemID","setActiveItem","injectComboBoxAccessibility","autoCompleteBlot","injectAccessibilityAttributes","activeItemID","suggestionListID","activeItemIsLoader","onDocumentClick","onTextChange","oldContents","lastOperation","users","lastSuccessfulUsername","MentionToolbar_extends","off","prevMentionSelection","isEqual_default","lookupMentions","isLoading","LOADING","isSuccess","createAutoCompleteBlot","createMentionProps","currentSelection","quill_utility","slice","insertCharacter","activeSuggestion","finalize","mentions","currentUsername","usersTrie","currentNode","getValue","debounce_default","mentionActions","loadUsers","itemID","itemIndex","setActiveSuggestion","ParagraphToolbarMenuItems","formatParagraph","afterClickHandler","formatH2","formatH3","formatBlockquote","formatCodeBlock","formatSpoiler","menuRef","isParagraphEnabled","item","header","ParagraphToolbar_ParagraphToolbar","ParagraphToolbar","pilcrowClickHandler","close","handleDocumentKeyDown","handlePilcrowKeyDown","menuID","buttonID","ParagraphToolbar_extends","newHasFocusState","pilcrowClasses","isMenuVisible","isPilcrowVisible","pilcrowStyles","activeFormatIcon","toolbarClasses","pieces_ParagraphToolbarMenuItems","quill_blots_cursor__WEBPACK_IMPORTED_MODULE_3__","quill_blots_cursor__WEBPACK_IMPORTED_MODULE_3___default","quill_blots_text__WEBPACK_IMPORTED_MODULE_1___default","quill_blots_break__WEBPACK_IMPORTED_MODULE_2___default","quill_formats_code__WEBPACK_IMPORTED_MODULE_0___default","MentionTrie","MAX_PARTIAL_LOOKUP_ITERATIONS","word","i","letter","contents","getNode","char","charAt","getValueFromPartialsOfWord","substring","potentialValue","initialState","mention_MentionTrie","defaultSelection","instanceReducer_initialState","defaultInstance","validateIDExistance","action","idExists","payload","instanceActions","state_editorReducer","redux","shouldKeepPreviousResults","previousSuccessfulName","ERROR","searchName","looseCollator","sort","userA","userB","sortSuggestions","firstUserID","suggestionID","suggestionIndex","instanceReducer_assign","mountEditor","containerSelector","initialFormat","react_dom_default","isPrimaryEditor","reducerRegistry","discussionFormContainer","querySelectorAll","setupEditor","__awaiter","richEditor","setupCommentEditForm","quill_blots_block__WEBPACK_IMPORTED_MODULE_0___default","quill_formats_code__WEBPACK_IMPORTED_MODULE_0__","formats","requiredContainer","removeAttribute","quill_blots_inline__WEBPACK_IMPORTED_MODULE_1___default","WrapperBlot","BLOCK_BLOT","quill_blots_container__WEBPACK_IMPORTED_MODULE_0___default","_abstract_LineBlot__WEBPACK_IMPORTED_MODULE_2__","BlockquoteLineBlot","BlockquoteContentBlot","_abstract_ContentBlot__WEBPACK_IMPORTED_MODULE_1__","BlockquoteWrapperBlot","_abstract_WrapperBlot__WEBPACK_IMPORTED_MODULE_0__","_rich_editor_quill_blots_blocks_CodeBlockBlot__WEBPACK_IMPORTED_MODULE_8__","convertRangeToBoundary","rangeContainsBlot","descendant","disableAllBlotsInRange","currentBlots","firstBlot","lastBlot","finalRange","startRange","endRange","boundary","startBoundary","endBoundary","convertBoundaryToRange","expandRange","quill_core_emitter__WEBPACK_IMPORTED_MODULE_0___default","isBlotFirstInScroll","isFirstBlotInBlot","childBlot","parentBlot","stripFormattingFromFirstBlot","__read","quill_delta__WEBPACK_IMPORTED_MODULE_3___default","insertNewLineAfterBlotAndTrim","deleteAmount","_rich_editor_quill_blots_blocks_BlockBlot__WEBPACK_IMPORTED_MODULE_7__","nextBlot","positionUpToPreviousNewline","deleteDelta","insertNewLineAtEndOfScroll","newLineBlot","quill_core__WEBPACK_IMPORTED_MODULE_1___default","insertNewLineAtStartOfScroll","getBlotAtIndex","blotClass","condition","MIN_MENTION_LENGTH","getMentionRange","leafOffset","getLeaf","leafContentBeforeCursor","leafAtSignIndex","lastIndexOf","mentionIndex","potentialMention","createEditorFlyoutEscapeListener","returnElement","callback","quill_modules_keyboard__WEBPACK_IMPORTED_MODULE_2___default","quillIDMap","Map","getIDForQuill","get","set","lodash_uniqueId__WEBPACK_IMPORTED_MODULE_5___default","insertBlockBlotAt","lineOffset","isEmbedSelected","_rich_editor_quill_blots_abstract_FocusableEmbedBlot__WEBPACK_IMPORTED_MODULE_6__","SELECTION_UPDATE","forceSelectionUpdate","dispatchEvent","CustomEvent","SpoilerButton","SpoilerBlot_SpoilerWrapperBlot","SpoilerLineBlot","SpoilerBlot_extends","SpoilerContentBlot","SpoilerWrapperBlot","components_SpoilerButton","ClassFormatBlot","classMatch","tagMatch","LineBlot_extends","abstract_ClassFormatBlot","_dashboard_types_api__WEBPACK_IMPORTED_MODULE_2__","SET_ACTIVE_SUGGESTION","LOAD_USERS_REQUEST","LOAD_USERS_FAILURE","LOAD_USERS_SUCCESS","USER_LIMIT","actions","loadUsersRequest","_dashboard_state_utility__WEBPACK_IMPORTED_MODULE_0__","loadUsersFailure","loadUsersSuccess","thunks","exactLookup","partialLookup","searchCollator","filter","userSuggestion","suggestionNamePartial","filterSuggestions","PENDING","limit","_dashboard_apiv2__WEBPACK_IMPORTED_MODULE_1__","response","CREATE_INSTANCE","SET_SELECTION","_dashboard_application__WEBPACK_IMPORTED_MODULE_0__","p","_dashboard_dom__WEBPACK_IMPORTED_MODULE_3__","createLinkLoader","createImageLoader","storedValue","_abstract_FocusableEmbedBlot__WEBPACK_IMPORTED_MODULE_1__"],"mappings":"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MQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,MAAOQ,MAAO,IACrBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,QAASQ,MAAO,IACvBR,MAAO,QAASQ,MAAO,IACvBR,MAAO,QAASQ,MAAO,IACvBR,MAAO,QAASQ,MAAO,IACvBR,MAAO,QAASQ,MAAO,IACvBR,MAAO,QAASQ,MAAO,IACvBR,MAAO,QAASQ,MAAO,IACvBR,MAAO,QAASQ,MAAO,IACvBR,MAAO,QAASQ,MAAO,IACvBR,MAAO,QAASQ,MAAO,IACvBR,MAAO,QAASQ,MAAO,IACvBR,MAAO,QAASQ,MAAO,IACvBR,MAAO,QAASQ,MAAO,IACvBR,MAAO,QAASQ,MAAO,IACvBR,MAAO,QAASQ,MAAO,IACvBR,MAAO,QAASQ,MAAO,IACvBR,MAAO,QAASQ,MAAO,IACvBR,MAAO,QAASQ,MAAO,IACvBR,MAAO,QAASQ,MAAO,IACvBR,MAAO,QAASQ,MAAO,IACvBR,MAAO,QAASQ,MAAO,IACvBR,MAAO,QAASQ,MAAO,IACvBR,MAAO,QAASQ,MAAO,IACvBR,MAAO,QAASQ,MAAO,IACvBR,MAAO,QAASQ,MAAO,IACvBR,MAAO,QAASQ,MAAO,IACvBR,MAAO,QAASQ,MAAO,IACvBR,MAAO,QAASQ,MAAO,IACvBR,MAAO,QAASQ,MAAO,IACvBR,MAAO,QAASQ,MAAO,IACvBR,MAAO,QAASQ,MAAO,IACvBR,MAAO,QAASQ,MAAO,IACvBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,QAASQ,MAAO,IACvBR,MAAO,QAASQ,MAAO,IACvBR,MAAO,MAAOQ,MAAO,IACrBR,MAAO,SAAUQ,MAAO,IACxBR,MAAO,SAAUQ,MAAO,IACxBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,QAASQ,MAAO,IACvBR,MAAO,QAASQ,MAAO,IACvBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,QAASQ,MAAO,IACvBR,MAAO,QAASQ,MAAO,IACvBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,QAASQ,MAAO,IACvBR,MAAO,QAASQ,MAAO,IACvBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,QAASQ,MAAO,IACvBR,MAAO,QAASQ,MAAO,IACvBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,QAASQ,MAAO,IACvBR,MAAO,QAASQ,MAAO,IACvBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,QAASQ,MAAO,IACvBR,MAAO,QAASQ,MAAO,IACvBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,QAASQ,MAAO,IACvBR,MAAO,QAASQ,MAAO,IACvBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,QAASQ,MAAO,IACvBR,MAAO,QAASQ,MAAO,IACvBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,QAASQ,MAAO,IACvBR,MAAO,QAASQ,MAAO,IACvBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,QAASQ,MAAO,IACvBR,MAAO,QAASQ,MAAO,IACvBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,QAASQ,MAAO,IACvBR,MAAO,QAASQ,MAAO,IACvBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,QAASQ,MAAO,IACvBR,MAAO,QAASQ,MAAO,IACvBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,QAASQ,MAAO,IACvBR,MAAO,QAASQ,MAAO,IACvBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,QAASQ,MAAO,IACvBR,MAAO,QAASQ,MAAO,IACvBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,QAASQ,MAAO,IACvBR,MAAO,QAASQ,MAAO,IACvBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,QAASQ,MAAO,IACvBR,MAAO,QAASQ,MAAO,IACvBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,QAASQ,MAAO,IACvBR,MAAO,QAASQ,MAAO,IACvBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,QAASQ,MAAO,IACvBR,MAAO,QAASQ,MAAO,IACvBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,QAASQ,MAAO,IACvBR,MAAO,QAASQ,MAAO,IACvBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,QAASQ,MAAO,IACvBR,MAAO,QAASQ,MAAO,IACvBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,QAASQ,MAAO,IACvBR,MAAO,QAASQ,MAAO,IACvBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,QAASQ,MAAO,IACvBR,MAAO,QAASQ,MAAO,IACvBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,QAASQ,MAAO,IACvBR,MAAO,QAASQ,MAAO,IACvBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,QAASQ,MAAO,IACvBR,MAAO,QAASQ,MAAO,IACvBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,QAASQ,MAAO,IACvBR,MAAO,QAASQ,MAAO,IACvBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,QAASQ,MAAO,IACvBR,MAAO,QAASQ,MAAO,IACvBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,QAASQ,MAAO,IACvBR,MAAO,QAASQ,MAAO,IACvBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,QAASQ,MAAO,IACvBR,MAAO,QAASQ,MAAO,IACvBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,MAAOQ,MAAO,IACrBR,MAAO,MAAOQ,MAAO,IACrBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,MAAOQ,MAAO,IACrBR,MAAO,MAAOQ,MAAO,IACrBR,MAAO,SAAUQ,MAAO,IACxBR,MAAO,SAAUQ,MAAO,IACxBR,MAAO,MAAOQ,MAAO,IACrBR,MAAO,QAASQ,MAAO,IACvBR,MAAO,QAASQ,MAAO,IACvBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,QAASQ,MAAO,IACvBR,MAAO,QAASQ,MAAO,IACvBR,MAAO,MAAOQ,MAAO,IACrBR,MAAO,QAASQ,MAAO,IACvBR,MAAO,QAASQ,MAAO,IACvBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,QAASQ,MAAO,IACvBR,MAAO,QAASQ,MAAO,IACvBR,MAAO,MAAOQ,MAAO,IACrBR,MAAO,SAAUQ,MAAO,IACxBR,MAAO,SAAUQ,MAAO,IACxBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,QAASQ,MAAO,IACvBR,MAAO,QAASQ,MAAO,IACvBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,QAASQ,MAAO,IACvBR,MAAO,QAASQ,MAAO,IACvBR,MAAO,MAAOQ,MAAO,IACrBR,MAAO,MAAOQ,MAAO,IACrBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,QAASQ,MAAO,IACvBR,MAAO,QAASQ,MAAO,IACvBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,QAASQ,MAAO,IACvBR,MAAO,QAASQ,MAAO,IACvBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,QAASQ,MAAO,IACvBR,MAAO,QAASQ,MAAO,IACvBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,QAASQ,MAAO,IACvBR,MAAO,QAASQ,MAAO,IACvBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,QAASQ,MAAO,IACvBR,MAAO,QAASQ,MAAO,IACvBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,cAAeQ,MAAO,IAC7BR,MAAO,cAAeQ,MAAO,IAC7BR,MAAO,cAAeQ,MAAO,IAC7BR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,WAAYQ,MAAO,IAC1BR,MAAO,WAAYQ,MAAO,IAC1BR,MAAO,WAAYQ,MAAO,IAC1BR,MAAO,MAAOQ,MAAO,IACrBR,MAAO,WAAYQ,MAAO,IAC1BR,MAAO,WAAYQ,MAAO,IAC1BR,MAAO,cAAeQ,MAAO,IAC7BR,MAAO,cAAeQ,MAAO,IAC7BR,MAAO,cAAeQ,MAAO,IAC7BR,MAAO,WAAYQ,MAAO,IAC1BR,MAAO,WAAYQ,MAAO,IAC1BR,MAAO,cAAeQ,MAAO,IAC7BR,MAAO,cAAeQ,MAAO,IAC7BR,MAAO,cAAeQ,MAAO,IAC7BR,MAAO,WAAYQ,MAAO,IAC1BR,MAAO,WAAYQ,MAAO,IAC1BR,MAAO,cAAeQ,MAAO,IAC7BR,MAAO,cAAeQ,MAAO,IAC7BR,MAAO,cAAeQ,MAAO,IAC7BR,MAAO,QAASQ,MAAO,IACvBR,MAAO,WAAYQ,MAAO,IAC1BR,MAAO,QAASQ,MAAO,IACvBR,MAAO,WAAYQ,MAAO,IAC1BR,MAAO,WAAYQ,MAAO,IAC1BR,MAAO,QAASQ,MAAO,IACvBR,MAAO,WAAYQ,MAAO,IAC1BR,MAAO,QAASQ,MAAO,IACvBR,MAAO,WAAYQ,MAAO,IAC1BR,MAAO,WAAYQ,MAAO,IAC1BR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,MAAOQ,MAAO,IACrBR,MAAO,MAAOQ,MAAO,IACrBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,MAAOQ,MAAO,IACrBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,MAAOQ,MAAO,IACrBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,MAAOQ,MAAO,IACrBR,MAAO,IAAKQ,MAAO,IACnBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,MAAOQ,MAAO,IACrBR,MAAO,MAAOQ,MAAO,IACrBR,MAAO,IAAKQ,MAAO,IACnBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,MAAOQ,MAAO,IACrBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,MAAOQ,MAAO,IACrBR,MAAO,UAAWQ,MAAO,IACzBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,MAAOQ,MAAO,IACrBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,MAAOQ,MAAO,IACrBR,MAAO,MAAOQ,MAAO,IACrBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,MAAOQ,MAAO,IACrBR,MAAO,MAAOQ,MAAO,IACrBR,MAAO,MAAOQ,MAAO,IACrBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,MAAOQ,MAAO,IACrBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,MAAOQ,MAAO,IACrBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,MAAOQ,MAAO,IACrBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,MAAOQ,MAAO,IACrBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,MAAOQ,MAAO,IACrBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,MAAOQ,MAAO,IACrBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,MAAOQ,MAAO,IACrBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,MAAOQ,MAAO,IACrBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,MAAOQ,MAAO,IACrBR,MAAO,MAAOQ,MAAO,IACrBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,MAAOQ,MAAO,IACrBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,MAAOQ,MAAO,IACrBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,MAAOQ,MAAO,IACrBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,MAAOQ,MAAO,IACrBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,MAAOQ,MAAO,IACrBR,MAAO,MAAOQ,MAAO,IACrBR,MAAO,MAAOQ,MAAO,IACrBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,MAAOQ,MAAO,IACrBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,MAAOQ,MAAO,IACrBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,MAAOQ,MAAO,IACrBR,MAAO,MAAOQ,MAAO,IACrBR,MAAO,MAAOQ,MAAO,IACrBR,MAAO,MAAOQ,MAAO,IACrBR,MAAO,MAAOQ,MAAO,IACrBR,MAAO,MAAOQ,MAAO,IACrBR,MAAO,MAAOQ,MAAO,IACrBR,MAAO,MAAOQ,MAAO,IACrBR,MAAO,MAAOQ,MAAO,IACrBR,MAAO,MAAOQ,MAAO,IACrBR,MAAO,MAAOQ,MAAO,IACrBR,MAAO,MAAOQ,MAAO,IACrBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,MAAOQ,MAAO,IACrBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,MAAOQ,MAAO,IACrBR,MAAO,MAAOQ,MAAO,IACrBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,MAAOQ,MAAO,IACrBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,MAAOQ,MAAO,IACrBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,MAAOQ,MAAO,IACrBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,MAAOQ,MAAO,IACrBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,MAAOQ,MAAO,IACrBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,MAAOQ,MAAO,IACrBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,MAAOQ,MAAO,IACrBR,MAAO,MAAOQ,MAAO,IACrBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,MAAOQ,MAAO,IACrBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,MAAOQ,MAAO,IACrBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,MAAOQ,MAAO,IACrBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,MAAOQ,MAAO,IACrBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,MAAOQ,MAAO,IACrBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,MAAOQ,MAAO,IACrBR,MAAO,MAAOQ,MAAO,IACrBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,IAAKQ,MAAO,IACnBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,MAAOQ,MAAO,IACrBR,MAAO,MAAOQ,MAAO,IACrBR,MAAO,MAAOQ,MAAO,IACrBR,MAAO,MAAOQ,MAAO,IACrBR,MAAO,MAAOQ,MAAO,IACrBR,MAAO,MAAOQ,MAAO,IACrBR,MAAO,MAAOQ,MAAO,IACrBR,MAAO,MAAOQ,MAAO,IACrBR,MAAO,MAAOQ,MAAO,IACrBR,MAAO,MAAOQ,MAAO,IACrBR,MAAO,MAAOQ,MAAO,IACrBR,MAAO,MAAOQ,MAAO,IACrBR,MAAO,MAAOQ,MAAO,IACrBR,MAAO,MAAOQ,MAAO,IACrBR,MAAO,MAAOQ,MAAO,IACrBR,MAAO,MAAOQ,MAAO,IACrBR,MAAO,MAAOQ,MAAO,IACrBR,MAAO,MAAOQ,MAAO,IACrBR,MAAO,MAAOQ,MAAO,IACrBR,MAAO,MAAOQ,MAAO,IACrBR,MAAO,MAAOQ,MAAO,IACrBR,MAAO,MAAOQ,MAAO,IACrBR,MAAO,MAAOQ,MAAO,IACrBR,MAAO,MAAOQ,MAAO,IACrBR,MAAO,MAAOQ,MAAO,IACrBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,MAAOQ,MAAO,IACrBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,MAAOQ,MAAO,IACrBR,MAAO,MAAOQ,MAAO,IACrBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,MAAOQ,MAAO,IACrBR,MAAO,MAAOQ,MAAO,IACrBR,MAAO,MAAOQ,MAAO,IACrBR,MAAO,MAAOQ,MAAO,IACrBR,MAAO,MAAOQ,MAAO,IACrBR,MAAO,MAAOQ,MAAO,IACrBR,MAAO,MAAOQ,MAAO,IACrBR,MAAO,MAAOQ,MAAO,IACrBR,MAAO,MAAOQ,MAAO,IACrBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,IAAKQ,MAAO,IACnBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,MAAOQ,MAAO,IACrBR,MAAO,MAAOQ,MAAO,IACrBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,MAAOQ,MAAO,IACrBR,MAAO,MAAOQ,MAAO,IACrBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,MAAOQ,MAAO,IACrBR,MAAO,MAAOQ,MAAO,IACrBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,MAAOQ,MAAO,IACrBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,MAAOQ,MAAO,IACrBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,MAAOQ,MAAO,IACrBR,MAAO,MAAOQ,MAAO,IACrBR,MAAO,MAAOQ,MAAO,IACrBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,MAAOQ,MAAO,IACrBR,MAAO,MAAOQ,MAAO,IACrBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,MAAOQ,MAAO,IACrBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,MAAOQ,MAAO,IACrBR,MAAO,MAAOQ,MAAO,IACrBR,MAAO,MAAOQ,MAAO,IACrBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,MAAOQ,MAAO,IACrBR,MAAO,MAAOQ,MAAO,IACrBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,MAAOQ,MAAO,IACrBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,MAAOQ,MAAO,IACrBR,MAAO,MAAOQ,MAAO,IACrBR,MAAO,MAAOQ,MAAO,IACrBR,MAAO,MAAOQ,MAAO,IACrBR,MAAO,MAAOQ,MAAO,IACrBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,MAAOQ,MAAO,IACrBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,MAAOQ,MAAO,IACrBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,MAAOQ,MAAO,IACrBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,MAAOQ,MAAO,IACrBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,MAAOQ,MAAO,IACrBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,MAAOQ,MAAO,IACrBR,MAAO,MAAOQ,MAAO,IACrBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,MAAOQ,MAAO,IACrBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,MAAOQ,MAAO,IACrBR,MAAO,MAAOQ,MAAO,IACrBR,MAAO,MAAOQ,MAAO,IACrBR,MAAO,MAAOQ,MAAO,IACrBR,MAAO,MAAOQ,MAAO,IACrBR,MAAO,MAAOQ,MAAO,IACrBR,MAAO,MAAOQ,MAAO,IACrBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,MAAOQ,MAAO,IACrBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,MAAOQ,MAAO,IACrBR,MAAO,MAAOQ,MAAO,IACrBR,MAAO,MAAOQ,MAAO,IACrBR,MAAO,MAAOQ,MAAO,IACrBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,MAAOQ,MAAO,IACrBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,MAAOQ,MAAO,IACrBR,MAAO,MAAOQ,MAAO,IACrBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,MAAOQ,MAAO,IACrBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,MAAOQ,MAAO,IACrBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,MAAOQ,MAAO,IACrBR,MAAO,MAAOQ,MAAO,IACrBR,MAAO,MAAOQ,MAAO,IACrBR,MAAO,MAAOQ,MAAO,IACrBR,MAAO,MAAOQ,MAAO,IACrBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,MAAOQ,MAAO,IACrBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,MAAOQ,MAAO,IACrBR,MAAO,MAAOQ,MAAO,IACrBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,MAAOQ,MAAO,IACrBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,MAAOQ,MAAO,IACrBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,MAAOQ,MAAO,IACrBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,MAAOQ,MAAO,IACrBR,MAAO,MAAOQ,MAAO,IACrBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,MAAOQ,MAAO,IACrBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,MAAOQ,MAAO,IACrBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,MAAOQ,MAAO,IACrBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,IAAKQ,MAAO,IACnBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,IAAKQ,MAAO,IACnBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,IAAKQ,MAAO,IACnBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,IAAKQ,MAAO,IACnBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,IAAKQ,MAAO,IACnBR,MAAO,IAAKQ,MAAO,IACnBR,MAAO,IAAKQ,MAAO,IACnBR,MAAO,IAAKQ,MAAO,IACnBR,MAAO,IAAKQ,MAAO,IACnBR,MAAO,IAAKQ,MAAO,IACnBR,MAAO,IAAKQ,MAAO,IACnBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,IAAKQ,MAAO,IACnBR,MAAO,IAAKQ,MAAO,IACnBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,MAAOQ,MAAO,IACrBR,MAAO,MAAOQ,MAAO,IACrBR,MAAO,MAAOQ,MAAO,IACrBR,MAAO,MAAOQ,MAAO,IACrBR,MAAO,MAAOQ,MAAO,IACrBR,MAAO,MAAOQ,MAAO,IACrBR,MAAO,MAAOQ,MAAO,IACrBR,MAAO,MAAOQ,MAAO,IACrBR,MAAO,MAAOQ,MAAO,IACrBR,MAAO,MAAOQ,MAAO,IACrBR,MAAO,MAAOQ,MAAO,IACrBR,MAAO,MAAOQ,MAAO,IACrBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,MAAOQ,MAAO,IACrBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,MAAOQ,MAAO,IACrBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,MAAOQ,MAAO,IACrBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,MAAOQ,MAAO,IACrBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,MAAOQ,MAAO,IACrBR,MAAO,MAAOQ,MAAO,IACrBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,MAAOQ,MAAO,IACrBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,MAAOQ,MAAO,IACrBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,KAAMQ,MAAO,IACpBR,MAAO,MAAOQ,MAAO,IACrBR,MAAO,SAAUQ,MAAO,IACxBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQQ,MAAO,IACtBR,MAAO,OAAQ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","file":"/plugins/rich-editor/js/webpack/forum.min.js","sourcesContent":["/**\n * @author Stéphane (slafleche) LaFlèche <stephane.l@vanillaforums.com>\n * @copyright 2009-2018 Vanilla Forums Inc.\n * @license https://opensource.org/licenses/GPL-2.0 GPL-2.0\n */\n\nimport FocusableEmbedBlot from \"../abstract/FocusableEmbedBlot\";\nimport { t } from \"@dashboard/application\";\nimport uniqueId from \"lodash/uniqueId\";\nimport { FOCUS_CLASS } from \"@dashboard/embeds\";\n\n/**\n * A full error. Non-recoverable. A form should not be submitted while one of these is present.\n */\nexport default class ErrorBlot extends FocusableEmbedBlot {\n    public static blotName = \"embed-error\";\n    public static className = \"embed-error\";\n    public static tagName = \"div\";\n\n    public static create(data) {\n        const node = super.create(data) as HTMLElement;\n        node.classList.add(\"js-embed\");\n        const descriptionId = uniqueId(\"embedLoader-description\");\n        node.classList.remove(FOCUS_CLASS);\n\n        const error = document.createElement(\"div\");\n        error.classList.add(\"embedLoader-error\");\n        error.classList.add(FOCUS_CLASS);\n        error.setAttribute(\"aria-describedby\", descriptionId);\n        error.setAttribute(\"aria-label\", t(\"Error\"));\n        error.setAttribute(\"role\", \"alert\");\n\n        error.setAttribute(\"aria-live\", \"assertive\");\n        error.innerHTML = `<svg class=\"embedLoader-icon embedLoader-warningIcon\" aria-hidden=\"true\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n                            <path d=\"M11.651,3.669,2.068,21.75H21.234Zm.884-1,10,18.865A1,1,0,0,1,21.649,23h-20a1,1,0,0,1-.884-1.468l10-18.865a1,1,0,0,1,1.768,0Zm.231,13.695H10.547L10.2,10h2.9Zm-2.535,2.354a1.24,1.24,0,0,1,.363-.952,1.493,1.493,0,0,1,1.056-.34,1.445,1.445,0,0,1,1.039.34,1.26,1.26,0,0,1,.353.952,1.223,1.223,0,0,1-.366.944A1.452,1.452,0,0,1,11.65,20a1.5,1.5,0,0,1-1.042-.34A1.206,1.206,0,0,1,10.231,18.716Z\" style=\"fill: currentColor;\"/>\n                        </svg>\n                        <span class=\"embedLoader-errorMessage\" id=\"${descriptionId}\">${data.message}</span>\n                        <button type=\"button\" class=\"closeButton js-closeEmbedError\" aria-hidden=\"true\" tabindex=\"-1\">\n                            <svg class=\"embedLoader-icon\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n                                <path fill=\"currentColor\" d=\"M12,10.6293581 L5.49002397,4.11938207 C5.30046135,3.92981944 4.95620859,3.96673045 4.69799105,4.22494799 L4.22494799,4.69799105 C3.97708292,4.94585613 3.92537154,5.29601344 4.11938207,5.49002397 L10.6293581,12 L4.11938207,18.509976 C3.92981944,18.6995387 3.96673045,19.0437914 4.22494799,19.3020089 L4.69799105,19.775052 C4.94585613,20.0229171 5.29601344,20.0746285 5.49002397,19.8806179 L12,13.3706419 L18.509976,19.8806179 C18.6995387,20.0701806 19.0437914,20.0332695 19.3020089,19.775052 L19.775052,19.3020089 C20.0229171,19.0541439 20.0746285,18.7039866 19.8806179,18.509976 L13.3706419,12 L19.8806179,5.49002397 C20.0701806,5.30046135 20.0332695,4.95620859 19.775052,4.69799105 L19.3020089,4.22494799 C19.0541439,3.97708292 18.7039866,3.92537154 18.509976,4.11938207 L12,10.6293581 Z\"/>\n                            </svg>\n                        </button>\n                    </div>`;\n\n        node.appendChild(error);\n        return node;\n    }\n\n    public static value(domNode: HTMLElement) {\n        const messageNode = domNode.querySelector(\".embedLoader-errorMessage\");\n        return {\n            message: messageNode ? messageNode.textContent : t(\"Error could not be found\"),\n        };\n    }\n\n    constructor(domNode: HTMLElement) {\n        super(domNode);\n\n        const closeButton = domNode.querySelector(\".js-closeEmbedError\");\n        if (closeButton instanceof HTMLElement) {\n            closeButton.addEventListener(\"click\", () => {\n                this.remove();\n            });\n        }\n    }\n}\n","/**\n * @author Adam (charrondev) Charron <adam.c@vanillaforums.com>\n * @copyright 2009-2018 Vanilla Forums Inc.\n * @license https://opensource.org/licenses/GPL-2.0 GPL-2.0\n */\n\nimport React from \"react\";\nimport classNames from \"classnames\";\nimport { t } from \"@dashboard/application\";\n\ninterface IState {\n    id: string;\n    descriptionID?: string;\n    titleID: string;\n}\n\ninterface IProps {\n    id: string;\n    titleID: string;\n    descriptionID?: string;\n    title: string;\n    accessibleDescription?: string;\n    isVisible: boolean;\n    body: JSX.Element;\n    footer?: JSX.Element;\n    additionalHeaderContent?: JSX.Element;\n    alertMessage?: string;\n    additionalClassRoot?: string;\n    className?: string;\n    titleRef?: React.Ref<any>;\n    onCloseClick(event?: React.MouseEvent<any>);\n}\n\nexport default class Popover extends React.Component<IProps, IState> {\n    constructor(props) {\n        super(props);\n        this.state = {\n            id: props.id,\n            descriptionID: props.descriptionID,\n            titleID: props.titleID,\n        };\n    }\n\n    public render() {\n        const { additionalClassRoot } = this.props;\n\n        let classes = classNames(\"richEditor-menu\", \"richEditorFlyout\", {\n            [additionalClassRoot as any]: !!additionalClassRoot,\n            isHidden: !this.props.isVisible,\n        });\n\n        classes += this.props.className ? ` ${this.props.className}` : \"\";\n\n        const headerClasses = classNames(\"richEditorFlyout-header\", {\n            [additionalClassRoot + \"-header\"]: !!additionalClassRoot,\n        });\n\n        const bodyClasses = classNames(\"richEditorFlyout-body\", {\n            [additionalClassRoot + \"-body\"]: !!additionalClassRoot,\n        });\n\n        const footerClasses = classNames(\"richEditorFlyout-footer\", {\n            [additionalClassRoot + \"-footer\"]: !!additionalClassRoot,\n        });\n\n        const alertMessage = this.props.alertMessage ? (\n            <span aria-live=\"assertive\" role=\"alert\" className=\"sr-only\">\n                {this.props.alertMessage}\n            </span>\n        ) : null;\n\n        const screenReaderDescription = this.props.accessibleDescription ? (\n            <div id={this.state.descriptionID} className=\"sr-only\">\n                {this.props.accessibleDescription}\n            </div>\n        ) : null;\n\n        return (\n            <div\n                id={this.state.id}\n                aria-describedby={this.state.descriptionID}\n                aria-labelledby={this.state.titleID}\n                className={classes}\n                role=\"dialog\"\n                aria-hidden={!this.props.isVisible}\n            >\n                {alertMessage}\n                <div className={headerClasses}>\n                    <h2\n                        id={this.props.titleID}\n                        tabIndex={-1}\n                        className=\"richEditorFlyout-title\"\n                        ref={this.props.titleRef}\n                    >\n                        {this.props.title}\n                    </h2>\n                    {screenReaderDescription}\n                    <button type=\"button\" onClick={this.props.onCloseClick} className=\"Close richEditor-close\">\n                        <span className=\"Close-x\" aria-hidden=\"true\">\n                            {t(\"×\")}\n                        </span>\n                        <span className=\"sr-only\">{t(\"Close\")}</span>\n                    </button>\n\n                    {this.props.additionalHeaderContent && this.props.additionalHeaderContent}\n                </div>\n\n                <div className={bodyClasses}>{this.props.body && this.props.body}</div>\n\n                <div className={footerClasses}>{this.props.footer && this.props.footer}</div>\n            </div>\n        );\n    }\n}\n","/**\n * @author Adam (charrondev) Charron <adam.c@vanillaforums.com>\n * @copyright 2009-2018 Vanilla Forums Inc.\n * @license https://opensource.org/licenses/GPL-2.0 GPL-2.0\n */\n\nimport React from \"react\";\nimport { withEditor, IWithEditorProps } from \"@rich-editor/components/context\";\nimport { getRequiredID } from \"@dashboard/componentIDs\";\nimport { watchFocusInDomTree } from \"@dashboard/dom\";\nimport { createEditorFlyoutEscapeListener, forceSelectionUpdate } from \"@rich-editor/quill/utility\";\nimport classNames from \"classnames\";\n\nexport interface IPopoverControllerChildParameters {\n    id: string;\n    initialFocusRef: React.RefObject<any>;\n    isVisible: boolean;\n    closeMenuHandler(event?: React.SyntheticEvent<any>);\n}\n\ninterface IProps {\n    id: string;\n    classNameRoot: string;\n    icon: JSX.Element;\n    children: (props: IPopoverControllerChildParameters) => JSX.Element;\n    onClose?: () => void;\n}\n\ninterface IState {\n    id: string;\n    isVisible: boolean;\n}\n\nexport default class PopoverController extends React.PureComponent<IProps, IState> {\n    private initalFocusRef: React.RefObject<any>;\n    private buttonRef: React.RefObject<HTMLButtonElement>;\n    private controllerRef: React.RefObject<HTMLDivElement>;\n\n    constructor(props) {\n        super(props);\n        this.controllerRef = React.createRef();\n        this.initalFocusRef = React.createRef();\n        this.buttonRef = React.createRef();\n\n        this.state = {\n            id: getRequiredID(props, \"popover\"),\n            isVisible: false,\n        };\n    }\n\n    get componentID(): string {\n        return this.state.id + \"-contents\";\n    }\n\n    public render() {\n        const buttonClasses = classNames(\"richEditor-button\", \"richEditor-embedButton\", {\n            isOpen: this.state.isVisible,\n        });\n\n        return (\n            <div className={this.props.classNameRoot} ref={this.controllerRef}>\n                <button\n                    id={this.state.id}\n                    onClick={this.togglePopover}\n                    className={buttonClasses}\n                    type=\"button\"\n                    aria-controls={this.componentID}\n                    aria-expanded={this.state.isVisible}\n                    aria-haspopup=\"true\"\n                    ref={this.buttonRef}\n                >\n                    {this.props.icon}\n                </button>\n                {this.props.children({\n                    id: this.componentID,\n                    initialFocusRef: this.initalFocusRef,\n                    isVisible: this.state.isVisible,\n                    closeMenuHandler: this.closeMenuHandler,\n                })}\n            </div>\n        );\n    }\n\n    public componentDidUpdate(prevProps: IProps, prevState: IState) {\n        if (!prevState.isVisible && this.state.isVisible) {\n            if (this.initalFocusRef.current) {\n                this.initalFocusRef.current.focus();\n                forceSelectionUpdate();\n            } else if (this.buttonRef.current) {\n                this.buttonRef.current.focus();\n                forceSelectionUpdate();\n            }\n        }\n    }\n\n    public componentDidMount() {\n        watchFocusInDomTree(this.controllerRef.current!, this.handleFocusChange);\n        createEditorFlyoutEscapeListener(this.controllerRef.current!, this.buttonRef.current!, this.closeMenuHandler);\n    }\n\n    private handleFocusChange = hasFocus => {\n        if (!hasFocus) {\n            this.setState({ isVisible: false });\n        }\n    };\n\n    /**\n     * Toggle Menu menu\n     */\n    private togglePopover = () => {\n        this.setState((prevState: IState) => {\n            return { isVisible: !prevState.isVisible };\n        });\n    };\n\n    /**\n     * Closes menu\n     * @param event - The fired event. This could be a custom event.\n     */\n    private closeMenuHandler = event => {\n        if (event.detail && event.detail.firingKey && event.detail.firingKey === this.constructor.name) {\n            return;\n        }\n\n        this.props.onClose && this.props.onClose();\n\n        const { activeElement } = document;\n        const parentElement = this.controllerRef.current;\n\n        this.setState({\n            isVisible: false,\n        });\n\n        if (parentElement && parentElement.contains(activeElement)) {\n            this.buttonRef.current && this.buttonRef.current.focus();\n        }\n    };\n}\n","/**\n * @author Adam (charrondev) Charron <adam.c@vanillaforums.com>\n * @copyright 2009-2018 Vanilla Forums Inc.\n * @license https://opensource.org/licenses/GPL-2.0 GPL-2.0\n */\n\nimport React from \"react\";\nimport debounce from \"lodash/debounce\";\nimport Quill, { RangeStatic, BoundsStatic } from \"quill/core\";\nimport { withEditor, IWithEditorProps } from \"@rich-editor/components/context\";\n\ninterface IXCoordinates {\n    position: number;\n    nubPosition?: number;\n}\n\ninterface IYCoordinates {\n    position: number;\n    nubPosition?: number;\n    nubPointsDown?: boolean;\n}\n\ninterface IParameters {\n    x: IXCoordinates | null;\n    y: IYCoordinates | null;\n}\n\ntype HorizontalAlignment = \"center\" | \"start\";\ntype VerticalAlignment = \"above\" | \"below\";\n\ninterface IProps extends IWithEditorProps {\n    children: (params: IParameters) => JSX.Element;\n    selectionTransformer?: (selection: RangeStatic) => RangeStatic | null;\n    flyoutHeight: number | null;\n    flyoutWidth: number | null;\n    nubHeight?: number | null;\n    horizontalAlignment?: HorizontalAlignment;\n    verticalAlignment?: VerticalAlignment;\n    isActive: boolean;\n    selectionIndex: number | null;\n    selectionLength: number | null;\n}\n\ninterface IState {\n    quillWidth: number;\n}\n\nclass ToolbarPositioner extends React.Component<IProps, IState> {\n    private quill: Quill;\n\n    constructor(props) {\n        super(props);\n\n        // Quill can directly on the class as it won't ever change in a single instance.\n        this.quill = props.quill;\n\n        this.state = {\n            quillWidth: this.quill.root.offsetWidth,\n        };\n    }\n\n    /**\n     * This component is particularly performance sensitive (the calculations for a re-render are very expensive).\n     *\n     * This implementation should behave like PureComponent.prototype.shouldComponentUpdate() except\n     * - It will not recognize changes in selection index when the component is not active.\n     */\n    public shouldComponentUpdate(nextProps: IProps, nextState) {\n        const splitProps = this.extractValuesFromProps(this.props);\n        const splitNextProps = this.extractValuesFromProps(nextProps);\n\n        let shouldUpdate = false;\n\n        if (nextProps.isActive && splitProps.selectionIndex !== splitNextProps.selectionIndex) {\n            shouldUpdate = true;\n        }\n\n        if (nextProps.isActive && splitProps.selectionLength !== splitNextProps.selectionLength) {\n            shouldUpdate = true;\n        }\n\n        for (const key of Object.keys(splitProps.otherProps)) {\n            if (splitProps.otherProps[key] !== splitNextProps.otherProps[key]) {\n                shouldUpdate = true;\n            }\n        }\n\n        if (this.state.quillWidth !== nextState.quillWidth) {\n            shouldUpdate = true;\n        }\n\n        return shouldUpdate;\n    }\n\n    public render() {\n        const params = this.props.isActive\n            ? {\n                  x: this.getXCoordinates(),\n                  y: this.getYCoordinates(),\n              }\n            : {\n                  x: null,\n                  y: null,\n              };\n\n        return this.props.children(params);\n    }\n\n    /**\n     * Mount quill listeners.\n     */\n    public componentDidMount() {\n        window.addEventListener(\"resize\", this.windowResizeListener);\n    }\n\n    /**\n     * Be sure to remove the listeners when the component unmounts.\n     */\n    public componentWillUnmount() {\n        window.removeEventListener(\"resize\", this.windowResizeListener);\n    }\n\n    private extractValuesFromProps(props: IProps) {\n        const { selectionIndex, selectionLength, ...otherProps } = props;\n        return {\n            selectionIndex,\n            selectionLength,\n            otherProps,\n        };\n    }\n\n    /**\n     * Force update on window resize.\n     */\n    private windowResizeListener = () => {\n        const debouncedWidthUpdate = debounce(() => {\n            this.setState({ quillWidth: this.quill.root.offsetWidth });\n        }, 200);\n        debouncedWidthUpdate();\n    };\n\n    /**\n     * Get the bounds for the current range.\n     *\n     * @returns The current quill bounds.\n     */\n    private getBounds(): BoundsStatic | null {\n        const { selectionIndex, selectionLength } = this.props;\n        if (selectionIndex === null || selectionLength === null) {\n            return null;\n        }\n\n        const numLines = this.quill.getLines(selectionIndex, selectionLength);\n        let bounds;\n\n        if (numLines.length <= 1) {\n            bounds = this.quill.getBounds(selectionIndex, selectionLength);\n        } else {\n            // If multi-line we want to position at the center of the last line's selection.\n            const lastLine = numLines[numLines.length - 1];\n            const index = this.quill.getIndex(lastLine);\n            const length = Math.min(lastLine.length() - 1, selectionIndex + selectionLength - index);\n            bounds = this.quill.getBounds(index, length);\n        }\n\n        return bounds;\n    }\n\n    /**\n     * Calculate the X coordinates for the toolbar and it's nub.\n     */\n    private getXCoordinates(): IXCoordinates | null {\n        const bounds = this.getBounds();\n        if (!bounds || !this.props.flyoutWidth) {\n            return null;\n        }\n\n        const quillWidth = this.state.quillWidth;\n        const { flyoutWidth } = this.props;\n\n        const start = bounds.left;\n        const end = bounds.right;\n\n        const alignment = this.props.horizontalAlignment || \"center\";\n        if (alignment === \"center\") {\n            const padding = -6;\n\n            const halfToolbarSize = flyoutWidth / 2;\n            const min = halfToolbarSize + padding;\n            const max = quillWidth - halfToolbarSize - padding;\n            const averageOffset = Math.round((start + end) / 2);\n\n            const position = Math.max(min, Math.min(max, averageOffset)) - halfToolbarSize;\n            const nubPosition = averageOffset - position;\n\n            return {\n                position,\n                nubPosition,\n            };\n        } else {\n            const inset = 6;\n            const min = start;\n            const max = quillWidth - flyoutWidth - inset;\n            const position = Math.min(max, Math.max(min, start));\n\n            return {\n                position,\n                nubPosition: position,\n            };\n        }\n    }\n\n    /**\n     * Calculate the Y coordinates for the toolbar and it's nub.\n     */\n    private getYCoordinates(): IYCoordinates | null {\n        const bounds = this.getBounds();\n        if (!bounds || !this.props.flyoutHeight) {\n            return null;\n        }\n\n        const { flyoutHeight, nubHeight, verticalAlignment } = this.props;\n\n        const offset = 0;\n        let position = bounds.top - flyoutHeight - offset;\n        let nubPosition = flyoutHeight;\n        let nubPointsDown = true;\n\n        const isNearStart = bounds.top < 30;\n        if (isNearStart || verticalAlignment === \"below\") {\n            position = bounds.bottom + offset;\n\n            if (nubHeight) {\n                nubPosition = 0 - nubHeight / 2;\n                nubPointsDown = false;\n            }\n        }\n\n        return {\n            position,\n            nubPosition,\n            nubPointsDown,\n        };\n    }\n}\n\nexport default withEditor<IProps>(ToolbarPositioner);\n","/**\n * @author Adam (charrondev) Charron <adam.c@vanillaforums.com>\n * @copyright 2009-2018 Vanilla Forums Inc.\n * @license https://opensource.org/licenses/GPL-2.0 GPL-2.0\n */\n\nimport Quill from \"quill/core\";\nimport LinkBlot from \"quill/formats/link\";\nimport BoldBlot from \"quill/formats/bold\";\nimport ItalicBlot from \"quill/formats/italic\";\nimport StrikeBlot from \"quill/formats/strike\";\nimport { rangeContainsBlot, disableAllBlotsInRange } from \"@rich-editor/quill/utility\";\nimport CodeBlot from \"@rich-editor/quill/blots/inline/CodeBlot\";\nimport CodeBlockBlot from \"@rich-editor/quill/blots/blocks/CodeBlockBlot\";\nimport BlockquoteLineBlot from \"@rich-editor/quill/blots/blocks/BlockquoteBlot\";\nimport SpoilerLineBlot from \"@rich-editor/quill/blots/blocks/SpoilerBlot\";\nimport HeadingBlot from \"quill/formats/header\";\nimport { Blot, RangeStatic } from \"quill/core\";\nimport Embed from \"quill/blots/embed\";\n\nexport default class Formatter {\n    public static INLINE_FORMAT_NAMES = [\n        BoldBlot.blotName,\n        ItalicBlot.blotName,\n        StrikeBlot.blotName,\n        CodeBlot.blotName,\n        LinkBlot.blotName,\n    ];\n\n    public static BLOCK_FORMAT_NAMES = [\n        CodeBlockBlot.blotName,\n        BlockquoteLineBlot.blotName,\n        SpoilerLineBlot.blotName,\n        HeadingBlot.blotName,\n    ];\n\n    constructor(private quill: Quill) {}\n\n    /**\n     * Apply the bold format to a range.\n     */\n    public bold = (range: RangeStatic) => {\n        this.handleInlineFormat(range, BoldBlot.blotName);\n    };\n\n    /**\n     * Apply the italic format to a range.\n     */\n    public italic = (range: RangeStatic) => {\n        this.handleInlineFormat(range, ItalicBlot.blotName);\n    };\n\n    /**\n     * Apply the strike format to a range.\n     */\n    public strike = (range: RangeStatic) => {\n        this.handleInlineFormat(range, StrikeBlot.blotName);\n    };\n\n    /**\n     * Apply the codeInline format to a range.\n     */\n    public codeInline = (range: RangeStatic) => {\n        this.handleInlineFormat(range, CodeBlot.blotName);\n    };\n\n    /**\n     * Apply the link format to a range.\n     */\n    public link = (range: RangeStatic, linkValue?: string) => {\n        const isEnabled = rangeContainsBlot(this.quill, LinkBlot, range);\n        if (isEnabled) {\n            disableAllBlotsInRange(this.quill, LinkBlot as any, range);\n        } else {\n            this.quill.formatText(range.index, range.length, LinkBlot.blotName, linkValue, Quill.sources.USER);\n        }\n    };\n\n    /**\n     * Apply the paragraph line format to all lines in the range.\n     */\n    public paragraph = (range: RangeStatic) => {\n        Formatter.BLOCK_FORMAT_NAMES.forEach(name => {\n            this.quill.formatLine(range.index, range.length, name, false, Quill.sources.API);\n        });\n        this.quill.update(Quill.sources.USER);\n    };\n\n    /**\n     * Apply the h2 line format to all lines in the range.\n     */\n    public h2 = (range: RangeStatic) => {\n        this.quill.formatLine(range.index, range.length, HeadingBlot.blotName, 2, Quill.sources.USER);\n    };\n\n    /**\n     * Apply the h3 line format to all lines in the range.\n     */\n    public h3 = (range: RangeStatic) => {\n        this.quill.formatLine(range.index, range.length, HeadingBlot.blotName, 3, Quill.sources.USER);\n    };\n\n    /**\n     * Apply codeBlock line format to all lines in the range. This will strip all other formats.\n     * Additionally it will convert inline embeds into text.\n     */\n    public codeBlock = (range: RangeStatic) => {\n        let lines = this.quill.getLines(range.index, range.length) as Blot[];\n        if (lines.length === 0) {\n            lines = [this.quill.getLine(range.index)[0] as Blot];\n        }\n        const firstLine = lines[0];\n        const lastLine = lines[lines.length - 1];\n        const start = firstLine.offset(this.quill.scroll);\n        const length = lastLine.offset(this.quill.scroll) + lastLine.length() - start;\n        const fullRange = {\n            index: start,\n            length,\n        };\n        Formatter.INLINE_FORMAT_NAMES.forEach(name => {\n            this.quill.formatText(start, length, name, false, Quill.sources.SILENT);\n        });\n        const difference = this.replaceInlineEmbeds(fullRange);\n        this.quill.formatLine(start, length + difference, CodeBlockBlot.blotName, true, Quill.sources.USER);\n    };\n\n    /**\n     * Apply the blockquote line format to all lines in the range.\n     */\n    public blockquote = (range: RangeStatic) => {\n        this.quill.formatLine(range.index, range.length, BlockquoteLineBlot.blotName, true, Quill.sources.USER);\n    };\n\n    /**\n     * Apply the spoiler line format to all lines in the range.\n     */\n    public spoiler = (range: RangeStatic) => {\n        this.quill.formatLine(range.index, range.length, SpoilerLineBlot.blotName, true, Quill.sources.USER);\n    };\n\n    /**\n     * Apply an inline format with a true/false enable value.\n     *\n     * @param range - The Range to apply the format to.\n     * @param formatKey - The key of the format. This is generally the blotName of a blot.\n     */\n    private handleInlineFormat(range: RangeStatic, formatKey: string) {\n        const formats = this.quill.getFormat(range);\n        const isEnabled = formats[formatKey] === true;\n        this.quill.formatText(range.index, range.length, formatKey, !isEnabled, Quill.sources.USER);\n        this.quill.update(Quill.sources.USER);\n    }\n\n    /**\n     * Replace all inline embeds within a blot with their plaintext equivalent.\n     */\n    private replaceInlineEmbeds(range: RangeStatic): number {\n        const embeds = this.quill.scroll.descendants(Embed as any, range.index, range.length);\n        let lengthDifference = 0;\n        embeds.forEach(embed => {\n            let text = (embed.domNode as HTMLElement).innerText || \"\";\n            // Strip 0-width whitespace.\n            text = text.replace(/[\\u200B-\\u200D\\uFEFF]/g, \"\");\n\n            lengthDifference += text.length - 1;\n            embed.replaceWith(\"text\", text);\n            this.quill.update(Quill.sources.USER);\n        });\n        return lengthDifference;\n    }\n}\n","/**\n * @copyright 2009-2018 Vanilla Forums Inc.\n * @license https://opensource.org/licenses/GPL-2.0 GPL-2.0\n */\n\nimport WrapperBlot from \"./WrapperBlot\";\nimport withWrapper from \"./withWrapper\";\nimport LineBlot from \"./LineBlot\";\n\n/**\n * A Content blot is both a WrappedBlot and a WrapperBlot.\n */\nconst ContentBlot = withWrapper(WrapperBlot as any);\n\nContentBlot.allowedChildren = [LineBlot];\n\nexport default ContentBlot;\n","/**\n * @copyright 2009-2018 Vanilla Forums Inc.\n * @license https://opensource.org/licenses/GPL-2.0 GPL-2.0\n */\n\nimport WrapperBlot from \"./WrapperBlot\";\nimport { Blot, Container } from \"quill/core\";\nimport Parchment from \"parchment\";\n\nexport interface IWrappable extends Container {\n    getWrapper(recursively?: boolean): WrapperBlot;\n}\n\n/**\n * Higher-order function to create a \"wrapped\" blot.\n *\n * Takes an existing Blot class and implements methods necessary to properly instantiate and cleanup it's parent Blot.\n * the passed Blot class must implement the static property parentName, which should reference a register Blot that is\n * and instance of WrapperBlot.\n *\n * @param blotConstructor - The Blot constructor to wrap.\n */\nexport default function withWrapper(blotConstructor: typeof Container) {\n    class BlotWithWrapper extends blotConstructor {\n        public parent: WrapperBlot;\n\n        constructor(domNode) {\n            super(domNode);\n            if (!this.statics.parentName) {\n                throw new Error(\"Attempted to instantiate wrapped Blot without setting static value parentName\");\n            }\n        }\n\n        public attach() {\n            super.attach();\n            if ((this.parent as any).statics.blotName !== this.statics.parentName) {\n                const Wrapper = Parchment.create(this.statics.parentName);\n\n                if (!(Wrapper instanceof WrapperBlot)) {\n                    throw new Error(\"The provided static parentName did not instantiate an instance of a WrapperBlot.\");\n                }\n\n                this.wrap(Wrapper);\n            }\n        }\n\n        /**\n         * If this is the only child blot we want to delete the parent with it.\n         */\n        public remove() {\n            if (this.prev == null && this.next == null) {\n                this.parent.remove();\n            } else {\n                super.remove();\n            }\n        }\n\n        /**\n         * Delete this blot it has no children. Wrap it if it doesn't have it's proper parent name.\n         *\n         * @param context - A shared context that is passed through all updated Blots.\n         */\n        public optimize(context) {\n            super.optimize(context);\n            if (this.children.length === 0) {\n                this.remove();\n            }\n        }\n\n        /**\n         * @returns The parent blot of this Blot.\n         */\n        public getWrapper(recursively: boolean = false): WrapperBlot {\n            const wrapper = this.parent as IWrappable;\n\n            if (recursively && wrapper.getWrapper) {\n                return wrapper.getWrapper(true);\n            } else {\n                return wrapper;\n            }\n        }\n\n        /**\n         * Replace this blot with another blot.\n         *\n         * @param name - The name of the replacement Blot.\n         * @param value - The value for the replacement Blot.\n         */\n        public replaceWith(name: any, value?: any): any {\n            const topLevelWrapper = this.getWrapper(true);\n            const immediateWrapper = this.parent;\n\n            immediateWrapper.children.forEach(child => {\n                if (child === this) {\n                    (child as any).replaceWithIntoScroll(name, value, topLevelWrapper);\n                } else {\n                    child.insertInto(this.scroll, topLevelWrapper);\n                }\n            });\n            topLevelWrapper.remove();\n        }\n\n        /**\n         * Replace this ContainerBlot with another one.\n         *\n         * Then attach that new Blot to the scroll in before the passed insertBefore Blot.\n         * This is needed because we a normal replaceWith doesn't work (cyclicly recreates it's parents).\n         *\n         * @param name - The name of the Blot to replace this one with.\n         * @param value - The initial value of the new blot.\n         * @param insertBefore - The Blot to insert this blot before in the ScrollBlot.\n         */\n        public replaceWithIntoScroll(name: string, value: string, insertBefore: Blot) {\n            const newBlot = Parchment.create(name, value) as Container;\n            this.moveChildren(newBlot);\n\n            newBlot.insertInto(this.scroll, insertBefore);\n        }\n    }\n\n    return BlotWithWrapper;\n}\n","/**\n * @author Adam (charrondev) Charron <adam.c@vanillaforums.com>\n * @copyright 2009-2018 Vanilla Forums Inc.\n * @license https://opensource.org/licenses/GPL-2.0 GPL-2.0\n */\n\nimport React from \"react\";\nimport classnames from \"classnames\";\n\nexport interface IMenuItemData {\n    icon: JSX.Element;\n    label: string;\n    isActive: boolean;\n    isDisabled?: boolean;\n    onClick: (event: React.MouseEvent<HTMLButtonElement>) => void;\n}\n\nexport interface IProps extends IMenuItemData {\n    role: \"menuitem\" | \"menuitemradio\";\n    focusNextItem: () => void;\n    focusPrevItem: () => void;\n}\n\n/**\n * A component that when used with MenuItems provides an accessible WCAG compliant Menu implementation.\n *\n * @see https://www.w3.org/TR/wai-aria-practices-1.1/#menu\n */\nexport default class MenuItem extends React.PureComponent<IProps> {\n    private buttonRef: React.RefObject<HTMLButtonElement> = React.createRef();\n    public render() {\n        const { label, isDisabled, isActive, onClick, icon, role } = this.props;\n        const buttonClasses = classnames(\"richEditor-button\", \"richEditor-formatButton\", \"richEditor-menuItem\", {\n            isActive,\n        });\n\n        const ariaAttributes = {\n            role,\n            \"aria-label\": label,\n        };\n\n        if (role === \"menuitem\") {\n            ariaAttributes[\"aria-pressed\"] = isActive;\n        } else {\n            ariaAttributes[\"aria-checked\"] = isActive;\n        }\n\n        return (\n            <button\n                {...ariaAttributes}\n                className={buttonClasses}\n                type=\"button\"\n                onClick={this.onClick}\n                onKeyDown={this.handleKeyPress}\n                ref={this.buttonRef}\n            >\n                {icon}\n            </button>\n        );\n    }\n\n    /**\n     * Focus the button inside of this MenuItem.\n     */\n    public focus() {\n        this.buttonRef.current && this.buttonRef.current.focus();\n    }\n\n    private onClick = (event: React.MouseEvent<HTMLButtonElement>) => {\n        if (this.props.isDisabled) {\n            event.preventDefault();\n        } else {\n            this.props.onClick(event);\n        }\n    };\n\n    /**\n     * Implement arrow keyboard shortcuts in accordance with the WAI-ARIA best practices for menuitems.\n     *\n     * @see https://www.w3.org/TR/wai-aria-practices/examples/menubar/menubar-2/menubar-2.html\n     */\n    private handleKeyPress = (event: React.KeyboardEvent<any>) => {\n        switch (event.key) {\n            case \"ArrowRight\":\n            case \"ArrowDown\":\n                event.stopPropagation();\n                event.preventDefault();\n                this.props.focusNextItem();\n                break;\n            case \"ArrowUp\":\n            case \"ArrowLeft\":\n                event.stopPropagation();\n                event.preventDefault();\n                this.props.focusPrevItem();\n                break;\n        }\n    };\n}\n","/**\n * @author Adam (charrondev) Charron <adam.c@vanillaforums.com>\n * @copyright 2009-2018 Vanilla Forums Inc.\n * @license https://opensource.org/licenses/GPL-2.0 GPL-2.0\n */\n\nimport React from \"react\";\nimport MenuItem, { IMenuItemData } from \"@rich-editor/components/toolbars/pieces/MenuItem\";\nimport classNames from \"classnames\";\n\ninterface IProps {\n    menuItemData: IMenuItemData[];\n    itemRole?: \"menuitem\" | \"menuitemradio\";\n    orientation?: \"horizontal\" | \"vertical\";\n    menuItemsClass?: string;\n}\n\n/**\n * A component that when used with MenuItem provides an accessible WCAG compliant Menu implementation.\n *\n * @see https://www.w3.org/TR/wai-aria-practices-1.1/#menu\n */\nexport default class MenuItems extends React.Component<IProps, {}> {\n    public static defaultProps: Partial<IProps> = {\n        itemRole: \"menuitem\",\n        orientation: \"horizontal\",\n    };\n\n    private menuItemRefs: Array<MenuItem | null> = [];\n\n    public render() {\n        const { menuItemData } = this.props;\n        const firstIndex = 0;\n        const lastIndex = menuItemData.length - 1;\n        const menuItemsClass = classNames(\"richEditor-menu\", this.props.menuItemsClass);\n        return (\n            <div className={menuItemsClass} role=\"menu\" aria-orientation={this.props.orientation!}>\n                <div className=\"richEditor-menuItems\">\n                    {this.props.menuItemData.map((itemData, index) => {\n                        const prevIndex = index === firstIndex ? lastIndex : index - 1;\n                        const nextIndex = index === lastIndex ? firstIndex : index + 1;\n                        const focusPrevItem = () => {\n                            const prevItem = this.menuItemRefs[prevIndex];\n                            prevItem && prevItem.focus();\n                        };\n                        const focusNextItem = () => {\n                            const nextItem = this.menuItemRefs[nextIndex];\n                            nextItem && nextItem.focus();\n                        };\n                        return (\n                            <MenuItem\n                                {...itemData}\n                                role={this.props.itemRole!}\n                                key={index}\n                                focusNextItem={focusNextItem}\n                                focusPrevItem={focusPrevItem}\n                                ref={ref => this.menuItemRefs.push(ref)}\n                            />\n                        );\n                    })}\n                </div>\n            </div>\n        );\n    }\n\n    /**\n     * Focus the first menu item.\n     */\n    public focusFirstItem() {\n        const firstItem = this.menuItemRefs[0];\n        firstItem && firstItem.focus();\n    }\n\n    /**\n     * Focus the last menu item.\n     */\n    public focusLastItem() {\n        const lastIndex = this.menuItemRefs.length - 1;\n        const lastItem = this.menuItemRefs[lastIndex];\n        lastItem && lastItem.focus();\n    }\n}\n","/**\n * @author Adam (charrondev) Charron <adam.c@vanillaforums.com>\n * @copyright 2009-2018 Vanilla Forums Inc.\n * @license https://opensource.org/licenses/GPL-2.0 GPL-2.0\n */\n\nimport React from \"react\";\nimport { t } from \"@dashboard/application\";\nimport classNames from \"classnames\";\n\nconst currentColorFill = {\n    fill: \"currentColor\",\n};\n\nexport function bold() {\n    return (\n        <svg className=\"richEditorButton-icon\" viewBox=\"0 0 24 24\">\n            <title>{t(\"Bold\")}</title>\n            <path\n                d=\"M6.511,18v-.62a4.173,4.173,0,0,0,.845-.093.885.885,0,0,0,.736-.79,5.039,5.039,0,0,0,.063-.884V8.452a6.585,6.585,0,0,0-.047-.876,1.116,1.116,0,0,0-.194-.527.726.726,0,0,0-.4-.263,3.658,3.658,0,0,0-.674-.1v-.62h4.975a7.106,7.106,0,0,1,3.6.752A2.369,2.369,0,0,1,16.68,8.964q0,1.843-2.651,2.6v.062a4.672,4.672,0,0,1,1.542.24,3.39,3.39,0,0,1,1.171.674,3.036,3.036,0,0,1,.744,1.023,3.125,3.125,0,0,1,.263,1.287,2.49,2.49,0,0,1-.38,1.379,3.05,3.05,0,0,1-1.092.992,7.794,7.794,0,0,1-3.8.775Zm6.076-.945q2.5,0,2.5-2.248a2.3,2.3,0,0,0-.9-2.015,3.073,3.073,0,0,0-1.2-.465,9.906,9.906,0,0,0-1.806-.139h-.744v3.1a1.664,1.664,0,0,0,.5,1.364A2.659,2.659,0,0,0,12.587,17.055Zm-1.24-5.8a4.892,4.892,0,0,0,1.21-.131,2.69,2.69,0,0,0,.868-.38,1.8,1.8,0,0,0,.743-1.6,2.107,2.107,0,0,0-.557-1.635,2.645,2.645,0,0,0-1.8-.5h-1.1q-.279,0-.279.264v3.983Z\"\n                style={currentColorFill}\n            />\n        </svg>\n    );\n}\n\nexport function italic() {\n    return (\n        <svg className=\"richEditorButton-icon\" viewBox=\"0 0 24 24\">\n            <title>{t(\"Italic\")}</title>\n            <path\n                d=\"M11.472,15.4a4.381,4.381,0,0,0-.186,1.085.744.744,0,0,0,.333.713,2.323,2.323,0,0,0,1.077.186L12.51,18H7.566l.17-.62a3.8,3.8,0,0,0,.791-.07,1.282,1.282,0,0,0,.566-.271,1.62,1.62,0,0,0,.41-.558,5.534,5.534,0,0,0,.326-.93L11.642,8.7a5.332,5.332,0,0,0,.233-1.271.577.577,0,0,0-.349-.612,3.714,3.714,0,0,0-1.186-.132l.171-.62h5.038l-.171.62a3.058,3.058,0,0,0-.852.1,1.246,1.246,0,0,0-.59.38,2.578,2.578,0,0,0-.441.774,11.525,11.525,0,0,0-.4,1.287Z\"\n                style={currentColorFill}\n            />\n        </svg>\n    );\n}\n\nexport function strike() {\n    return (\n        <svg className=\"richEditorButton-icon\" viewBox=\"0 0 24 24\">\n            <title>{t(\"Strikethrough\")}</title>\n            <path\n                d=\"M12.258,13H6V12h4.2l-.05-.03a4.621,4.621,0,0,1-1.038-.805,2.531,2.531,0,0,1-.55-.892A3.285,3.285,0,0,1,8.4,9.2a3.345,3.345,0,0,1,.256-1.318,3.066,3.066,0,0,1,.721-1.046,3.242,3.242,0,0,1,1.1-.682,3.921,3.921,0,0,1,1.4-.24,3.641,3.641,0,0,1,1.271.217,4.371,4.371,0,0,1,1.194.7l.4-.7h.357l.171,3.085h-.574A3.921,3.921,0,0,0,13.611,7.32a2.484,2.484,0,0,0-1.7-.619,2.269,2.269,0,0,0-1.5.465,1.548,1.548,0,0,0-.558,1.255,1.752,1.752,0,0,0,.124.674,1.716,1.716,0,0,0,.4.574,4.034,4.034,0,0,0,.729.542,9.854,9.854,0,0,0,1.116.566,20.49,20.49,0,0,1,1.906.953q.232.135.435.27h4.6v1H15.675a2.263,2.263,0,0,1,.3.544,3.023,3.023,0,0,1,.186,1.093,3.236,3.236,0,0,1-1.177,2.541,4.014,4.014,0,0,1-1.334.721,5.393,5.393,0,0,1-1.7.256,4.773,4.773,0,0,1-1.588-.248,4.885,4.885,0,0,1-1.434-.837l-.434.76H8.132L7.9,14.358h.573a3.886,3.886,0,0,0,.411,1.255A3.215,3.215,0,0,0,10.7,17.155a3.872,3.872,0,0,0,1.294.21,2.786,2.786,0,0,0,1.813-.543,1.8,1.8,0,0,0,.667-1.473,1.752,1.752,0,0,0-.573-1.34,4.04,4.04,0,0,0-.83-.6Q12.723,13.217,12.258,13Z\"\n                style={currentColorFill}\n            />\n        </svg>\n    );\n}\n\nexport function code() {\n    return (\n        <svg className=\"richEditorButton-icon\" viewBox=\"0 0 24 24\">\n            <title>{t(\"Paragraph Code Block\")}</title>\n            <path\n                fill=\"currentColor\"\n                fillRule=\"evenodd\"\n                d=\"M9.11588626,16.5074223 L3.14440918,12.7070466 L3.14440918,11.6376386 L9.11588626,7.32465415 L9.11588626,9.04808032 L4.63575044,12.0883808 L9.11588626,14.7663199 L9.11588626,16.5074223 Z M14.48227,5.53936141 L11.1573124,18.4606386 L9.80043634,18.4606386 L13.131506,5.53936141 L14.48227,5.53936141 Z M15.1729321,14.7663199 L19.6530679,12.0883808 L15.1729321,9.04808032 L15.1729321,7.32465415 L21.1444092,11.6376386 L21.1444092,12.7070466 L15.1729321,16.5074223 L15.1729321,14.7663199 Z\"\n            />\n        </svg>\n    );\n}\n\nexport function link() {\n    return (\n        <svg className=\"richEditorButton-icon\" viewBox=\"0 0 24 24\">\n            <title>{t(\"Link\")}</title>\n            <path\n                d=\"M9.108,12.272a.731.731,0,0,0,.909.08l1.078.9a2.094,2.094,0,0,1-2.889.087l-2.4-2.019A2.089,2.089,0,0,1,5.443,8.4L6.892,6.679a2.088,2.088,0,0,1,2.942-.144l2.4,2.019a2.089,2.089,0,0,1,.362,2.924l-.1.114-1.073-.9.1-.114a.705.705,0,0,0-.192-.95l-2.4-2.019a.7.7,0,0,0-.968-.026L6.516,9.3a.7.7,0,0,0,.191.95Zm9.085,1.293a2.088,2.088,0,0,1,.362,2.924l-1.448,1.722a2.088,2.088,0,0,1-2.942.144l-2.4-2.019a2.1,2.1,0,0,1-.409-2.86l1.077.9a.73.73,0,0,0,.235.883l2.4,2.019a.7.7,0,0,0,.968.026l1.448-1.722a.7.7,0,0,0-.192-.95l-2.4-2.019a.7.7,0,0,0-.967-.026l-.1.115-1.072-.9.1-.115a2.087,2.087,0,0,1,2.942-.144ZM10.028,10.6a.466.466,0,0,1,.658-.057l3.664,3.082a.467.467,0,0,1,.057.658l-.308.366a.466.466,0,0,1-.658.057L9.776,11.626a.469.469,0,0,1-.057-.659Z\"\n                style={currentColorFill}\n            />\n        </svg>\n    );\n}\n\nexport function emoji() {\n    return (\n        <svg className=\"richEditorButton-icon\" viewBox=\"0 0 24 24\">\n            <title>{t(\"Emoji\")}</title>\n            <path\n                fill=\"currentColor\"\n                d=\"M12,4 C7.58168889,4 4,7.58168889 4,12 C4,16.4181333 7.58168889,20 12,20 C16.4183111,20 20,16.4181333 20,12 C20,7.58168889 16.4183111,4 12,4 Z M12,18.6444444 C8.33631816,18.6444444 5.35555556,15.6636818 5.35555556,12 C5.35555556,8.33631816 8.33631816,5.35555556 12,5.35555556 C15.6636818,5.35555556 18.6444444,8.33631816 18.6444444,12 C18.6444444,15.6636818 15.6636818,18.6444444 12,18.6444444 Z M10.7059556,10.2024889 C10.7059556,9.51253333 10.1466667,8.95324444 9.45671111,8.95324444 C8.76675556,8.95324444 8.20746667,9.51253333 8.20746667,10.2024889 C8.20746667,10.8924444 8.76675556,11.4517333 9.45671111,11.4517333 C10.1466667,11.4517333 10.7059556,10.8924444 10.7059556,10.2024889 Z M14.5432889,8.95306667 C13.8533333,8.95306667 13.2940444,9.51235556 13.2940444,10.2023111 C13.2940444,10.8922667 13.8533333,11.4515556 14.5432889,11.4515556 C15.2332444,11.4515556 15.7925333,10.8922667 15.7925333,10.2023111 C15.7925333,9.51235556 15.2332444,8.95306667 14.5432889,8.95306667 Z M14.7397333,14.1898667 C14.5767111,14.0812444 14.3564444,14.1256889 14.2471111,14.2883556 C14.2165333,14.3336889 13.4823111,15.4012444 11.9998222,15.4012444 C10.5198222,15.4012444 9.7856,14.3374222 9.75271111,14.2885333 C9.64444444,14.1256889 9.42471111,14.0803556 9.2608,14.1884444 C9.09688889,14.2963556 9.05155556,14.5169778 9.15964444,14.6810667 C9.19804444,14.7393778 10.1242667,16.1125333 11.9998222,16.1125333 C13.8752,16.1125333 14.8014222,14.7395556 14.84,14.6810667 C14.9477333,14.5173333 14.9027556,14.2983111 14.7397333,14.1898667 Z\"\n            />\n        </svg>\n    );\n}\n\nexport function embedError() {\n    return (\n        <svg className=\"richEditorButton-icon\" viewBox=\"0 0 24 24\" aria-hidden=\"true\">\n            <title>{t(\"Warning\")}</title>\n            <path\n                d=\"M11.651,3.669,2.068,21.75H21.234Zm.884-1,10,18.865A1,1,0,0,1,21.649,23h-20a1,1,0,0,1-.884-1.468l10-18.865a1,1,0,0,1,1.767,0Zm.232,13.695H10.547L10.2,10h2.905Zm-2.535,2.354a1.239,1.239,0,0,1,.363-.952,1.491,1.491,0,0,1,1.056-.34,1.443,1.443,0,0,1,1.039.34,1.258,1.258,0,0,1,.353.952,1.224,1.224,0,0,1-.367.945A1.452,1.452,0,0,1,11.65,20a1.5,1.5,0,0,1-1.042-.34A1.207,1.207,0,0,1,10.231,18.716Z\"\n                style={currentColorFill}\n            />\n        </svg>\n    );\n}\n\nexport function close() {\n    return (\n        <svg className=\"richEditorButton-icon\" viewBox=\"0 0 24 24\" aria-hidden=\"true\">\n            <title>{t(\"Close\")}</title>\n            <path\n                fill=\"currentColor\"\n                d=\"M12,10.6293581 L5.49002397,4.11938207 C5.30046135,3.92981944 4.95620859,3.96673045 4.69799105,4.22494799 L4.22494799,4.69799105 C3.97708292,4.94585613 3.92537154,5.29601344 4.11938207,5.49002397 L10.6293581,12 L4.11938207,18.509976 C3.92981944,18.6995387 3.96673045,19.0437914 4.22494799,19.3020089 L4.69799105,19.775052 C4.94585613,20.0229171 5.29601344,20.0746285 5.49002397,19.8806179 L12,13.3706419 L18.509976,19.8806179 C18.6995387,20.0701806 19.0437914,20.0332695 19.3020089,19.775052 L19.775052,19.3020089 C20.0229171,19.0541439 20.0746285,18.7039866 19.8806179,18.509976 L13.3706419,12 L19.8806179,5.49002397 C20.0701806,5.30046135 20.0332695,4.95620859 19.775052,4.69799105 L19.3020089,4.22494799 C19.0541439,3.97708292 18.7039866,3.92537154 18.509976,4.11938207 L12,10.6293581 Z\"\n            />\n        </svg>\n    );\n}\n\nexport function pilcrow() {\n    return (\n        <svg className=\"richEditorButton-icon\" viewBox=\"0 0 24 24\">\n            <title>{t(\"Paragraph\")}</title>\n            <path\n                fill=\"currentColor\"\n                fillRule=\"evenodd\"\n                d=\"M15,6 L17,6 L17,18 L15,18 L15,6 Z M11,6 L13.0338983,6 L13.0338983,18 L11,18 L11,6 Z M11,13.8666667 C8.790861,13.8666667 7,12.1056533 7,9.93333333 C7,7.76101332 8.790861,6 11,6 C11,7.68571429 11,11.6190476 11,13.8666667 Z\"\n            />\n        </svg>\n    );\n}\n\nexport function heading2() {\n    return (\n        <svg className=\"richEditorButton-icon\" viewBox=\"0 0 24 24\">\n            <title>{t(\"Subtitle\")}</title>\n            <path\n                d=\"M12.3,17H10.658V12.5H6.051V17H4.417V7.006H6.051v4.088h4.607V7.006H12.3Zm8,0H13.526V15.783L16.1,13.192a22.007,22.007,0,0,0,1.514-1.657,3.978,3.978,0,0,0,.543-.92,2.475,2.475,0,0,0,.171-.923,1.4,1.4,0,0,0-.407-1.066,1.557,1.557,0,0,0-1.124-.39,3,3,0,0,0-1.111.212,5.239,5.239,0,0,0-1.241.766l-.868-1.06a5.612,5.612,0,0,1,1.62-1,4.744,4.744,0,0,1,1.675-.294,3.294,3.294,0,0,1,2.235.728,2.46,2.46,0,0,1,.841,1.959,3.453,3.453,0,0,1-.242,1.285,5.212,5.212,0,0,1-.746,1.254,17.041,17.041,0,0,1-1.671,1.747l-1.736,1.682v.068H20.3Z\"\n                style={currentColorFill}\n            />\n        </svg>\n    );\n}\n\nexport function heading3() {\n    return (\n        <svg className=\"richEditorButton-icon\" viewBox=\"0 0 24 24\">\n            <title>{t(\"Sub Subtitle\")}</title>\n            <path\n                d=\"M10.658,7.006H12.3V17H10.658V12.5H6.051V17H4.417V7.006H6.051v4.088h4.607Zm8.93,5.533a3.016,3.016,0,0,0-1.806-.748v-.055a2.789,2.789,0,0,0,1.56-.851A2.315,2.315,0,0,0,19.9,9.3a2.131,2.131,0,0,0-.848-1.791,3.8,3.8,0,0,0-2.36-.65,5.251,5.251,0,0,0-3.2,1.012l.786,1.121a5.226,5.226,0,0,1,1.245-.625,3.76,3.76,0,0,1,1.1-.161,1.881,1.881,0,0,1,1.232.349,1.22,1.22,0,0,1,.417.991q0,1.654-2.4,1.654H14.99v1.306h.869a4.066,4.066,0,0,1,2,.376,1.267,1.267,0,0,1,.636,1.176,1.559,1.559,0,0,1-.574,1.333,2.89,2.89,0,0,1-1.738.43,5.794,5.794,0,0,1-1.369-.171,6.372,6.372,0,0,1-1.347-.485V16.6a6.532,6.532,0,0,0,2.8.54,4.676,4.676,0,0,0,2.9-.783,2.637,2.637,0,0,0,1.019-2.225A2.143,2.143,0,0,0,19.588,12.539Z\"\n                style={currentColorFill}\n            />\n        </svg>\n    );\n}\n\nexport function blockquote() {\n    return (\n        <svg className=\"richEditorButton-icon\" viewBox=\"0 0 24 24\">\n            <title>{t(\"Quote\")}</title>\n            <path\n                d=\"M10.531,17.286V12.755H8.122a9.954,9.954,0,0,1,.1-1.408,4.22,4.22,0,0,1,.388-1.286,2.62,2.62,0,0,1,.735-.918A1.815,1.815,0,0,1,10.49,8.8V6.755a3.955,3.955,0,0,0-2,.49A4.164,4.164,0,0,0,7.082,8.551a5.84,5.84,0,0,0-.817,1.9A9.65,9.65,0,0,0,6,12.755v4.531Zm7.469,0V12.755H15.592a9.954,9.954,0,0,1,.1-1.408,4.166,4.166,0,0,1,.388-1.286,2.606,2.606,0,0,1,.734-.918A1.819,1.819,0,0,1,17.959,8.8V6.755a3.958,3.958,0,0,0-2,.49,4.174,4.174,0,0,0-1.408,1.306,5.86,5.86,0,0,0-.816,1.9,9.649,9.649,0,0,0-.266,2.306v4.531Z\"\n                style={currentColorFill}\n            />\n        </svg>\n    );\n}\n\nexport function codeBlock() {\n    return (\n        <svg className=\"richEditorButton-icon\" viewBox=\"0 0 24 24\">\n            <title>{t(\"Paragraph Code Block\")}</title>\n            <path\n                fill=\"currentColor\"\n                fillRule=\"evenodd\"\n                d=\"M9.11588626,16.5074223 L3.14440918,12.7070466 L3.14440918,11.6376386 L9.11588626,7.32465415 L9.11588626,9.04808032 L4.63575044,12.0883808 L9.11588626,14.7663199 L9.11588626,16.5074223 Z M14.48227,5.53936141 L11.1573124,18.4606386 L9.80043634,18.4606386 L13.131506,5.53936141 L14.48227,5.53936141 Z M15.1729321,14.7663199 L19.6530679,12.0883808 L15.1729321,9.04808032 L15.1729321,7.32465415 L21.1444092,11.6376386 L21.1444092,12.7070466 L15.1729321,16.5074223 L15.1729321,14.7663199 Z\"\n            />\n        </svg>\n    );\n}\n\nexport function spoiler(extraClasses = \"\") {\n    const spoilerClasses = classNames(extraClasses);\n    return (\n        <svg className={spoilerClasses} viewBox=\"0 0 24 24\">\n            <title>{t(\"Spoiler\")}</title>\n            <path\n                d=\"M8.138,16.569l.606-.606a6.677,6.677,0,0,0,1.108.562,5.952,5.952,0,0,0,2.674.393,7.935,7.935,0,0,0,1.008-.2,11.556,11.556,0,0,0,5.7-4.641.286.286,0,0,0-.02-.345c-.039-.05-.077-.123-.116-.173a14.572,14.572,0,0,0-2.917-3.035l.6-.6a15.062,15.062,0,0,1,2.857,3.028,1.62,1.62,0,0,0,.154.245,1.518,1.518,0,0,1,.02,1.5,12.245,12.245,0,0,1-6.065,4.911,6.307,6.307,0,0,1-1.106.22,4.518,4.518,0,0,1-.581.025,6.655,6.655,0,0,1-2.383-.466A8.023,8.023,0,0,1,8.138,16.569Zm-.824-.59a14.661,14.661,0,0,1-2.965-3.112,1.424,1.424,0,0,1,0-1.867A13.69,13.69,0,0,1,8.863,6.851a6.31,6.31,0,0,1,6.532.123c.191.112.381.231.568.356l-.621.621c-.092-.058-.184-.114-.277-.168a5.945,5.945,0,0,0-3.081-.909,6.007,6.007,0,0,0-2.868.786,13.127,13.127,0,0,0-4.263,3.929c-.214.271-.214.343,0,.639a13.845,13.845,0,0,0,3.059,3.153ZM13.9,9.4l-.618.618a2.542,2.542,0,0,0-3.475,3.475l-.61.61A3.381,3.381,0,0,1,12,8.822,3.4,3.4,0,0,1,13.9,9.4Zm.74.674a3.3,3.3,0,0,1,.748,2.138,3.382,3.382,0,0,1-5.515,2.629l.6-.6a2.542,2.542,0,0,0,3.559-3.559Zm-3.146,3.146L13.008,11.7a1.129,1.129,0,0,1-1.516,1.516Zm-.6-.811a1.061,1.061,0,0,1-.018-.2A1.129,1.129,0,0,1,12,11.079a1.164,1.164,0,0,1,.2.017Z\"\n                style={currentColorFill}\n            />\n            <polygon\n                points=\"19.146 4.146 19.854 4.854 4.854 19.854 4.146 19.146 19.146 4.146\"\n                style={currentColorFill}\n            />\n        </svg>\n    );\n}\n\nexport function emojiGroup_smileysPeople(group = \"Smileys & People\") {\n    return (\n        <svg className=\"emojiGroup-icon\" viewBox=\"0 0 24 24\">\n            <title>{t(group)}</title>\n            <path\n                fill=\"currentColor\"\n                d=\"M12,4 C7.58168889,4 4,7.58168889 4,12 C4,16.4181333 7.58168889,20 12,20 C16.4183111,20 20,16.4181333 20,12 C20,7.58168889 16.4183111,4 12,4 Z M12,18.6444444 C8.33631816,18.6444444 5.35555556,15.6636818 5.35555556,12 C5.35555556,8.33631816 8.33631816,5.35555556 12,5.35555556 C15.6636818,5.35555556 18.6444444,8.33631816 18.6444444,12 C18.6444444,15.6636818 15.6636818,18.6444444 12,18.6444444 Z M10.7059556,10.2024889 C10.7059556,9.51253333 10.1466667,8.95324444 9.45671111,8.95324444 C8.76675556,8.95324444 8.20746667,9.51253333 8.20746667,10.2024889 C8.20746667,10.8924444 8.76675556,11.4517333 9.45671111,11.4517333 C10.1466667,11.4517333 10.7059556,10.8924444 10.7059556,10.2024889 Z M14.5432889,8.95306667 C13.8533333,8.95306667 13.2940444,9.51235556 13.2940444,10.2023111 C13.2940444,10.8922667 13.8533333,11.4515556 14.5432889,11.4515556 C15.2332444,11.4515556 15.7925333,10.8922667 15.7925333,10.2023111 C15.7925333,9.51235556 15.2332444,8.95306667 14.5432889,8.95306667 Z M14.7397333,14.1898667 C14.5767111,14.0812444 14.3564444,14.1256889 14.2471111,14.2883556 C14.2165333,14.3336889 13.4823111,15.4012444 11.9998222,15.4012444 C10.5198222,15.4012444 9.7856,14.3374222 9.75271111,14.2885333 C9.64444444,14.1256889 9.42471111,14.0803556 9.2608,14.1884444 C9.09688889,14.2963556 9.05155556,14.5169778 9.15964444,14.6810667 C9.19804444,14.7393778 10.1242667,16.1125333 11.9998222,16.1125333 C13.8752,16.1125333 14.8014222,14.7395556 14.84,14.6810667 C14.9477333,14.5173333 14.9027556,14.2983111 14.7397333,14.1898667 Z\"\n            />\n        </svg>\n    );\n}\n\nexport function emojiGroup_animalsNature(group = \"Animals & Nature\") {\n    return (\n        <svg className=\"emojiGroup-icon\" viewBox=\"0 0 24 24\">\n            <title>{t(group)}</title>\n            <path\n                fill=\"currentColor\"\n                d=\"M10.8815789,7.36973684 L7.77236842,9.00263158 L9.36052632,7.36973684 L9.36052632,3.96973684 L9.36052632,3.5 L8.91315789,3.5 L8.91315789,4.43947368 L7.97368421,5.42368421 L7.97368421,5.02105263 L7.52631579,5.02105263 L7.52631579,5.89342105 L6.58684211,6.87763158 L6.58684211,6.54210526 L6.13947368,6.54210526 L6.13947368,7.34736842 L5.2,8.33157895 L5.2,8.06315789 L4.75263158,8.06315789 L4.75263158,8.80131579 L4.55131579,9.00263158 L2.40394737,9.00263158 L2.40394737,8.06315789 L1.93421053,8.06315789 L1.93421053,9.00263158 L1.93421053,9.04736842 L1.93421053,9.69605263 L3.85789474,9.69605263 L1.93421053,11.7092105 L1.93421053,13.3868421 L3.58947368,13.3868421 L4.73026316,12.2013158 L4.73026316,13.3868421 L9.40526316,13.3868421 L10.8815789,16.7421053 L13.5434211,20.5 L14.5947368,20.5 L20.4328947,10.9710526 L10.8815789,7.36973684 Z M13.5434211,20.5 L13.5434211,18.9565789 L11.9328947,16.7421053 L11.9328947,13.3868421 L15.8026316,13.3868421 L15.8026316,16.7421053 L13.5434211,20.5 Z M7.97368421,19.4039474 L9.47236842,15.6236842 L9.98684211,16.7421053 L9.00263158,19.4039474 L8.28684211,20.5 L7.21315789,20.5 L7.97368421,19.4039474 Z M20.4105263,13.3868421 L22.0657895,16.7421053 L22.0657895,19.4039474 L21.4171053,20.5 L20.4105263,20.5 L21.0368421,19.4039474 L21.0368421,16.7421053 L19.2026316,15.5565789 L20.4105263,13.3868421 Z\"\n            />\n        </svg>\n    );\n}\n\nexport function emojiGroup_foodDrink(group = \"Food & Drink\") {\n    return (\n        <svg className=\"emojiGroup-icon\" viewBox=\"0 0 24 24\">\n            <title>{t(group)}</title>\n            <path\n                fill=\"currentColor\"\n                d=\"M13.4404507,12.0850076 C14.050232,11.7279399 14.624055,11.6426962 15.1651887,11.5101788 C15.6655864,11.3874682 16.167493,11.2205013 16.9656149,10.4223794 L19.8603784,7.5276159 C20.0469589,7.33952668 20.046456,7.03652199 19.8593726,6.84918714 C19.6717863,6.66185228 19.3697874,6.6623552 19.182704,6.84969005 L16.8119752,9.22016743 C16.6248918,9.40750228 16.3211327,9.40725082 16.1343008,9.22067034 C15.9472174,9.03358694 15.9472174,8.72982788 16.1343008,8.54274449 L16.1353066,8.54199012 C16.4682346,8.20881068 18.5050296,6.17226711 18.5050296,6.17226711 C18.6926159,5.9846808 18.692113,5.68217902 18.5050296,5.49509563 C18.3179462,5.30776077 18.0149415,5.30750932 17.8278581,5.49484417 C17.8278581,5.49484417 15.7910631,7.53138774 15.4581351,7.86456718 L15.4571293,7.86532155 C15.2700459,8.0526564 14.9665383,8.0526564 14.7794549,7.865573 C14.5923715,7.67874106 14.5926229,7.374982 14.7797063,7.18789861 L17.1501837,4.81742123 C17.33777,4.62983492 17.33777,4.32783605 17.1506866,4.14075266 C16.9633518,3.95316635 16.6605985,3.95316635 16.4732637,4.14024975 L13.5782487,7.03451034 C12.7801268,7.83263224 12.6129085,8.33428732 12.4904493,8.83493656 C12.3576804,9.37607026 12.2724368,9.95014471 11.9151176,10.5599259 L5.50424235,4.14879926 C5.31665604,3.9614644 5.01415426,3.96171586 4.82707087,4.1485478 C3.1692203,5.80639837 6.6114039,9.99817284 8.76009693,12.1473688 C9.14080158,12.5280734 9.45210432,12.7606704 9.73122068,12.9145616 L4.28040514,18.3646227 C3.90623835,18.7387895 3.90674126,19.3453018 4.2806566,19.7194686 C4.65457193,20.093384 5.26083277,20.0938869 5.63525102,19.7197201 L11.7916526,13.5633185 C12.1939825,13.7297825 12.6295046,13.9842561 13.0406354,14.395387 L18.3654714,19.720223 C18.7381295,20.0931325 19.3456476,20.0943898 19.7200658,19.720223 C20.0927239,19.347062 20.0932268,18.7385381 19.7205688,18.3653771 L13.4404507,12.0850076 Z\"\n            />\n        </svg>\n    );\n}\n\nexport function emojiGroup_travelPlaces(group = \"Travel & Places\") {\n    return (\n        <svg className=\"emojiGroup-icon\" viewBox=\"0 0 24 24\">\n            <title>{t(group)}</title>\n            <path\n                fill=\"currentColor\"\n                d=\"M19.7629331,6.05594053 L17.6103818,4.60289782 C17.5216833,4.54282474 17.4166562,4.51077233 17.3094116,4.51077233 L13.5425476,4.51077233 L13.5425476,2.53803704 C13.5425476,2.24069548 13.3018521,2 13.0045105,2 L10.9952879,2 C10.6981479,2 10.4572509,2.24089706 10.4572509,2.53803704 L10.4572509,4.51097392 L6.54725967,4.51097392 C6.25011969,4.51097392 6.00922263,4.75187098 6.00922263,5.04901096 L6.00922263,7.9548948 C6.00922263,8.25203477 6.25011969,8.49293184 6.54725967,8.49293184 L10.4574524,8.49293184 L10.4574524,10.0177397 L6.69058838,10.0177397 C6.58314225,10.0177397 6.47851833,10.0497921 6.38961824,10.1098652 L4.2370669,11.5627063 C4.0886985,11.6628953 4,11.8298098 4,12.0088195 C4,12.187426 4.0886985,12.3547436 4.2370669,12.454731 L6.38941666,13.9077737 C6.47851833,13.9676452 6.58314225,13.9998992 6.69058838,13.9998992 L10.4574524,13.9998992 L10.4574524,21.0492125 C10.4574524,21.3463525 10.6983495,21.5872496 10.9954895,21.5872496 L13.0047121,21.5872496 C13.3020537,21.5872496 13.5427491,21.3463525 13.5427491,21.0492125 L13.5427491,13.9998992 L17.4527403,13.9998992 C17.7500819,13.9998992 17.990979,13.7590021 17.990979,13.4616606 L17.990979,10.5557767 C17.990979,10.2586368 17.7500819,10.0177397 17.4527403,10.0177397 L13.5425476,10.0177397 L13.5425476,8.49293184 L17.3094116,8.49293184 C17.4166562,8.49293184 17.5216833,8.46087943 17.6103818,8.40080635 L19.7629331,6.94776364 C19.9110999,6.84777624 20,6.68045861 20,6.50185209 C20,6.32324556 19.9110999,6.15592793 19.7629331,6.05594053 Z M16.9147033,12.9236235 L13.0045105,12.9236235 L10.9952879,12.9236235 L6.85528537,12.9236235 L5.5000126,12.0086179 L6.85528537,11.0938138 L10.9954895,11.0938138 L13.0047121,11.0938138 L16.9147033,11.0938138 L16.9147033,12.9236235 Z M17.1447146,7.41685775 L13.0045105,7.41685775 L10.9952879,7.41685775 L7.08529671,7.41685775 L7.08529671,5.58724959 L10.9952879,5.58724959 L13.0045105,5.58724959 L17.1447146,5.58724959 L18.4999874,6.50185209 L17.1447146,7.41685775 Z\"\n            />\n        </svg>\n    );\n}\n\nexport function emojiGroup_activities(group = \"Activities\") {\n    return (\n        <svg className=\"emojiGroup-icon\" viewBox=\"0 0 24 24\">\n            <title>{t(group)}</title>\n            <path\n                fill=\"currentColor\"\n                d=\"M16.7634901,8.64140896 C16.8282904,9.00807085 16.5809692,9.36033265 16.2157473,9.42495299 L12.7984297,10.0403761 L14.1120765,15.2595029 C14.1379966,15.3696635 14.1613967,15.6195048 14.1432166,15.7336254 L13.5470536,20.1911683 C13.4746932,20.6199305 13.0614111,20.9086519 12.6261689,20.8362916 C12.1909266,20.7637512 11.8982451,20.3609091 11.9706055,19.9294469 L12.5469684,15.5961047 C12.5469684,15.5921446 12.3487874,14.7906005 12.3487874,14.7906005 C12.3345674,14.8269607 8.49370764,20.6031904 8.49370764,20.6031904 C8.2721265,20.9801123 7.785044,21.113313 7.40038202,20.8944319 C7.01950007,20.6782508 6.88611938,20.1951283 7.10626051,19.8180263 L10.7890794,14.294338 L9.65039358,9.89259539 C9.56777315,9.52989353 9.83597453,9.15945162 10.2064164,9.0971713 L15.4385033,8.15540647 L9.05225051,3.94158483 L8.62474831,4.55304797 C8.48866761,4.76148904 8.21182619,4.81728933 8.00428513,4.67994863 C7.79566405,4.54422793 7.73626375,4.2668465 7.87234445,4.05822543 L8.6027882,3 L16.4655886,8.18402662 C16.4798086,8.19446667 16.7132698,8.3562875 16.7634901,8.64140896 Z M9.97727525,6.02995556 C10.714019,6.02995556 11.3125221,6.62179859 11.3127021,7.34990233 C11.3127021,8.08034608 10.714019,8.67110912 9.97727525,8.67110912 C9.23603145,8.67110912 8.63788838,8.08052608 8.63788838,7.34990233 C8.63788838,6.62179859 9.23603145,6.02995556 9.97727525,6.02995556 Z\"\n            />\n        </svg>\n    );\n}\n\nexport function emojiGroup_objects(group = \"Objects\") {\n    return (\n        <svg className=\"emojiGroup-icon\" viewBox=\"0 0 24 24\">\n            <title>{t(group)}</title>\n            <path\n                fill=\"currentColor\"\n                fillRule=\"evenodd\"\n                d=\"M17.4781671,6.08771565 C17.130662,5.41988765 16.6736986,4.86511431 16.1074207,4.42368331 C15.5409989,3.98239614 14.9002146,3.63474585 14.1856429,3.38073244 C13.4706397,3.1270067 12.7421161,3 11.9999281,3 C11.2577401,3 10.5292165,3.12686287 9.81435712,3.38073244 C9.09949778,3.63474585 8.45885723,3.98239614 7.89243548,4.42368331 C7.32615757,4.86511431 6.86905033,5.41974381 6.52140143,6.08771565 C6.17375253,6.75568749 6,7.47630311 6,8.24985017 C6,9.46080084 6.40244999,10.5076353 7.20706229,11.3904973 C7.55873857,11.7732434 7.84971653,12.1131266 8.08014,12.410003 C8.31070731,12.7067355 8.54314447,13.0798447 8.77745149,13.5290428 C9.0117585,13.9782409 9.14466193,14.3982404 9.1758741,14.7888975 C8.80866365,15.0076712 8.62513035,15.3279928 8.62513035,15.750006 C8.62513035,16.0391153 8.72279423,16.2891013 8.918122,16.499964 C8.72279423,16.7109706 8.62513035,16.9609567 8.62513035,17.2500659 C8.62513035,17.6564011 8.80104041,17.9726952 9.15257285,18.1995237 C9.05088159,18.3790304 9.00010788,18.5625644 9.00010788,18.7501259 C9.00010788,19.1094268 9.1230867,19.3870292 9.36918817,19.5820701 C9.61514581,19.7773987 9.91791823,19.8750629 10.2773616,19.8750629 C10.4335663,20.2188297 10.6680171,20.4922609 10.9804265,20.6953565 C11.2928358,20.8984522 11.6327176,21 11.9999281,21 C12.3671385,21 12.7070203,20.8984522 13.0194297,20.6953565 C13.3319829,20.4922609 13.5664337,20.2188297 13.7226384,19.8750629 C14.0819379,19.8750629 14.3848542,19.7773987 14.6308118,19.5820701 C14.8769133,19.3870292 14.9998921,19.1094268 14.9998921,18.7501259 C14.9998921,18.5625644 14.9489746,18.3790304 14.8472833,18.1995237 C15.1988158,17.9728391 15.3747258,17.6564011 15.3747258,17.2500659 C15.3747258,16.9609567 15.2769181,16.7109706 15.0817342,16.499964 C15.2769181,16.2891013 15.3747258,16.0391153 15.3747258,15.750006 C15.3747258,15.3279928 15.1911925,15.0078151 14.8238382,14.7888975 C14.8551942,14.3982404 14.9880977,13.9782409 15.2224047,13.5290428 C15.4569994,13.0798447 15.6892927,12.7067355 15.91986,12.410003 C16.1504273,12.1131266 16.4414053,11.7732434 16.7927939,11.3904973 C17.5974062,10.5076353 18,9.46080084 18,8.24985017 C18,7.47630311 17.8261036,6.75568749 17.4781671,6.08771565 L17.4781671,6.08771565 Z M15.702957,10.3591971 C15.6247108,10.4450668 15.5056156,10.5739434 15.3455273,10.7458268 C15.1854391,10.9177101 15.0663438,11.0464429 14.9882415,11.1324565 C13.9883014,12.3278729 13.4375577,13.4917894 13.3360103,14.6246374 L10.6639897,14.6246374 C10.5624423,13.4917894 10.0116986,12.3278729 9.01161467,11.1324565 C8.93351233,11.0465867 8.81441705,10.9177101 8.654185,10.7458268 C8.49409678,10.5739434 8.37485766,10.4452107 8.29675532,10.3591971 C7.76557312,9.74199915 7.4999101,9.03878763 7.4999101,8.24985017 C7.4999101,7.68730972 7.63468338,7.16389251 7.90422994,6.6794547 C8.17392034,6.1950169 8.52545278,5.79860639 8.9589711,5.48993551 C9.39248942,5.18126463 9.87289791,4.93918957 10.4003404,4.76342264 C10.9276391,4.58751189 11.460835,4.49977226 11.9999281,4.49977226 C12.5390212,4.49977226 13.0722171,4.58751189 13.5995158,4.76342264 C14.1268144,4.93918957 14.6072229,5.18126463 15.0408851,5.48993551 C15.4744034,5.79860639 15.8260797,6.19516074 16.0954824,6.6794547 C16.3648851,7.16389251 16.4998022,7.68730972 16.4998022,8.24985017 C16.4998022,9.03878763 16.234283,9.74199915 15.702957,10.3591971 L15.702957,10.3591971 Z M13.5410693,6.16674126 C13.1543994,6.05562304 12.7655718,6 12.375018,6 C12.2734596,6 12.185567,6.03286235 12.1113402,6.09897065 C12.0371134,6.16495109 12,6.24307909 12,6.33335464 C12,6.4236302 12.0371134,6.5017582 12.1113402,6.56773864 C12.185567,6.6335912 12.2734596,6.66670929 12.375018,6.66670929 C12.7813953,6.66670929 13.1953968,6.75353238 13.6175977,6.9270507 C14.0393671,7.10069689 14.2501079,7.34722844 14.2501079,7.66677322 C14.2501079,7.75704878 14.2870774,7.83530465 14.3614481,7.90115722 C14.4358187,7.96700978 14.5235675,8 14.624982,8 C14.7266842,8 14.814433,7.96713765 14.8888036,7.90115722 C14.9630304,7.83517678 15,7.75704878 15,7.66677322 C15,7.30554312 14.8532726,6.99303114 14.560537,6.72923726 C14.2678015,6.46544339 13.9277392,6.2777316 13.5410693,6.16674126 L13.5410693,6.16674126 Z\"\n            />\n        </svg>\n    );\n}\n\nexport function emojiGroup_symbols(group = \"Symbols\") {\n    return (\n        <svg className=\"emojiGroup-icon\" viewBox=\"0 0 24 24\">\n            <title>{t(group)}</title>\n            <path\n                fill=\"currentColor\"\n                d=\"M19.1442646,4.83575742 C18.1650678,3.85559657 16.4547374,3.73144287 14.3690482,4.52537315 C13.5381247,4.85169622 12.7411635,5.25877639 11.9896,5.74077261 C11.2380365,5.25877639 10.4410753,4.85169622 9.61015178,4.52537315 C7.52446261,3.73144287 5.82718816,3.83926056 4.8349354,4.83575742 C3.84268265,5.83225429 3.73170701,7.52793255 4.52485642,9.61567516 C4.85085852,10.4474168 5.25753831,11.2451626 5.73906044,11.997466 C5.25753831,12.7497695 4.85085852,13.5475153 4.52485642,14.3792569 C3.73170701,16.4669995 3.83941866,18.165945 4.8349354,19.1591746 C5.4505037,19.7385409 6.27598921,20.04073 7.11972793,19.9955786 C7.98011582,19.972593 8.82930089,19.7943985 9.62647173,19.4695589 C10.4517722,19.142269 11.243226,18.73521 11.9896,18.2541594 C12.7411635,18.7361557 13.5381247,19.1432358 14.3690482,19.4695589 C15.1692842,19.7955535 16.0218905,19.9737698 16.885584,19.9955786 C17.7293227,20.04073 18.5548082,19.7385409 19.1703765,19.1591746 C20.1495733,18.1790138 20.2736049,16.4669995 19.4804555,14.3792569 C19.1461294,13.5464957 18.7306859,12.7487154 18.2401396,11.997466 C18.7216617,11.2451626 19.1283415,10.4474168 19.4543436,9.61567516 C20.247493,7.52793255 20.1495733,5.83225429 19.1442646,4.83575742 Z M5.74558842,9.15173236 C5.15480636,7.59654381 5.15807034,6.36154114 5.74558842,5.76037582 C6.11674164,5.43561893 6.60182527,5.2721976 7.09361601,5.30623463 C7.79440087,5.33070398 8.48521159,5.480066 9.13360934,5.74730701 C9.70769152,5.97226391 10.2631967,6.24209666 10.7949799,6.55430611 C9.18669216,7.76170948 7.7580096,9.19179863 6.55179379,10.8016698 C6.24050431,10.2735668 5.97094753,9.72190607 5.74558842,9.15173236 Z M11.9896,7.30902996 C12.8957173,7.95068414 13.7452817,8.66882467 14.5289837,9.45558222 C15.3149674,10.2400558 16.0324016,11.0904566 16.6734247,11.997466 C16.0324016,12.9044755 15.3149674,13.7548763 14.5289837,14.5393498 C13.7452817,15.3261074 12.8957173,16.0442479 11.9896,16.6859021 C11.0834827,16.0442479 10.2339183,15.3261074 9.45021631,14.5393498 C8.66423258,13.7548763 7.94679839,12.9044755 7.30577532,11.997466 C8.59381135,10.1831894 10.1771079,8.59833411 11.9896,7.30902996 Z M9.1466653,18.247625 C7.59300638,18.8389888 6.35921842,18.8357215 5.75864438,18.247625 C5.15807034,17.6595285 5.15480636,16.411457 5.75864438,14.8562685 C5.98338002,14.2816211 6.25294737,13.725569 6.56484974,13.1932623 C7.77126614,14.8029593 9.19992209,16.2330218 10.8080359,17.4406259 C10.2762527,17.7528354 9.72074748,18.0226681 9.1466653,18.247625 Z M18.2336116,14.8431997 C18.8243937,16.3983882 18.8211297,17.6333909 18.2336116,18.2345562 C17.6460935,18.8357215 16.3992496,18.8389888 14.8455907,18.2345562 C14.2715085,18.0095993 13.7160033,17.7397666 13.1842201,17.4275571 C13.9922383,16.8232472 14.7558043,16.1615663 15.4690126,15.4476322 C16.1822445,14.7337217 16.8432746,13.9694039 17.4469902,13.1605902 C17.753106,13.6998229 18.0161333,14.2624472 18.2336116,14.8431997 Z M18.2336116,9.15173236 C18.0088759,9.72637974 17.7393086,10.2824319 17.4274062,10.8147386 C16.2209564,9.20507058 14.7923049,7.7750125 13.1842201,6.56737492 C13.7160033,6.25516547 14.2715085,5.98533272 14.8455907,5.76037582 C15.4931609,5.48865125 16.184001,5.33485713 16.885584,5.30623463 C17.3773747,5.2721976 17.8624584,5.43561893 18.2336116,5.76037582 C18.8211297,6.36154114 18.8243937,7.59654381 18.2336116,9.15173236 Z M11.9896,14.284508 C13.2514561,14.284508 14.2743925,13.2605644 14.2743925,11.997466 C14.2743925,10.7343676 13.2514561,9.71042404 11.9896,9.71042404 C10.7277439,9.71042404 9.70480748,10.7343676 9.70480748,11.997466 C9.70480748,12.6040273 9.945526,13.1857453 10.3740077,13.6146489 C10.8024894,14.0435525 11.3836353,14.284508 11.9896,14.284508 Z M11.9896,11.0173052 C12.5303955,11.0173052 12.9687968,11.4561381 12.9687968,11.997466 C12.9687968,12.5387939 12.5303955,12.9776269 11.9896,12.9776269 C11.4488045,12.9776269 11.0104032,12.5387939 11.0104032,11.997466 C11.0104032,11.4561381 11.4488045,11.0173052 11.9896,11.0173052 Z\"\n            />\n        </svg>\n    );\n}\n\nexport function emojiGroup_flags(group = \"Flags\") {\n    return (\n        <svg className=\"emojiGroup-icon\" viewBox=\"0 0 24 24\">\n            <title>{t(group)}</title>\n            <path\n                fill=\"currentColor\"\n                d=\"M6.32484076,15.8895966 L6.35881104,19.3205945 C6.35881104,19.6942675 6.05307856,20 5.67940552,20 C5.30573248,20 5,19.6942675 5,19.3205945 L5,13.104034 L5,5.63057325 L5,4.67940552 C5,4.30573248 5.30573248,4 5.67940552,4 C6.01910828,4 6.29087049,4.23779193 6.32484076,4.57749469 L6.32484076,15.8895966 Z M18.2144374,12.7643312 C18.2823779,12.866242 18.3163482,12.9681529 18.3163482,13.0700637 C18.3163482,13.4437367 18.0106157,13.7494692 17.6369427,13.7494692 C17.5690021,13.7494692 17.5010616,13.7494692 17.433121,13.7154989 C16.7197452,13.5116773 15.9384289,13.4097665 15.089172,13.4097665 C13.9681529,13.4097665 12.881104,13.5796178 11.7261146,13.7494692 C10.5711253,13.9193206 9.34819533,14.089172 8.15923567,14.089172 C7.98938429,14.089172 7.78556263,14.089172 7.61571125,14.089172 L7.61571125,5.29087049 C7.78556263,5.29087049 7.98938429,5.29087049 8.15923567,5.29087049 C9.28025478,5.29087049 10.3673036,5.12101911 11.522293,4.95116773 C12.6772824,4.78131635 13.9002123,4.61146497 15.089172,4.61146497 C16.07431,4.61146497 16.9575372,4.74734607 17.8067941,4.985138 C18.0106157,5.05307856 18.1804671,5.18895966 18.2484076,5.39278132 C18.3163482,5.59660297 18.3163482,5.80042463 18.2144374,5.97027601 C17.670913,6.88747346 17.1273885,7.90658174 16.5498938,9.06157113 C17.1273885,10.3184713 17.670913,11.5414013 18.2144374,12.7643312 Z\"\n            />\n        </svg>\n    );\n}\n\nexport function embed() {\n    return (\n        <svg className=\"richEditorButton-icon\" viewBox=\"0 0 24 24\">\n            <title>{t(\"Embed\")}</title>\n            <path\n                fill=\"currentColor\"\n                d=\"M4,5a.944.944,0,0,0-1,.875v12.25A.944.944,0,0,0,4,19H20a.944.944,0,0,0,1-.875V5.875A.944.944,0,0,0,20,5ZM4,4H20a1.9,1.9,0,0,1,2,1.778V18.222A1.9,1.9,0,0,1,20,20H4a1.9,1.9,0,0,1-2-1.778V5.778A1.9,1.9,0,0,1,4,4ZM9.981,16.382l-4.264-3.7V11.645L9.981,7.45V9.126l-3.2,2.958,3.2,2.605Zm4.326-1.693,3.2-2.605-3.2-2.958V7.45l4.265,4.195v1.041l-4.265,3.7Z\"\n                style={currentColorFill}\n            />\n        </svg>\n    );\n}\n\nexport function image() {\n    return (\n        <svg className=\"richEditorButton-icon\" viewBox=\"0 0 24 24\">\n            <title>{t(\"Image\")}</title>\n            <path\n                fill=\"currentColor\"\n                fillRule=\"nonzero\"\n                d=\"M3,5 L3,19 L21,19 L21,5 L3,5 Z M3,4 L21,4 C21.5522847,4 22,4.44771525 22,5 L22,19 C22,19.5522847 21.5522847,20 21,20 L3,20 C2.44771525,20 2,19.5522847 2,19 L2,5 C2,4.44771525 2.44771525,4 3,4 Z M4,18 L20,18 L20,13.7142857 L15.2272727,7.42857143 L10.5,13.7142857 L7.5,11.5 L4,16.5510204 L4,18 Z M7.41729323,10.2443609 C8.24572036,10.2443609 8.91729323,9.57278803 8.91729323,8.7443609 C8.91729323,7.91593378 8.24572036,7.2443609 7.41729323,7.2443609 C6.58886611,7.2443609 5.91729323,7.91593378 5.91729323,8.7443609 C5.91729323,9.57278803 6.58886611,10.2443609 7.41729323,10.2443609 Z\"\n            />\n        </svg>\n    );\n}\n","/**\n * @author Adam (charrondev) Charron <adam.c@vanillaforums.com>\n * @copyright 2009-2018 Vanilla Forums Inc.\n * @license https://opensource.org/licenses/GPL-2.0 GPL-2.0\n */\n\nimport Quill, { IFormats } from \"quill/core\";\nimport React from \"react\";\nimport { IStoreState, IEditorInstance } from \"@rich-editor/@types/store\";\nimport getStore from \"@dashboard/state/getStore\";\nimport { connect } from \"react-redux\";\nimport { getIDForQuill } from \"@rich-editor/quill/utility\";\n\ninterface IContextProps {\n    quill: Quill;\n    editorID: string;\n}\n\ninterface IGeneratedContextProps {\n    instanceState: IEditorInstance;\n    activeFormats: IFormats;\n}\n\ntype Omit<T, K extends keyof T> = Pick<T, Exclude<keyof T, K>>;\n\nexport type IWithEditorProps = IContextProps & IGeneratedContextProps;\n\nconst { Consumer, Provider } = React.createContext<IContextProps>({} as any);\n\nexport { Consumer as EditorConsumer, Provider as EditorProvider };\n\n/**\n * Map in the instance state of the current editor.\n */\nfunction mapStateToProps(state: IStoreState, ownProps: IContextProps) {\n    const { editorID, quill } = ownProps;\n    const instanceState = state.editor.instances[editorID];\n    const { lastGoodSelection } = instanceState;\n    const activeFormats = lastGoodSelection ? quill.getFormat(lastGoodSelection) : {};\n    return {\n        instanceState,\n        activeFormats,\n    };\n}\nconst withRedux = connect(mapStateToProps);\n\n/**\n * Map a quill context to props.\n *\n * @param WrappedComponent - The component to map.\n *\n * @returns A component with a quill context injected as props.\n */\nexport function withEditor<T extends IWithEditorProps = IWithEditorProps>(\n    WrappedComponent: React.ComponentClass<IWithEditorProps>,\n) {\n    // the func used to compute this HOC's displayName from the wrapped component's displayName.\n    const ReduxComponent = withRedux(WrappedComponent);\n    const displayName = WrappedComponent.displayName || WrappedComponent.name || \"Component\";\n    class ComponentWithEditor extends React.Component<Omit<T, keyof IWithEditorProps>> {\n        public static displayName = `withEditor(${displayName})`;\n        public render() {\n            return (\n                <Consumer>\n                    {context => {\n                        return <ReduxComponent {...context} {...this.props} />;\n                    }}\n                </Consumer>\n            );\n        }\n    }\n\n    return ComponentWithEditor;\n}\n","/**\n * @author Adam (charrondev) Charron <adam.c@vanillaforums.com>\n * @copyright 2009-2018 Vanilla Forums Inc.\n * @license https://opensource.org/licenses/GPL-2.0 GPL-2.0\n */\n\nimport React from \"react\";\nimport { t } from \"@dashboard/application\";\nimport getStore from \"@dashboard/state/getStore\";\nimport { hasPermission } from \"@dashboard/permissions\";\nimport { log, debug, sanitizeUrl } from \"@dashboard/utility\";\nimport EmbedPopover from \"@rich-editor/components/popovers/EmbedPopover\";\nimport EmojiPopover from \"@rich-editor/components/popovers/EmojiPopover\";\nimport MentionToolbar from \"@rich-editor/components/toolbars/MentionToolbar\";\nimport ParagraphToolbar from \"@rich-editor/components/toolbars/ParagraphToolbar\";\nimport InlineToolbar from \"@rich-editor/components/toolbars/InlineToolbar\";\nimport UploadButton from \"@rich-editor/components/editor/pieces/EditorUploadButton\";\nimport { EditorProvider } from \"@rich-editor/components/context\";\nimport EditorDescriptions from \"@rich-editor/components/editor/pieces/EditorDescriptions\";\nimport { Provider as ReduxProvider } from \"react-redux\";\nimport { actions } from \"@rich-editor/state/instance/instanceActions\";\nimport { getIDForQuill, SELECTION_UPDATE } from \"@rich-editor/quill/utility\";\nimport { IStoreState } from \"@rich-editor/@types/store\";\nimport { delegateEvent, removeDelegatedEvent } from \"@dashboard/dom\";\nimport EmbedInsertionModule from \"@rich-editor/quill/EmbedInsertionModule\";\nimport Quill, { Sources } from \"quill/core\";\nimport { hot } from \"react-hot-loader\";\nimport registerQuill from \"@rich-editor/quill/registerQuill\";\n\ninterface IProps {\n    editorID: string;\n    editorDescriptionID: string;\n    bodybox: HTMLInputElement;\n    isPrimaryEditor: boolean;\n}\n\nexport class Editor extends React.Component<IProps> {\n    private hasUploadPermission: boolean;\n    private quillMountRef: React.RefObject<HTMLDivElement> = React.createRef();\n    private store = getStore<IStoreState>();\n    private allowPasteListener = true;\n    private editorID: string;\n    private quill: Quill;\n    private delegatedHandlerHash: string;\n\n    constructor(props) {\n        super(props);\n        log(\"Initializing Rich Editor\");\n        this.hasUploadPermission = hasPermission(\"uploads.add\");\n    }\n\n    public componentDidMount() {\n        // Setup quill\n        const { bodybox } = this.props;\n        registerQuill();\n        const options = { theme: \"vanilla\" };\n        this.quill = new Quill(this.quillMountRef!.current!, options);\n        bodybox.style.display = \"none\";\n\n        this.editorID = getIDForQuill(this.quill);\n\n        // Setup syncing\n        this.setupBodyBoxSync();\n        this.setupDebugPasteListener();\n        this.store.dispatch(actions.createInstance(this.editorID));\n        this.quill.on(Quill.events.EDITOR_CHANGE, this.onQuillUpdate);\n\n        // Add a listener for a force selection update.\n        document.addEventListener(SELECTION_UPDATE, () =>\n            window.requestAnimationFrame(() => {\n                this.onQuillUpdate(Quill.events.SELECTION_CHANGE, null, null, Quill.sources.USER);\n            }),\n        );\n\n        this.addQuoteHandler();\n\n        // Once we've created our quill instance we need to force an update to allow all of the quill dependent\n        // Modules to render.\n        this.forceUpdate();\n    }\n\n    public componentWillUnmount() {\n        removeDelegatedEvent(this.delegatedHandlerHash);\n    }\n\n    public render() {\n        const { editorDescriptionID } = this.props;\n\n        // These items CANNOT be rendered before quill is ready, but the main text area is required for quill to render.\n        // These should all re-render after componentDidMount calls forceUpdate().\n        const quillDependantItems = this.quill && (\n            <React.Fragment>\n                <InlineToolbar />\n                <ParagraphToolbar />\n                <MentionToolbar />\n                <div className=\"richEditor-embedBar\">\n                    <ul\n                        className=\"richEditor-menuItems richEditor-inlineMenuItems\"\n                        role=\"menubar\"\n                        aria-label={t(\"Inline Level Formatting Menu\")}\n                    >\n                        <li className=\"richEditor-menuItem u-richEditorHiddenOnMobile\" role=\"menuitem\">\n                            <EmojiPopover />\n                        </li>\n                        {this.hasUploadPermission && (\n                            <li className=\"richEditor-menuItem\" role=\"menuitem\">\n                                <UploadButton />\n                            </li>\n                        )}\n                        <li className=\"richEditor-menuItem\" role=\"menuitem\">\n                            <EmbedPopover />\n                        </li>\n                    </ul>\n                </div>\n            </React.Fragment>\n        );\n\n        return (\n            <ReduxProvider store={this.store}>\n                <EditorProvider value={{ quill: this.quill, editorID: this.editorID }}>\n                    <EditorDescriptions id={editorDescriptionID} />\n                    <div className=\"richEditor-frame InputBox\">\n                        <div className=\"richEditor-textWrap\" ref={this.quillMountRef}>\n                            <div\n                                className=\"ql-editor richEditor-text userContent\"\n                                data-gramm=\"false\"\n                                contentEditable={true}\n                                data-placeholder=\"Create a new post...\"\n                                tabIndex={0}\n                            />\n                        </div>\n                        {quillDependantItems}\n                    </div>\n                </EditorProvider>\n            </ReduxProvider>\n        );\n    }\n\n    /**\n     * Quill dispatches a lot of unnecessary updates. We need to filter out only the ones we want.\n     *\n     * We need\n     * - Every non-silent event.\n     * - Every selection change event (even the \"silent\" ones).\n     */\n    private onQuillUpdate = (type: string, newValue, oldValue, source: Sources) => {\n        let shouldDispatch = false;\n        if (type === Quill.events.SELECTION_CHANGE) {\n            shouldDispatch = true;\n        } else if (source !== Quill.sources.SILENT) {\n            shouldDispatch = true;\n        }\n\n        if (shouldDispatch) {\n            this.store.dispatch(actions.setSelection(this.editorID, this.quill.getSelection(), this.quill));\n        }\n    };\n\n    /**\n     * Synchronization from quill's contents to the bodybox for legacy contexts.\n     *\n     * Once we rewrite the post page, this should no longer be necessary.\n     */\n    private setupBodyBoxSync() {\n        const { bodybox } = this.props;\n        const initialValue = bodybox.value;\n\n        if (initialValue) {\n            log(\"Setting existing content as contents of editor\");\n            this.quill.setContents(JSON.parse(initialValue));\n        }\n\n        this.quill.on(\"text-change\", () => {\n            bodybox.value = JSON.stringify(this.quill.getContents().ops);\n        });\n\n        // Listen for the legacy form event if applicable and clear the form.\n        const form = this.quill.container.closest(\"form\");\n        if (form) {\n            form.addEventListener(\"X-ClearCommentForm\", () => {\n                this.allowPasteListener = false;\n                this.quill.setContents([]);\n                this.quill.setSelection(null as any, Quill.sources.USER);\n                this.allowPasteListener = true;\n            });\n        }\n    }\n\n    private quoteButtonClickHandler = (event: MouseEvent, triggeringElement: Element) => {\n        event.preventDefault();\n        const embedInserter: EmbedInsertionModule = this.quill.getModule(\"embed/insertion\");\n        const url = triggeringElement.getAttribute(\"data-scrape-url\") || \"\";\n        void embedInserter.scrapeMedia(url);\n    };\n\n    private addQuoteHandler() {\n        this.delegatedHandlerHash = delegateEvent(\"click\", \".js-quoteButton\", this.quoteButtonClickHandler)!;\n    }\n\n    /**\n     * Adds a paste listener on the old bodybox for debugging purposes.\n     *\n     * Pasting a valid quill JSON delta into the box will reset the contents of the editor to that delta.\n     * This only works for PASTE. Not editing the contents.\n     */\n    private setupDebugPasteListener() {\n        if (debug()) {\n            const { bodybox } = this.props;\n            bodybox.addEventListener(\"paste\", event => {\n                if (this.allowPasteListener) {\n                    event.stopPropagation();\n                    event.preventDefault();\n\n                    // Get pasted data via clipboard API\n                    const clipboardData = event.clipboardData || window.clipboardData;\n                    const pastedData = clipboardData.getData(\"Text\");\n                    const delta = JSON.parse(pastedData);\n                    this.quill.setContents(delta);\n                }\n            });\n        }\n    }\n}\n\nexport default hot(module)(Editor);\n","/**\n * Permissions utility functions ported over from the server.\n *\n * @see {\\Vanilla\\Permsissions} for the server-side implementation.\n * @see {Gdn_Controller->renderMaster()} for the injection of permissions into the client.\n *\n * @copyright 2009-2018 Vanilla Forums Inc.\n * @license https://opensource.org/licenses/GPL-2.0 GPL-2.0\n */\n\nimport gdn from \"@dashboard/gdn\";\n\n/**\n * Determine if all of the provided permissions are present.\n */\nexport function hasPermission(permissions: string | string[], id: number | null = null) {\n    if (typeof permissions === \"string\") {\n        permissions = [permissions];\n    }\n\n    if (isBanned(permissions)) {\n        return false;\n    }\n\n    if (gdn.permissions.isAdmin) {\n        return true;\n    }\n\n    for (const permission of permissions) {\n        if (hasInternal(permission, id) === false) {\n            return false;\n        }\n    }\n\n    return true;\n}\n\n/**\n * Determine if any of the provided permissions are present.\n */\nexport function hasAny(permissions: string | string[], id: number | null = null): boolean {\n    if (typeof permissions === \"string\") {\n        permissions = [permissions];\n    }\n\n    if (isBanned(permissions)) {\n        return false;\n    }\n\n    if (gdn.permissions.isAdmin) {\n        return true;\n    }\n\n    let nullCount = 0;\n    for (const permission of permissions) {\n        const has = hasInternal(permission, id);\n        if (has === true) {\n            return true;\n        } else if (has === null) {\n            nullCount++;\n        }\n    }\n    return nullCount === permissions.length;\n}\n\n/**\n * Determine if the current user is banned.\n *\n * @param permissions - An optional array of permissions being checked. Any permission starting with \"!\" means\n * that a ban with that name is ignored.\n */\nexport function isBanned(permissions: string[] = []): boolean {\n    const ban = getBan(permissions);\n    return ban !== null;\n}\n\n/**\n * Get the currently active ban.\n *\n * @param permissions - An optional array of permissions being checked. Any permission starting with \"!\" means\n * that a ban with that name is ignored.\n */\nfunction getBan(permissions: string[] = []): object | null {\n    permissions = permissions.map(str => str.toLowerCase());\n    const bans = gdn.permissions.bans || {};\n\n    for (const name of bans) {\n        const ban = bans[name];\n\n        if (name in permissions) {\n            // The permission check is overriding the ban.\n            continue;\n        } else if (ban.except) {\n            const except = typeof ban.except === \"string\" ? [ban.except] : ban.except;\n\n            // There is an exception, so see if any of those permissions apply.\n            let has = false;\n            for (const permission of except) {\n                if (hasInternal(permission)) {\n                    has = true;\n                    break;\n                }\n            }\n            if (has) {\n                continue;\n            }\n        }\n        // There was no exception to the ban so we are banned.\n        ban.type = name;\n        return ban;\n    }\n    return null;\n}\n\n/**\n * Check just the permissions array, ignoring overrides from admin/bans.\n */\nfunction hasInternal(permission: string, id: number | null = null): boolean | null {\n    const permissions = gdn.permissions.permissions || {};\n\n    if (permission === \"admin\") {\n        return !!gdn.permissions.isAdmin;\n    } else if (permission.substr(0, 1) === \"!\") {\n        // This is a ban so skip it.\n        return null;\n    } else if (permissions[permission] === true) {\n        return true;\n    } else if (id !== null && permissions[permission].indexOf && permissions[permission].indexOf(id) !== -1) {\n        return true;\n    }\n    return false;\n}\n","/**\n * @author Adam (charrondev) Charron <adam.c@vanillaforums.com>\n * @copyright 2009-2018 Vanilla Forums Inc.\n * @license https://opensource.org/licenses/GPL-2.0 GPL-2.0\n */\n\nimport React from \"react\";\nimport KeyboardModule from \"quill/modules/keyboard\";\nimport { t, isAllowedUrl } from \"@dashboard/application\";\nimport { withEditor, IWithEditorProps } from \"@rich-editor/components/context\";\nimport Popover from \"./pieces/Popover\";\nimport PopoverController, { IPopoverControllerChildParameters } from \"./pieces/PopoverController\";\nimport * as Icons from \"@rich-editor/components/icons\";\nimport { getRequiredID, IRequiredComponentID } from \"@dashboard/componentIDs\";\nimport EmbedInsertionModule from \"@rich-editor/quill/EmbedInsertionModule\";\n\ninterface IProps extends IWithEditorProps {}\n\ninterface IState extends IRequiredComponentID {\n    id: string;\n    url: string;\n    isInputValid: boolean;\n}\n\nexport class EmbedPopover extends React.PureComponent<IProps, IState> {\n    private embedModule: EmbedInsertionModule;\n\n    public constructor(props) {\n        super(props);\n        this.embedModule = props.quill.getModule(\"embed/insertion\");\n        this.state = {\n            id: getRequiredID(props, \"embedPopover\"),\n            url: \"\",\n            isInputValid: false,\n        };\n    }\n\n    get titleID(): string {\n        return this.state.id + \"-title\";\n    }\n\n    get descriptionID(): string {\n        return this.state.id + \"-description\";\n    }\n\n    public render() {\n        const title = t(\"Insert Media\");\n        const Icon = <Icons.embed />;\n\n        return (\n            <PopoverController id={this.state.id} classNameRoot=\"embedDialogue\" icon={Icon} onClose={this.clearInput}>\n                {(params: IPopoverControllerChildParameters) => {\n                    const { initialFocusRef, closeMenuHandler, isVisible } = params;\n\n                    const body = (\n                        <React.Fragment>\n                            <p id={this.descriptionID} className=\"insertMedia-description\">\n                                {t(\"Paste the URL of the media you want.\")}\n                            </p>\n                            <input\n                                className=\"InputBox\"\n                                placeholder={t(\"http://\")}\n                                value={this.state.url}\n                                onChange={this.inputChangeHandler}\n                                onKeyDown={this.buttonKeyDownHandler}\n                                aria-labelledby={this.titleID}\n                                aria-describedby={this.descriptionID}\n                                ref={initialFocusRef}\n                            />\n                        </React.Fragment>\n                    );\n\n                    // The blur handler goes on the link if the button is disabled.\n                    // We want it to be on the last element in the popover.\n                    const footer = (\n                        <React.Fragment>\n                            <input\n                                type=\"button\"\n                                className=\"Button Primary insertMedia-insert\"\n                                value={\"Insert\"}\n                                disabled={!this.state.isInputValid}\n                                aria-label={\"Insert Media\"}\n                                onClick={this.buttonClickHandler}\n                            />\n                        </React.Fragment>\n                    );\n\n                    return (\n                        <Popover\n                            id={params.id}\n                            descriptionID={this.descriptionID}\n                            titleID={this.titleID}\n                            title={title}\n                            body={body}\n                            footer={footer}\n                            additionalClassRoot=\"insertMedia\"\n                            onCloseClick={closeMenuHandler}\n                            isVisible={isVisible}\n                        />\n                    );\n                }}\n            </PopoverController>\n        );\n    }\n\n    private clearInput = () => {\n        this.setState({\n            url: \"\",\n        });\n    };\n\n    private submitUrl() {\n        this.clearInput();\n        this.embedModule.scrapeMedia(this.normalizeUrl(this.state.url));\n    }\n\n    /**\n     * Handle key-presses for the link toolbar.\n     */\n    private buttonKeyDownHandler = (event: React.KeyboardEvent<any>) => {\n        if (KeyboardModule.match(event.nativeEvent, \"enter\")) {\n            event.preventDefault();\n            event.stopPropagation();\n            this.state.isInputValid && this.submitUrl();\n        }\n    };\n\n    /**\n     * Handle a submit button click..\n     */\n    private buttonClickHandler = (event: React.MouseEvent<any>) => {\n        event.preventDefault();\n        this.submitUrl();\n    };\n\n    /**\n     * Control the inputs value.\n     */\n    private inputChangeHandler = (event: React.ChangeEvent<any>) => {\n        const url = event.target.value;\n        const isInputValid = isAllowedUrl(this.normalizeUrl(url));\n        this.setState({ url, isInputValid });\n    };\n\n    /**\n     * Normalize the URL with a prepended http if there isn't one.\n     */\n    private normalizeUrl(url: string) {\n        const result = url.match(/^https?:\\/\\//) ? url : \"http://\" + url;\n        return result;\n    }\n}\n\nexport default withEditor<IProps>(EmbedPopover);\n","/**\n * @copyright 2009-2018 Vanilla Forums Inc.\n * @license https://opensource.org/licenses/GPL-2.0 GPL-2.0\n */\n\nimport { BlockEmbed } from \"quill/blots/block\";\nimport { FOCUS_CLASS } from \"@dashboard/embeds\";\nimport Quill from \"quill/core\";\nimport { logWarning } from \"@dashboard/utility\";\nimport { getBlotAtIndex } from \"../../utility\";\nimport Parchment from \"parchment\";\n\n/**\n * A blot that can take focus and still behave as part of the Quill editor.\n *\n * @see {EmbedFocusModule}\n */\nexport default class FocusableEmbedBlot extends BlockEmbed {\n    public static tagName = \"div\";\n    public static className = \"js-embed\";\n    public static blotName = \"embed-focusable\";\n\n    /**\n     * Create the basic HTML structure for the Blot.\n     */\n    public static create(value?: any) {\n        const node = super.create(value) as HTMLElement;\n        node.setAttribute(\"contenteditable\", false);\n        node.classList.add(FOCUS_CLASS);\n        return node;\n    }\n\n    public domNode: HTMLElement;\n\n    constructor(domNode) {\n        super(domNode);\n        this.focusableElement.setAttribute(\"tabindex\", -1);\n    }\n\n    /**\n     * In addition to removing the FocusableBlot, we either:\n     * - Place selection on another FocusableBlot that will be in the same spot as this one after deletion.\n     * - Place the selection back in quill where this blot was.\n     */\n    public remove() {\n        if (!this.quill) {\n            return logWarning(\"Attempted to focus a an embed blot that has not been mounted yet.\");\n        }\n\n        const hadFocus = this.focusableElement === document.activeElement;\n        const offset = this.offset(this.quill.scroll);\n        super.remove();\n        this.quill.update(Quill.sources.USER);\n\n        // If the blot had focus before the removal we need to place the focus either on quill and set the selection\n        // To the blot that will take this ones place, or focus another FocusableBlot coming in.\n        if (hadFocus) {\n            const potentialNewEmbedToFocus = getBlotAtIndex(this.quill, offset, FocusableEmbedBlot);\n            if (potentialNewEmbedToFocus) {\n                potentialNewEmbedToFocus.focus();\n            } else {\n                this.quill.setSelection(offset, 0, Quill.sources.USER);\n            }\n        }\n    }\n\n    /**\n     * Inserts a newline after this blot and places the cursor there.\n     */\n    public insertNewlineAfter() {\n        if (!this.quill) {\n            return logWarning(\"Attempted to focus a an embed blot that has not been mounted yet.\");\n        }\n\n        const newBlot = Parchment.create(\"block\", \"\");\n        newBlot.insertInto(this.quill.scroll, this.next);\n        this.quill.update(Quill.sources.USER);\n        this.quill.setSelection(this.offset() + 1, 0, Quill.sources.USER);\n    }\n\n    /**\n     * Focus this blot and set quill's selection to where it is.\n     *\n     * The actual act of focusing this blot will cause quill to set it's internal selection to null, but this will still fire out the change anyways. Many of our own listeners cache the last valid selection, and null is not a valid selection.\n     */\n    public focus() {\n        if (!this.quill) {\n            return logWarning(\"Attempted to focus a an embed blot that has not been mounted yet.\");\n        }\n\n        const selfPosition = this.offset(this.scroll);\n        this.quill.setSelection(selfPosition, 0, Quill.sources.API);\n        this.focusableElement.focus();\n    }\n\n    /**\n     * Get the focusable element inside of this blot. This is not necessarily the one we set here in child nodes. It will be whatever gets the FOCUS_CLASS.\n     */\n    private get focusableElement(): HTMLElement {\n        if (this.domNode.classList.contains(FOCUS_CLASS)) {\n            return this.domNode;\n        } else {\n            const childToFocus = this.domNode.querySelector(\".\" + FOCUS_CLASS);\n            if (childToFocus instanceof HTMLElement) {\n                return childToFocus;\n            } else {\n                throw new Error(\n                    \"Attempting to focus a DOM Node that either does not exist or is not an HTMLElement.\" +\n                        childToFocus,\n                );\n            }\n        }\n    }\n\n    /**\n     * Get the attached quill instance.\n     *\n     * This will _NOT_ work before attach() is called.\n     */\n    protected get quill(): Quill | null {\n        if (!this.scroll || !this.scroll.domNode.parentNode) {\n            return null;\n        }\n\n        return Quill.find(this.scroll.domNode.parentNode!);\n    }\n}\n","/**\n * @author Adam (charrondev) Charron <adam.c@vanillaforums.com>\n * @copyright 2009-2018 Vanilla Forums Inc.\n * @license https://opensource.org/licenses/GPL-2.0 GPL-2.0\n */\n\nimport React, { MouseEvent, ChangeEvent } from \"react\";\nimport * as Icons from \"@rich-editor/components/icons\";\nimport EmbedInsertionModule from \"@rich-editor/quill/EmbedInsertionModule\";\nimport { withEditor, IWithEditorProps } from \"@rich-editor/components/context\";\nimport { uploadImage } from \"@dashboard/apiv2\";\nimport { isFileImage } from \"@dashboard/utility\";\n\ninterface IProps extends IWithEditorProps {}\n\nexport class EditorUploadButton extends React.Component<IProps, {}> {\n    private inputRef: React.RefObject<HTMLInputElement> = React.createRef();\n\n    public render() {\n        return (\n            <button\n                className=\"richEditor-button richEditor-embedButton richEditor-buttonUpload\"\n                type=\"button\"\n                aria-pressed=\"false\"\n                onClick={this.onFakeButtonClick}\n            >\n                <Icons.image />\n                <input\n                    ref={this.inputRef}\n                    onChange={this.onInputChange}\n                    className=\"richEditor-upload\"\n                    type=\"file\"\n                    accept=\"image/gif, image/jpeg, image/jpg, image/png\"\n                />\n            </button>\n        );\n    }\n\n    private onFakeButtonClick = (event: MouseEvent<any>) => {\n        if (this.inputRef && this.inputRef.current) {\n            this.inputRef.current.click();\n        }\n    };\n\n    private onInputChange = (event: ChangeEvent<any>) => {\n        // Grab the first file.\n        const file =\n            this.inputRef && this.inputRef.current && this.inputRef.current.files && this.inputRef.current.files[0];\n        const embedInsertion =\n            this.props.quill && (this.props.quill.getModule(\"embed/insertion\") as EmbedInsertionModule);\n\n        if (file && isFileImage(file) && embedInsertion) {\n            const imagePromise = uploadImage(file);\n            embedInsertion.createEmbed({\n                dataPromise: imagePromise,\n                loaderData: {\n                    type: \"image\",\n                },\n            });\n        }\n    };\n}\n\nexport default withEditor<IProps>(EditorUploadButton);\n","/**\n * @author Adam (charrondev) Charron <adam.c@vanillaforums.com>\n * @copyright 2009-2018 Vanilla Forums Inc.\n * @license https://opensource.org/licenses/GPL-2.0 GPL-2.0\n */\n\nimport React from \"react\";\nimport { t } from \"@dashboard/application\";\n\ninterface IProps {\n    id: string;\n}\n\nexport default function EditorDescriptions(props: IProps) {\n    return (\n        <p id={props.id} className=\"sr-only\">\n            {t(\"richEditor.description.title\")}\n            {t(\"richEditor.description.paragraphMenu\")}\n            {t(\"richEditor.description.inlineMenu\")}\n            {t(\"richEditor.description.embed\")}\n        </p>\n    );\n}\n","/**\n * @author Adam (charrondev) Charron <adam.c@vanillaforums.com>\n * @copyright 2009-2018 Vanilla Forums Inc.\n * @license https://opensource.org/licenses/GPL-2.0 GPL-2.0\n */\n\nimport { setData, getData, escapeHTML } from \"@dashboard/dom\";\nimport uniqueId from \"lodash/uniqueId\";\nimport { IEmbedData, renderEmbed, FOCUS_CLASS, IQuoteEmbedData } from \"@dashboard/embeds\";\nimport FocusableEmbedBlot from \"../abstract/FocusableEmbedBlot\";\nimport ErrorBlot from \"./ErrorBlot\";\nimport { t } from \"@dashboard/application\";\nimport { logError, capitalizeFirstLetter } from \"@dashboard/utility\";\nimport LoadingBlot from \"@rich-editor/quill/blots/embeds/LoadingBlot\";\nimport { forceSelectionUpdate } from \"@rich-editor/quill/utility\";\n\nconst DATA_KEY = \"__embed-data__\";\n\ninterface ILoaderData {\n    type: \"image\" | \"link\";\n    link?: string;\n}\n\ninterface IEmbedUnloadedValue {\n    loaderData: ILoaderData;\n    dataPromise: Promise<IEmbedData>;\n}\n\ninterface IEmbedLoadedValue {\n    loaderData: ILoaderData;\n    data: IEmbedData;\n}\n\nconst WARNING_HTML = title => `\n<svg class=\"embedLinkLoader-failIcon\" title=\"${title}\" aria-label=\"${title}\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\">\n    <title>${title}</title>\n    <circle cx=\"8\" cy=\"8\" r=\"8\" style=\"fill: #f5af15\"/>\n    <circle cx=\"8\" cy=\"8\" r=\"7.5\" style=\"fill: none;stroke: #000;stroke-opacity: 0.122\"/>\n    <path d=\"M11,10.4V8h2v2.4L12.8,13H11.3Zm0,4h2v2H11Z\" transform=\"translate(-4 -4)\" style=\"fill: #fff\"/>\n</svg>`;\n\nexport type IEmbedValue = IEmbedLoadedValue | IEmbedUnloadedValue;\n\n/**\n * The primary entrypoint for rendering embeds in Quill.\n *\n * If you're trying to render an embed, you likely want to use the {EmbedInsertionModule}.\n */\nexport default class ExternalEmbedBlot extends FocusableEmbedBlot {\n    public static blotName = \"embed-external\";\n    public static className = \"embed-external\";\n    public static tagName = \"div\";\n    public static readonly LOADING_VALUE = { loading: true };\n\n    /**\n     * Create the initial HTML for the external embed.\n     *\n     * An embed always starts with a loader (even if its only there for a second).\n     */\n    public static create(value: IEmbedValue): HTMLElement {\n        return LoadingBlot.create(value);\n    }\n\n    /**\n     * Get the loading value, otherwise get the primary value.\n     */\n    public static value(element: Element) {\n        const isLoader = element.classList.contains(LoadingBlot.className);\n        if (isLoader) {\n            return LoadingBlot.value(element);\n        } else {\n            const value = getData(element, DATA_KEY, false);\n            return value;\n        }\n    }\n\n    /**\n     * Create an warning state for the embed element. This occurs when the data fetching has succeeded,\n     * but the browser rendering has not.\n     *\n     * In other words, the blot has all of the data in needs to render in another browser, but not the\n     * current one.\n     *\n     * A usual case for this is having tracking protection on in Firefox (twitter + instagram scripts blocked) .\n     *\n     * @param linkText - The text of the link that failed to be embeded.\n     */\n    public static createEmbedWarningFallback(linkText: string) {\n        const div = document.createElement(\"div\");\n        div.classList.add(\"embedExternal\");\n        div.classList.add(\"embedLinkLoader\");\n        div.classList.add(\"embedLinkLoader-error\");\n\n        const sanitizedText = escapeHTML(linkText);\n\n        // In the future this message should point to a knowledge base article.\n        const warningTitle = t(\"This embed could not be loaded in your browser.\");\n        div.innerHTML = `<a href=\"#\" class=\"embedLinkLoader-link ${FOCUS_CLASS}\" tabindex=\"-1\">${sanitizedText}&nbsp;${WARNING_HTML(\n            warningTitle,\n        )}</a>`;\n        return div;\n    }\n\n    /**\n     * Create a successful embed element.\n     */\n    public static createEmbedFromData(data: IEmbedData, loaderElement: Element | null): Element {\n        const jsEmbed = FocusableEmbedBlot.create(data);\n        jsEmbed.classList.add(\"js-embed\");\n        jsEmbed.classList.add(\"embedResponsive\");\n        jsEmbed.classList.remove(FOCUS_CLASS);\n\n        const descriptionNode = document.createElement(\"span\");\n        descriptionNode.innerHTML = t(\"richEditor.externalEmbed.description\");\n        descriptionNode.classList.add(\"sr-only\");\n        descriptionNode.id = uniqueId(\"richEditor-embed-description-\");\n\n        const embedExternal = document.createElement(\"div\");\n        embedExternal.classList.add(\"embedExternal\");\n        embedExternal.classList.add(\"embed\" + capitalizeFirstLetter(data.type));\n\n        const embedExternalContent = document.createElement(\"div\");\n        embedExternalContent.classList.add(FOCUS_CLASS);\n        embedExternalContent.setAttribute(\"aria-label\", \"External embed content - \" + data.type);\n        embedExternalContent.setAttribute(\"aria-describedby\", descriptionNode.id);\n        embedExternalContent.classList.add(\"embedExternal-content\");\n        embedExternalContent.tabIndex = -1;\n\n        // Append these nodes.\n        loaderElement && jsEmbed.appendChild(loaderElement);\n        jsEmbed.appendChild(embedExternal);\n        jsEmbed.appendChild(descriptionNode);\n        embedExternal.appendChild(embedExternalContent);\n\n        setImmediate(() => {\n            void renderEmbed({ root: embedExternal, content: embedExternalContent }, data)\n                .then(() => {\n                    forceSelectionUpdate();\n                    loaderElement && loaderElement.remove();\n                })\n                .catch(e => {\n                    forceSelectionUpdate();\n                    logError(e);\n                    const warning = ExternalEmbedBlot.createEmbedWarningFallback(data.url);\n                    embedExternal.remove();\n                    descriptionNode.remove();\n                    loaderElement && loaderElement.remove();\n                    jsEmbed.appendChild(warning);\n                });\n        });\n\n        return jsEmbed;\n    }\n\n    /**\n     * This should only ever be called internally (or through Parchment.create())\n     *\n     * @param domNode - The node to attach the blot to.\n     * @param value - The value the embed is being created with.\n     * @param needsSetup - Whether or not replace with a final form. This should be false only for internal use.\n     */\n    constructor(domNode, value: IEmbedValue, needsSetup = true) {\n        super(domNode);\n        if (needsSetup) {\n            void this.replaceLoaderWithFinalForm(value);\n        }\n    }\n\n    /**\n     * Replace the embed's loader with it's final state. This could take the form of a registered embed,\n     * or an error state.\n     *\n     * @see @dashboard/embeds\n     */\n    public replaceLoaderWithFinalForm(value: IEmbedValue) {\n        let finalBlot: ExternalEmbedBlot | ErrorBlot;\n\n        this.resolveDataFromValue(value)\n            .then(data => {\n                const newValue: IEmbedValue = {\n                    data,\n                    loaderData: value.loaderData,\n                };\n\n                const loader = this.domNode.querySelector(\".embedLinkLoader\");\n                const embedElement = ExternalEmbedBlot.createEmbedFromData(data, loader);\n                setData(embedElement, DATA_KEY, newValue);\n                finalBlot = new ExternalEmbedBlot(embedElement, newValue, false);\n                this.replaceWith(finalBlot);\n            })\n            .catch(e => {\n                logError(e);\n                this.replaceWith(new ErrorBlot(ErrorBlot.create(e)));\n            });\n    }\n\n    /**\n     * Normalize data and dataPromise into Promise<data>\n     */\n    private resolveDataFromValue(value: IEmbedValue): Promise<IEmbedData> {\n        if (\"data\" in value) {\n            return Promise.resolve(value.data);\n        } else {\n            return value.dataPromise;\n        }\n    }\n}\n","/**\n * @author Adam (charrondev) Charron <adam.c@vanillaforums.com>\n * @copyright 2009-2018 Vanilla Forums Inc.\n * @license https://opensource.org/licenses/GPL-2.0 GPL-2.0\n */\n\nimport ClipboardBase from \"quill/modules/clipboard\";\nimport Delta from \"quill-delta\";\nimport Quill, { DeltaStatic } from \"quill/core\";\nimport { rangeContainsBlot, getIDForQuill } from \"@rich-editor/quill/utility\";\nimport CodeBlockBlot from \"@rich-editor/quill/blots/blocks/CodeBlockBlot\";\nimport CodeBlot from \"@rich-editor/quill/blots/inline/CodeBlot\";\nimport getStore from \"@dashboard/state/getStore\";\nimport { IStoreState } from \"@rich-editor/@types/store\";\n\nexport default class ClipboardModule extends ClipboardBase {\n    /**\n     * Split a string into multiple operations, with each link being turned into a full proper link.\n     *\n     * @param inputText - The text to split up.\n     *\n     * @returns An array of operations or a null if there were no links.\n     */\n    public static splitLinkOperationsOutOfText(inputText: string): any[] | null {\n        const urlRegex = /https?:\\/\\/[^\\s]+/g;\n\n        const matches = inputText.match(urlRegex);\n        if (matches && matches.length > 0) {\n            const ops: any[] = [];\n            matches.forEach(match => {\n                const split = (inputText as string).split(match);\n                const beforeLink = split.shift();\n                // We don't want to insert empty ops.\n                if (beforeLink !== \"\") {\n                    ops.push({ insert: beforeLink });\n                }\n                ops.push({ insert: match, attributes: { link: match } });\n                inputText = split.join(match);\n            });\n            // We don't want to insert empty ops.\n            if (inputText !== \"\") {\n                ops.push({ insert: inputText });\n            }\n            return ops;\n        } else {\n            return null;\n        }\n    }\n\n    public container: HTMLElement;\n\n    constructor(quill, options) {\n        super(quill, options);\n        this.addMatcher(Node.TEXT_NODE, this.linkMatcher);\n    }\n\n    /**\n     * Override the paste event to not jump around on paste in a cross-browser manor.\n     *\n     * Override https://github.com/quilljs/quill/blob/master/modules/clipboard.js#L108-L123\n     * Because of https://github.com/quilljs/quill/issues/1374\n     *\n     * Hopefully this will be fixed in Quill 2.0\n     */\n    public onPaste(e: Event) {\n        if (e.defaultPrevented || !(this.quill as any).isEnabled()) {\n            return;\n        }\n        const range = this.quill.getSelection();\n        let delta = new Delta().retain(range.index);\n\n        // THIS IS WHAT IS DIFFERENT\n        const scrollTop = document.documentElement.scrollTop || document.body.scrollTop;\n        this.container.focus();\n        (this.quill as any).selection.update(Quill.sources.SILENT);\n        setImmediate(() => {\n            delta = delta.concat((this as any).convert()).delete(range.length);\n            this.quill.updateContents(delta, Quill.sources.USER);\n            // range.length contributes to delta.length()\n            this.quill.setSelection((delta.length() - range.length) as any, Quill.sources.SILENT);\n\n            // THIS IS WHAT IS DIFFERENT\n            document.documentElement.scrollTop = document.body.scrollTop = scrollTop;\n            this.quill.focus();\n        });\n    }\n\n    /**\n     * A matcher to turn a pasted links into real links.\n     */\n    public linkMatcher = (node: Node, delta: DeltaStatic) => {\n        const { textContent } = node;\n        if (node.nodeType === Node.TEXT_NODE && textContent != null) {\n            if (!this.inCodeFormat) {\n                const splitOps = ClipboardModule.splitLinkOperationsOutOfText(textContent);\n                if (splitOps) {\n                    delta.ops = splitOps;\n                }\n            }\n        }\n\n        return delta;\n    };\n\n    /**\n     * Determine if we are in a code formatted item or not.\n     */\n    private get inCodeFormat() {\n        const instance = getStore<IStoreState>().getState().editor.instances[getIDForQuill(this.quill)];\n        if (!instance || !instance.lastGoodSelection) {\n            return false;\n        }\n        return (\n            rangeContainsBlot(this.quill, CodeBlockBlot, instance.lastGoodSelection) ||\n            rangeContainsBlot(this.quill, CodeBlot, instance.lastGoodSelection)\n        );\n    }\n}\n","/**\n * @author Stéphane (slafleche) LaFlèche <stephane.l@vanillaforums.com>\n * @copyright 2009-2018 Vanilla Forums Inc.\n * @license https://opensource.org/licenses/GPL-2.0 GPL-2.0\n */\n\nimport Embed from \"quill/blots/embed\";\nimport { setData, getData, convertToSafeEmojiCharacters, isEmojiSupported } from \"@dashboard/dom\";\n\nexport default class EmojiBlot extends Embed {\n    public static className = \"safeEmoji\";\n    public static blotName = \"emoji\";\n    public static tagName = \"span\";\n\n    public static create(data) {\n        const node = super.create(data) as HTMLElement;\n        if (isEmojiSupported()) {\n            node.innerHTML = data.emojiChar;\n            node.classList.add(\"nativeEmoji\");\n        } else {\n            node.innerHTML = convertToSafeEmojiCharacters(data.emojiChar);\n        }\n        setData(node, \"data\", data);\n        return node;\n    }\n\n    public static value(node) {\n        return getData(node, \"data\");\n    }\n}\n","/**\n * @author Adam (charrondev) Charron <adam.c@vanillaforums.com>\n * @copyright 2009-2018 Vanilla Forums Inc.\n * @license https://opensource.org/licenses/GPL-2.0 GPL-2.0\n */\n\nimport EmbedBlot from \"quill/blots/embed\";\nimport { formatUrl, makeProfileUrl } from \"@dashboard/application\";\nimport { IMentionSuggestionData } from \"@rich-editor/components/toolbars/pieces/MentionSuggestion\";\n\n/**\n * A blot that represents a completed mention.\n */\nexport default class MentionBlot extends EmbedBlot {\n    public static blotName = \"mention\";\n    public static className = \"atMention\";\n    public static tagName = \"a\";\n\n    public static create(data: IMentionSuggestionData) {\n        const node = super.create(data) as HTMLLinkElement;\n        node.textContent = \"@\" + data.name;\n        node.dataset.userid = data.userID.toString();\n        node.dataset.username = data.name;\n        node.href = makeProfileUrl(data.name);\n        return node;\n    }\n\n    public static value(node: HTMLLinkElement): Partial<IMentionSuggestionData> {\n        return {\n            name: node.dataset.username,\n            userID: parseInt(node.dataset.userid || \"\", 10),\n        };\n    }\n}\n","/**\n * @author Adam (charrondev) Charron <adam.c@vanillaforums.com>\n * @copyright 2009-2018 Vanilla Forums Inc.\n * @license https://opensource.org/licenses/GPL-2.0 GPL-2.0\n */\n\nimport Container from \"quill/blots/container\";\nimport Inline from \"quill/blots/inline\";\nimport Embed from \"quill/blots/embed\";\nimport TextBlot from \"quill/blots/text\";\nimport Parchment from \"parchment\";\nimport MentionAutoCompleteBlot from \"./MentionAutoCompleteBlot\";\n\n/**\n * A Blot to wrap the MentionAutoCompleteBlot.\n *\n * @see {MentionAutoCompleteBlot}\n *\n * The MentionAutoCompleteBlot is responsible for wrapping itself.\n * Do not instantiate this Blot on its own.\n */\nexport default class MentionComboBoxBlot extends Container {\n    public static blotName = \"mention-combobox\";\n    public static className = \"atMentionComboBox\";\n    public static tagName = \"span\";\n    public static scope = Parchment.Scope.BLOCK;\n    public static allowedChildren = [...Container.allowedChildren, MentionAutoCompleteBlot, Inline, Embed, TextBlot];\n\n    constructor(domNode) {\n        super(domNode);\n        domNode.setAttribute(\"role\", \"combobox\");\n        domNode.setAttribute(\"aria-haspopup\", \"listbox\");\n    }\n\n    /**\n     * Delete this blot it has no children. Wrap it if it doesn't have it's proper parent name.\n     *\n     * @param context - A shared context that is passed through all updated Blots.\n     */\n    public optimize(context) {\n        super.optimize(context);\n        if (this.children.length === 0) {\n            this.remove();\n        }\n    }\n\n    public replaceWith(name, value) {\n        const replacement = typeof name === \"string\" ? Parchment.create(name, value) : name;\n        return super.replaceWith(replacement);\n    }\n}\n","/**\n * @author Adam (charrondev) Charron <adam.c@vanillaforums.com>\n * @copyright 2009-2018 Vanilla Forums Inc.\n * @license https://opensource.org/licenses/GPL-2.0 GPL-2.0\n */\n\nimport Quill, { RangeStatic, Blot } from \"quill/core\";\nimport KeyboardModule from \"quill/modules/keyboard\";\nimport Delta from \"quill-delta\";\nimport Emitter from \"quill/core/emitter\";\nimport {\n    isBlotFirstInScroll,\n    stripFormattingFromFirstBlot,\n    insertNewLineAfterBlotAndTrim,\n    insertNewLineAtEndOfScroll,\n    insertNewLineAtStartOfScroll,\n    rangeContainsBlot,\n} from \"./utility\";\nimport { isAllowedUrl } from \"@dashboard/application\";\nimport LineBlot from \"./blots/abstract/LineBlot\";\nimport CodeBlockBlot from \"./blots/blocks/CodeBlockBlot\";\nimport FocusableEmbedBlot from \"./blots/abstract/FocusableEmbedBlot\";\nimport EmbedInsertionModule from \"./EmbedInsertionModule\";\nimport LinkBlot from \"quill/formats/link\";\nimport BlockBlot from \"quill/blots/block\";\nimport CodeBlot from \"./blots/inline/CodeBlot\";\n\nexport default class KeyboardBindings {\n    private static MULTI_LINE_BLOTS = [\"spoiler-line\", \"blockquote-line\", \"codeBlock\"];\n    public bindings: any = {};\n\n    constructor(private quill: Quill) {\n        // Keyboard behaviours\n        this.resetDefaultBindings();\n        this.addBlockNewLineHandlers();\n        this.addBlockArrowKeyHandlers();\n        this.addBlockBackspaceHandlers();\n        this.addLinkTransformKeyboardBindings();\n        this.overwriteFormatHandlers();\n    }\n\n    /**\n     * Special handling for the ENTER key for Mutliline Blots.\n     *\n     * @if\n     * If there is 1 trailing newline line after the first line,\n     * and the user is on the last line,\n     * and the user types ENTER,\n     *\n     * @then\n     * Enter a newline after the Blot,\n     * move the cursor there,\n     * and trim the trailing newlines from the Blot.\n     *\n     * @param range - The range when the enter key is pressed.\n     *\n     * @returns False to prevent default.\n     */\n    public handleMultilineEnter = (range: RangeStatic) => {\n        const [line] = this.quill.getLine(range.index);\n\n        const contentBlot = line.getWrapper();\n        if (line !== contentBlot.children.tail) {\n            return true;\n        }\n\n        const { textContent } = line.domNode;\n        const currentLineIsEmpty = textContent === \"\";\n        if (!currentLineIsEmpty) {\n            return true;\n        }\n\n        const previousLine = line.prev;\n        if (!previousLine) {\n            return true;\n        }\n\n        insertNewLineAfterBlotAndTrim(this.quill, range);\n\n        return false;\n    };\n\n    /**\n     * Special handling for the ENTER key for Code Blocks.\n     *\n     * @if\n     * If there are 2 tailing newlines after the first line,\n     * and the user is on the last line,\n     * and the user types ENTER,\n     *\n     * @then\n     * Enter a newline after the Blot,\n     * move the cursor there,\n     * and trim the trailing newlines from the Blot.\n     *\n     * @param range - The range when the enter key is pressed.\n     *\n     * @returns False to prevent default.\n     */\n    public handleCodeBlockEnter = (range: RangeStatic) => {\n        const [line] = this.quill.getLine(range.index);\n\n        const { textContent } = line.domNode;\n        const currentLineIsEmpty = /\\n\\n\\n$/.test(textContent);\n        if (!currentLineIsEmpty) {\n            return true;\n        }\n\n        insertNewLineAfterBlotAndTrim(this.quill, range, 2);\n\n        return false;\n    };\n\n    /**\n     * Handle backspacing for multi-line blots.\n     *\n     * @param range - The range that was altered.\n     *\n     * @returns False to prevent default.\n     */\n    public handleMultiLineBackspace(range: RangeStatic) {\n        const [line] = this.quill.getLine(range.index);\n\n        // Check if this is an empty multi-line blot\n        const hasSiblings = line.prev || line.next;\n\n        if (hasSiblings) {\n            return true;\n        }\n\n        const contentBlot = line.getWrapper();\n        if (contentBlot.domNode.textContent !== \"\") {\n            return true;\n        }\n\n        const delta = new Delta().retain(range.index).retain(1, { [line.constructor.blotName]: false });\n        this.quill.updateContents(delta, Emitter.sources.USER);\n        return false;\n    }\n\n    /**\n     * Handle backspacing for CodeBlock blots.\n     *\n     * @param range - The range that was altered.\n     *\n     * @returns False to prevent default.\n     */\n    public handleCodeBlockBackspace(range: RangeStatic) {\n        const [line] = this.quill.getLine(range.index);\n\n        // Check if this is an empty code block.\n        const { textContent } = line.domNode;\n\n        if (textContent !== \"\\n\") {\n            return true;\n        }\n\n        const delta = new Delta().retain(range.index).retain(1, { codeBlock: false });\n        this.quill.updateContents(delta, Emitter.sources.USER);\n\n        return false;\n    }\n\n    /**\n     * Strips the formatting from the first Blot if it is a block-quote, codeBlock, or spoiler.\n     *\n     * @param range - The range that was altered.\n     *\n     * @returns False to prevent default.\n     */\n    public handleBlockStartDelete = (range: RangeStatic) => {\n        const [line] = this.quill.getLine(range.index);\n\n        if (!isBlotFirstInScroll(line, this.quill)) {\n            return true;\n        }\n\n        stripFormattingFromFirstBlot(this.quill);\n        // Return false to prevent default behaviour.\n        return false;\n    };\n\n    /**\n     * Insert a normal newline before the current range.\n     *\n     * @param range - A Quill range.\n     *\n     * @returns false to prevent default.\n     */\n    public insertNewlineBeforeRange(range: RangeStatic) {\n        const cursorAtFirstPosition = range.index === 0;\n\n        if (cursorAtFirstPosition) {\n            insertNewLineAtStartOfScroll(this.quill);\n        }\n\n        return true;\n    }\n\n    /**\n     * Insert a normal newline after the current range.\n     *\n     * @param range - A Quill range.\n     *\n     * @returns false to prevent default.\n     */\n    public insertNewlineAfterRange(range: RangeStatic) {\n        const isAtLastPosition = range.index + 1 === this.quill.scroll.length();\n        if (isAtLastPosition) {\n            insertNewLineAtEndOfScroll(this.quill);\n        }\n\n        return true;\n    }\n\n    /**\n     * Delete the entire first Blot if the whole thing and something else is selected.\n     *\n     * We want deleting all of the content of the Blot to be different from the deleting the whole document or a large part of it.\n     *\n     * @param range - The range that was altered.\n     *\n     * @returns False to prevent default.\n     */\n    private clearFirstPositionMultiLineBlot = (range: RangeStatic) => {\n        const [line] = this.quill.getLine(range.index);\n        const selection = this.quill.getSelection();\n\n        const rangeStartsBeforeSelection = range.index < selection.index;\n        const rangeEndsAfterSelection = range.index + range.length > selection.index + selection.length;\n        const isFirstLineSelected = selection.index === 0;\n        const selectionIsEntireScroll = isFirstLineSelected;\n        const blotMatches =\n            line instanceof LineBlot || line instanceof CodeBlockBlot || line instanceof FocusableEmbedBlot;\n\n        if ((rangeStartsBeforeSelection || rangeEndsAfterSelection || selectionIsEntireScroll) && blotMatches) {\n            let delta = new Delta();\n\n            const newSelection = range;\n\n            if (isFirstLineSelected) {\n                delta = delta.insert(\"\\n\");\n                newSelection.length += 1;\n            }\n\n            this.quill.updateContents(delta, Emitter.sources.USER);\n            this.quill.setSelection(newSelection);\n            stripFormattingFromFirstBlot(this.quill);\n            this.quill.setSelection(newSelection);\n        }\n\n        return true;\n    };\n\n    /**\n     * Nullify the tab key and remove a weird code block binding for consistency.\n     */\n    private resetDefaultBindings() {\n        // Nullify the tab key.\n        (this.bindings as any).tab = false;\n        this.bindings[\"indent codeBlock\"] = false;\n        this.bindings[\"outdent codeBlock\"] = false;\n        this.bindings[\"remove tab\"] = false;\n        this.bindings[\"code exit\"] = false;\n    }\n\n    private addLinkTransformKeyboardBindings() {\n        this.bindings[\"transform text to embed\"] = {\n            key: KeyboardModule.keys.ENTER,\n            collapsed: true,\n            handler: this.transformLinkOnlyLineToEmbed,\n        };\n    }\n\n    /**\n     * Convert the last word of a line that is formatted like a link into an actual link.\n     */\n    private transformTextToLink = (range: RangeStatic) => {\n        const line: Blot = this.quill.getLine(range.index)[0];\n        const lineStart = line.offset();\n        const textUntilSpace = this.quill.getText(lineStart, range.index);\n        const results = textUntilSpace.match(/\\s([^\\s]+)$|^([^\\s]+)$/);\n        if (!results) {\n            return true;\n        }\n\n        const lastWord = results[1] || results[2];\n        const lineIndex = results.index || 0;\n        let index = lineStart + lineIndex;\n        const length = lastWord.length;\n\n        if (results[1]) {\n            // Javascript has no lookbehinds so the space is part of the match. We need to adjust things to compensate.\n            index += 1;\n        }\n\n        const isAlreadyLink = this.quill.scroll.descendants(blot => blot instanceof LinkBlot, index, length).length > 0;\n\n        if (isAllowedUrl(lastWord) && !isAlreadyLink) {\n            this.quill.formatText(index, length, { link: lastWord }, Quill.sources.USER);\n        }\n        return true;\n    };\n\n    /**\n     * Add keyboard options.bindings that allow the user to\n     */\n    private addBlockNewLineHandlers() {\n        this.bindings[\"MutliLine Enter\"] = {\n            key: KeyboardModule.keys.ENTER,\n            collapsed: true,\n            format: [\"spoiler-line\", \"blockquote-line\"],\n            handler: this.handleMultilineEnter,\n        };\n\n        this.bindings[\"CodeBlock Enter\"] = {\n            key: KeyboardModule.keys.ENTER,\n            collapsed: true,\n            format: [\"codeBlock\"],\n            handler: this.handleCodeBlockEnter,\n        };\n    }\n\n    /**\n     * Transform plain text of a link alone on its own line with no other formatting into a link embed.\n     */\n    private transformLinkOnlyLineToEmbed = (range: RangeStatic) => {\n        const line: Blot = this.quill.getLine(range.index)[0];\n\n        // Bail out if we weren't at the end of the line.\n        if (range.index < line.offset() + line.length() - 1) {\n            return true;\n        }\n\n        // Bail out if blot isn't a plain Block.\n        if (line.statics.blotName !== \"block\") {\n            return true;\n        }\n\n        // Bail out if the blot contents are not plain text or a link.\n        const firstBlotName = (line as any).children.head.statics.blotName;\n        if ((line as BlockBlot).children.length > 1 || ![\"text\", \"link\"].includes(firstBlotName)) {\n            return true;\n        }\n\n        let textContent = line.domNode.textContent || \"\";\n        textContent = textContent.trim();\n        if (isAllowedUrl(textContent)) {\n            const embedInsertionModule: EmbedInsertionModule = this.quill.getModule(\"embed/insertion\");\n            const index = line.offset();\n            this.quill.deleteText(index, line.length(), Quill.sources.USER);\n            this.quill.insertText(index, \"\\n\", Quill.sources.USER);\n            this.quill.setSelection(index, 0, Quill.sources.USER);\n            embedInsertionModule.scrapeMedia(textContent);\n            return false;\n        }\n\n        return true;\n    };\n\n    /**\n     * Overwrite quill's built in format handlers.\n     */\n    private overwriteFormatHandlers() {\n        this.bindings.bold = this.makeFormatHandler(\"bold\");\n        this.bindings.italic = this.makeFormatHandler(\"italic\");\n        this.bindings.underline = this.makeFormatHandler(\"underline\");\n    }\n\n    /**\n     * Create a keyboard shortcut to enable/disable a format. These differ from Quill's built in\n     * keyboard shortcuts because they do not work if the selection contains a codeBlock or inline-code.\n     */\n    private makeFormatHandler(format) {\n        return {\n            key: format[0].toUpperCase(),\n            shortKey: true,\n            handler: (range, context) => {\n                if (\n                    rangeContainsBlot(this.quill, CodeBlockBlot, range) ||\n                    rangeContainsBlot(this.quill, CodeBlot, range)\n                ) {\n                    return;\n                }\n\n                this.quill.format(format, !context.format[format], Quill.sources.USER);\n            },\n        };\n    }\n\n    /**\n     * Add custom handlers for backspace inside of Blots.\n     */\n    private addBlockBackspaceHandlers() {\n        this.bindings[\"Block Backspace With Selection\"] = {\n            key: KeyboardModule.keys.BACKSPACE,\n            collapsed: false,\n            handler: this.clearFirstPositionMultiLineBlot,\n        };\n\n        this.bindings[\"Block Delete\"] = {\n            key: KeyboardModule.keys.BACKSPACE,\n            offset: 0,\n            collapsed: true,\n            format: KeyboardBindings.MULTI_LINE_BLOTS,\n            handler: this.handleBlockStartDelete,\n        };\n\n        this.bindings[\"MultiLine Backspace\"] = {\n            key: KeyboardModule.keys.BACKSPACE,\n            collapsed: true,\n            format: [\"spoiler-line\", \"blockquote-line\"],\n            handler: this.handleMultiLineBackspace,\n        };\n\n        this.bindings[\"CodeBlock Backspace\"] = {\n            key: KeyboardModule.keys.BACKSPACE,\n            collapsed: true,\n            format: [\"codeBlock\"],\n            handler: this.handleCodeBlockBackspace,\n        };\n    }\n\n    /**\n     * Add keyboard options.bindings that allow the user to escape multi-line blocks with arrow keys.\n     */\n    private addBlockArrowKeyHandlers() {\n        const commonCriteria = {\n            collapsed: true,\n            format: KeyboardBindings.MULTI_LINE_BLOTS,\n        };\n\n        this.bindings[\"Block Up\"] = {\n            ...commonCriteria,\n            key: KeyboardModule.keys.UP,\n            handler: this.insertNewlineBeforeRange,\n        };\n\n        this.bindings[\"Block Left\"] = {\n            ...commonCriteria,\n            key: KeyboardModule.keys.LEFT,\n            handler: this.insertNewlineBeforeRange,\n        };\n\n        this.bindings[\"Block Down\"] = {\n            ...commonCriteria,\n            key: KeyboardModule.keys.DOWN,\n            handler: this.insertNewlineAfterRange,\n        };\n\n        this.bindings[\"Block Right\"] = {\n            ...commonCriteria,\n            key: KeyboardModule.keys.RIGHT,\n            handler: this.insertNewlineAfterRange,\n        };\n    }\n}\n","/**\n * @author Adam (charrondev) Charron <adam.c@vanillaforums.com>\n * @copyright 2009-2018 Vanilla Forums Inc.\n * @license https://opensource.org/licenses/GPL-2.0 GPL-2.0\n */\n\n// Quill\nimport Quill, { QuillOptionsStatic } from \"quill/core\";\nimport ThemeBase from \"quill/core/theme\";\nimport KeyboardBindings from \"./KeyboardBindings\";\n\nexport default class VanillaTheme extends ThemeBase {\n    /**\n     * Constructor.\n     *\n     * @param quill - The quill instance the theme is applying to.\n     * @param options - The current options for the instance.\n     */\n    constructor(quill: Quill, options: QuillOptionsStatic) {\n        const themeOptions = {\n            ...options,\n            placeholder: \"Create a new post...\",\n            scrollingContainer: \"body\",\n        };\n\n        super(quill, themeOptions);\n        this.quill.root.classList.add(\"richEditor-text\");\n        this.quill.root.classList.add(\"userContent\");\n\n        // Add keyboard bindings to options.\n        this.addModule(\"embed/insertion\");\n        this.addModule(\"embed/focus\");\n        const keyboardBindings = new KeyboardBindings(this.quill);\n        this.options.modules.keyboard.bindings = {\n            ...this.options.modules.keyboard.bindings,\n            ...keyboardBindings.bindings,\n        };\n    }\n}\n","/**\n * @author Adam (charrondev) Charron <adam.c@vanillaforums.com>\n * @copyright 2009-2018 Vanilla Forums Inc.\n * @license https://opensource.org/licenses/GPL-2.0 GPL-2.0\n */\n\nimport Quill, { Blot } from \"quill/core\";\nimport Parchment from \"parchment\";\nimport KeyboardModule from \"quill/modules/keyboard\";\nimport Module from \"quill/core/module\";\nimport { RangeStatic } from \"quill/core\";\nimport { delegateEvent, getNextTabbableElement } from \"@dashboard/dom\";\nimport FocusableEmbedBlot from \"./blots/abstract/FocusableEmbedBlot\";\nimport {\n    insertNewLineAtEndOfScroll,\n    insertNewLineAtStartOfScroll,\n    getBlotAtIndex,\n    rangeContainsBlot,\n    forceSelectionUpdate,\n} from \"./utility\";\nimport MentionAutoCompleteBlot from \"./blots/embeds/MentionAutoCompleteBlot\";\n\n/**\n * A module for managing focus of Embeds. For this to work for a new Embed,\n * ensure that your embed extends FocusEmbedBlot\n *\n * @see {FocusableEmbedBlot}\n */\nexport default class EmbedFocusModule extends Module {\n    /** The previous selection */\n    private lastSelection: RangeStatic = {\n        index: 0,\n        length: 0,\n    };\n\n    private editorRoot: HTMLElement;\n    private formWrapper: HTMLElement;\n\n    /**\n     * @param quill - The quill instance to tie into.\n     * @param options - The quill options.\n     *\n     * @throws If the necessary surrounding HTML cannot be located.\n     */\n    constructor(quill: Quill, options = {}) {\n        super(quill, options);\n\n        this.editorRoot = this.quill.root.closest(\".richEditor\") as HTMLElement;\n        this.formWrapper = this.editorRoot.closest(\".FormWrapper\") as HTMLElement;\n\n        if (!this.editorRoot) {\n            throw new Error(\"Cannot initialize the EmbedFocusModule without an editorRoot (.richEditor class)\");\n        }\n\n        if (!this.formWrapper) {\n            throw new Error(\"Cannot initialize the EmbedFocusModule without an FormWrapper (.FormWrapper class)\");\n        }\n\n        // Add a tabindex onto the contenteditable so that our utilities know it is focusable.\n        this.quill.root.setAttribute(\"tabindex\", 0);\n\n        // Track user selection events.\n        quill.on(\"selection-change\", (range, oldRange, source) => {\n            if (range && source !== Quill.sources.SILENT) {\n                this.lastSelection = range;\n                this.editorRoot.classList.toggle(\"isFocused\", true);\n            }\n        });\n\n        this.setupEmbedClickHandler();\n        this.setupMobileHandler();\n\n        this.quill.root.addEventListener(\"keydown\", this.keyDownListener);\n        this.formWrapper.addEventListener(\"keydown\", this.tabListener);\n        this.editorRoot.addEventListener(\"keydown\", this.escapeMobileFullScreen);\n    }\n\n    /**\n     * Determine if there is an active mention open.\n     */\n    public get inActiveMention() {\n        const fullDocumentRange = {\n            index: 0,\n            length: this.quill.scroll.length() - 1,\n        };\n        return rangeContainsBlot(this.quill, MentionAutoCompleteBlot, fullDocumentRange);\n    }\n\n    public escapeMobileFullScreen = (event: KeyboardEvent) => {\n        const position = window.getComputedStyle(this.editorRoot).getPropertyValue(\"position\");\n        const editorIsFullscreen = this.editorRoot.classList.contains(\"isFocused\") && position === \"fixed\";\n        if (editorIsFullscreen && KeyboardModule.match(event, { key: KeyboardModule.keys.ESCAPE, shiftKey: false })) {\n            this.quill.root.focus();\n            const nextEl: any = getNextTabbableElement({\n                root: this.formWrapper,\n                fromElement: this.quill.root,\n            });\n            nextEl.focus();\n            this.editorRoot.classList.toggle(\"isFocused\", false);\n        }\n    };\n\n    /**\n     * Manually handle tab presses.\n     *\n     * Because it can be next to impossible to control focus once it shifts into an embedded iframe\n     * or shadow dom root, the EmbedFocusManager is now manually handling all tab and shift-tab shortcuts\n     * to move focus between the various editor elements.\n     *\n     * Once you are outside of the editor there is nothing to worry about.\n     * This only affects while the cursor is in the editor or inside of an embed blot.\n     *\n     * @returns true if the event was handled.\n     */\n    public handleTab = (): boolean => {\n        let fromElement = document.activeElement;\n        if (this.quill.root.contains(document.activeElement)) {\n            fromElement = this.quill.root;\n        }\n        const blotForActiveElement = this.getEmbedBlotForFocusedElement();\n        const focusItemIsEmbedBlot = blotForActiveElement instanceof FocusableEmbedBlot;\n        // Focus the next available editor ui component.\n        const nextElement = getNextTabbableElement({\n            root: this.formWrapper,\n            excludedRoots: [this.quill.root],\n            allowLooping: false,\n            fromElement,\n        });\n\n        if (!nextElement) {\n            return false;\n        }\n\n        // We need to place the selection at the end of quill.\n        if (nextElement === this.quill.root) {\n            this.focusFirstLine();\n        } else {\n            nextElement.focus();\n        }\n\n        return true;\n    };\n\n    /**\n     * Manually handle tab presses.\n     *\n     * Because it can be next to impossible to control focus once it shifts into an embedded iframe\n     * or shadow dom root, the EmbedFocusManager is now manually handling all tab and shift-tab shortcuts\n     * to move focus between the various editor elements.\n     *\n     * @returns true if the event was handled.\n     */\n    public handleShiftTab = () => {\n        // Treat a focus inside of quill as if quill is focused.\n        let fromElement = document.activeElement;\n        if (this.quill.root.contains(document.activeElement)) {\n            fromElement = this.quill.root;\n        }\n\n        const prevElement = getNextTabbableElement({\n            root: this.formWrapper,\n            excludedRoots: [this.quill.root],\n            fromElement,\n            reverse: true,\n            allowLooping: false,\n        });\n\n        if (!prevElement) {\n            return false;\n        }\n\n        // We need to place the selection at the end of quill.\n        if (prevElement === this.quill.root) {\n            this.focusLastLine();\n        } else {\n            prevElement.focus();\n        }\n\n        return true;\n    };\n\n    /**\n     * Focus the last line of the editor.\n     *\n     * Handles embed blots in addition to plain text.\n     */\n    public focusLastLine() {\n        const lastIndex = this.quill.scroll.length() - 1;\n        const lastEmbedBlot = getBlotAtIndex(this.quill, lastIndex, FocusableEmbedBlot);\n        if (lastEmbedBlot) {\n            lastEmbedBlot.focus();\n        } else {\n            this.quill.focus();\n            this.quill.setSelection(lastIndex, 0, Quill.sources.USER);\n        }\n    }\n\n    /**\n     * Focus the first line of the editor.\n     *\n     * Handles embed blots in addition to plain text.\n     */\n    public focusFirstLine() {\n        const firstEmbedBlot = this.quill.scroll.children.head;\n        if (firstEmbedBlot instanceof FocusableEmbedBlot) {\n            firstEmbedBlot.focus();\n        } else {\n            this.quill.focus();\n            this.quill.setSelection(0, 0, Quill.sources.USER);\n        }\n    }\n\n    /**\n     * Handle arrow keys while an embed is Focused.\n     *\n     * @returns true if the event was handled\n     *\n     * @if\n     * - And Embed is Focused\n     * - An arrow key is pressed\n     *\n     * @andif\n     * - The Embed is at the beginnning or the end of the document.\n     * @then\n     * - Insert a new line and move the selection before or after the Embed.\n     *\n     * @else\n     * Move the selection/focus to the next blot.\n     */\n    public handleArrowKeyFromEmbed = (directionKeyCode: number, blotForActiveElement: FocusableEmbedBlot): boolean => {\n        // Check if we are at the beginning or end of the scroll.\n        const position = blotForActiveElement.offset(this.quill.scroll);\n        const isEndOfScroll = position + blotForActiveElement.length() === this.quill.scroll.length();\n        const isStartOfScroll = position === 0;\n        const isUpOrLeft = [KeyboardModule.keys.LEFT, KeyboardModule.keys.UP].includes(directionKeyCode as any);\n        const isDownOrRight = [KeyboardModule.keys.RIGHT, KeyboardModule.keys.DOWN].includes(directionKeyCode as any);\n        if (isStartOfScroll && isUpOrLeft) {\n            insertNewLineAtStartOfScroll(this.quill);\n            return true;\n        } else if (isEndOfScroll && isDownOrRight) {\n            insertNewLineAtEndOfScroll(this.quill);\n            return true;\n        }\n\n        // Check if we have a blot to move to.\n        const blotToMoveTo = this.getNextBlotFromArrowKey(blotForActiveElement, directionKeyCode);\n        if (blotToMoveTo) {\n            this.arrowToBlot(blotToMoveTo);\n            return true;\n        }\n\n        return false;\n    };\n\n    /**\n     * @if\n     * - The next or previous Blot is an Embed Blot\n     * @then\n     * - Set focus on that Blot\n     * @else\n     * - Move the focus into the next text content. If the previous selection was in inside of that blot\n     * restore that selection.\n     *\n     * @param blotToMoveTo The next blot to move towards.\n     * @param useSelectionHistory Whether or not to use previous selection history to try and restore a selection position.\n     */\n    public arrowToBlot(blotToMoveTo: Blot) {\n        if (blotToMoveTo instanceof FocusableEmbedBlot) {\n            blotToMoveTo.focus();\n        } else {\n            // We want to mimic normal movement behaviour as if our Blot was text, so\n            // We check if we need to put the cursor in the middle of the next or previous line.\n            const newElementStart = blotToMoveTo.offset(this.quill.scroll);\n            this.quill.setSelection(newElementStart, 0);\n        }\n    }\n\n    /**\n     * Check if the focused element in the document is of an Embed blot and return it.\n     */\n    public getEmbedBlotForFocusedElement() {\n        if (!(document.activeElement instanceof Element)) {\n            return;\n        }\n\n        let activeElement = document.activeElement;\n        if (!activeElement.classList.contains(\"js-embed\")) {\n            const closestEmbed = activeElement.closest(\".js-embed\");\n            if (!closestEmbed) {\n                return;\n            }\n\n            activeElement = closestEmbed;\n        }\n\n        return Parchment.find(activeElement);\n    }\n\n    /**\n     * Handle deletions while quill is focused.\n     *\n     * @if\n     * - Backspace is pressed\n     * - The current Blot is an empty Blot.\n     * - The previous blot is an embed blot.\n     *\n     * @then\n     * - Delete the current empty line.\n     * - Set focus on the previous embed Blot.\n     *\n     * @returns true if the event was handled\n     */\n    public handleDeleteOnQuill = (): boolean => {\n        const selection = this.quill.getSelection();\n        const currentBlot = selection && (this.quill.getLine(selection.index)[0] as Blot | null);\n\n        if (!currentBlot) {\n            return false;\n        }\n\n        const previousBlot = currentBlot.prev;\n        const isCurrentBlotEmpty = currentBlot.domNode.textContent === \"\";\n\n        if (previousBlot instanceof FocusableEmbedBlot && isCurrentBlotEmpty) {\n            currentBlot.remove();\n            previousBlot.focus();\n            return true;\n        }\n\n        return false;\n    };\n\n    /**\n     * Determine which Blot we want to move to based on the arrow key pressed.\n     *\n     * @param currentBlot The blot to check.\n     * @param keyCode The keycode that was pressed.\n     */\n    private getNextBlotFromArrowKey(currentBlot: Blot, keyCode: number) {\n        if (!currentBlot) {\n            return null;\n        }\n        switch (keyCode) {\n            case KeyboardModule.keys.DOWN:\n                return currentBlot.next as Blot;\n            case KeyboardModule.keys.UP:\n                return currentBlot.prev as Blot;\n            case KeyboardModule.keys.RIGHT:\n                // -1 needed for because end of blot is non-inclusive.\n                const endOfBlot = currentBlot.offset() + currentBlot.length() - 1;\n                if (this.lastSelection.index === endOfBlot) {\n                    // If we're at the end of the line.\n                    return currentBlot.next as Blot;\n                }\n                break;\n            case KeyboardModule.keys.LEFT:\n                if (this.lastSelection.index === currentBlot.offset()) {\n                    // If we're at the start of the line.\n                    return currentBlot.prev as Blot;\n                }\n                break;\n        }\n    }\n\n    /**\n     * Setup a click handler to focus embeds.\n     */\n    private setupEmbedClickHandler() {\n        delegateEvent(\n            \"click\",\n            \"a\",\n            (event, clickedElement) => {\n                event.preventDefault();\n                event.stopPropagation();\n            },\n            this.quill.container,\n        );\n\n        delegateEvent(\n            \"click\",\n            \".js-embed\",\n            (event, clickedElement) => {\n                const embed = Parchment.find(clickedElement);\n                if (embed instanceof FocusableEmbedBlot) {\n                    embed.focus();\n                }\n            },\n            this.quill.container,\n        );\n    }\n\n    private setupMobileHandler() {\n        delegateEvent(\n            \"click\",\n            \".js-richText .richEditor-text\",\n            (event, clickedElement) => {\n                this.editorRoot.classList.toggle(\"isFocused\", true);\n            },\n            this.quill.container,\n        );\n\n        delegateEvent(\n            \"click\",\n            \".js-richEditor-next\",\n            (event, clickedElement) => {\n                const nextEl: any = getNextTabbableElement({\n                    root: this.formWrapper,\n                    fromElement: clickedElement,\n                });\n                nextEl.focus();\n                this.editorRoot.classList.toggle(\"isFocused\", false);\n            },\n            this.editorRoot,\n        );\n    }\n\n    /**\n     * Keydown listener on the current quill instance.\n     */\n    private keyDownListener = (event: KeyboardEvent) => {\n        if (!this.editorRoot.contains(document.activeElement)) {\n            return;\n        }\n\n        const blotForActiveElement = this.getEmbedBlotForFocusedElement();\n        const [currentLineBlot] = this.quill.getLine(this.lastSelection.index);\n        const blotToMoveTo = this.getNextBlotFromArrowKey(currentLineBlot, event.keyCode);\n\n        // Handle arrow keys.\n        if (this.isKeyCodeArrowKey(event.keyCode) && !event.shiftKey && !this.inActiveMention) {\n            // If we're in an embed we need special handling.\n            if (blotForActiveElement instanceof FocusableEmbedBlot) {\n                const eventWasHandled = this.handleArrowKeyFromEmbed(event.keyCode, blotForActiveElement);\n\n                if (eventWasHandled) {\n                    event.preventDefault();\n                    event.stopPropagation();\n                    return;\n                }\n                // If we're in quill and moving to an embed blot we need to focus it.\n            } else if (this.quill.hasFocus() && blotToMoveTo instanceof FocusableEmbedBlot) {\n                event.preventDefault();\n                event.stopPropagation();\n                blotToMoveTo.focus();\n            }\n        }\n\n        // Handle delete/backspace\n        if (this.isKeyCodeDelete(event.keyCode)) {\n            // If we're in an embed blot we want to delete it.\n            if (blotForActiveElement instanceof FocusableEmbedBlot) {\n                event.preventDefault();\n                event.stopPropagation();\n                blotForActiveElement.remove();\n                forceSelectionUpdate();\n\n                // Otherwise if we're just in quill normally, we special handling in case the previous item is an embed blot.\n            } else if (this.quill.hasFocus()) {\n                const eventWasHandled = this.handleDeleteOnQuill();\n                if (eventWasHandled) {\n                    event.preventDefault();\n                    event.stopPropagation();\n                    return;\n                }\n            }\n        }\n\n        // Handle the enter key.\n        if (KeyboardModule.match(event, KeyboardModule.keys.ENTER)) {\n            if (blotForActiveElement instanceof FocusableEmbedBlot) {\n                event.preventDefault();\n                event.stopPropagation();\n                blotForActiveElement.insertNewlineAfter();\n            }\n        }\n    };\n\n    /**\n     * Keydown listener on the current quill instance.\n     */\n    private tabListener = (event: KeyboardEvent) => {\n        if (!this.formWrapper!.contains(document.activeElement)) {\n            return;\n        }\n\n        let eventWasHandled = false;\n\n        if (KeyboardModule.match(event, { key: KeyboardModule.keys.TAB, shiftKey: true })) {\n            eventWasHandled = this.handleShiftTab();\n        } else if (KeyboardModule.match(event, { key: KeyboardModule.keys.TAB, shiftKey: false })) {\n            eventWasHandled = this.handleTab();\n        }\n\n        if (eventWasHandled) {\n            event.preventDefault();\n            event.stopPropagation();\n        }\n    };\n\n    /**\n     * Detect if an keyCode is of an arrow key.\n     */\n    private isKeyCodeArrowKey(keyCode: number) {\n        const { UP, DOWN, LEFT, RIGHT } = KeyboardModule.keys;\n        return [UP, DOWN, LEFT, RIGHT].includes(keyCode as any);\n    }\n\n    /**\n     * Detect if an keyCode is of Delete or Backspace\n     */\n    private isKeyCodeDelete(keyCode: number) {\n        const { BACKSPACE, DELETE } = KeyboardModule.keys;\n        return [BACKSPACE, DELETE].includes(keyCode as any);\n    }\n}\n","/**\n * @author Adam (charrondev) Charron <adam.c@vanillaforums.com>\n * @copyright 2009-2018 Vanilla Forums Inc.\n * @license https://opensource.org/licenses/GPL-2.0 GPL-2.0\n */\n\nimport Module from \"quill/core/module\";\nimport Parchment from \"parchment\";\nimport Quill from \"quill/core\";\nimport api, { uploadImage } from \"@dashboard/apiv2\";\nimport { getPastedImage, getDraggedImage } from \"@dashboard/dom\";\nimport ExternalEmbedBlot, { IEmbedValue } from \"./blots/embeds/ExternalEmbedBlot\";\nimport getStore from \"@dashboard/state/getStore\";\nimport { getIDForQuill, insertBlockBlotAt } from \"@rich-editor/quill/utility\";\nimport { IStoreState } from \"@rich-editor/@types/store\";\n\n/**\n * A Quill module for managing insertion of embeds/loading/error states.\n */\nexport default class EmbedInsertionModule extends Module {\n    private store = getStore<IStoreState>();\n\n    constructor(public quill: Quill, options = {}, editorID) {\n        super(quill, options);\n        this.quill = quill;\n        this.setupImageUploads();\n    }\n\n    private get state() {\n        const id = getIDForQuill(this.quill);\n        return this.store.getState().editor.instances[id];\n    }\n\n    /**\n     * Initiate a media scrape, and insert the appropriate embed blots depending on response.\n     *\n     * @param url - The URL to scrape.\n     */\n    public scrapeMedia(url: string) {\n        const formData = new FormData();\n        formData.append(\"url\", url);\n\n        const scrapePromise = api.post(\"/media/scrape\", formData).then(result => result.data);\n        this.createEmbed({\n            loaderData: {\n                type: \"link\",\n                link: url,\n            },\n            dataPromise: scrapePromise,\n        });\n    }\n\n    /**\n     * Create an async embed. The embed will be responsible for handling it's loading state and error states.\n     */\n    public createEmbed = (embedValue: IEmbedValue) => {\n        const externalEmbed = Parchment.create(\"embed-external\", embedValue) as ExternalEmbedBlot;\n        const selection = this.state.lastGoodSelection || { index: this.quill.scroll.length(), length: 0 };\n        insertBlockBlotAt(this.quill, selection.index, externalEmbed);\n        this.quill.update(Quill.sources.USER);\n        externalEmbed.focus();\n    };\n\n    private pasteHandler = (event: ClipboardEvent) => {\n        const image = getPastedImage(event);\n        if (image) {\n            const imagePromise = uploadImage(image);\n            this.createEmbed({ loaderData: { type: \"image\" }, dataPromise: imagePromise });\n        }\n    };\n\n    private dragHandler = (event: DragEvent) => {\n        const image = getDraggedImage(event);\n        if (image) {\n            const imagePromise = uploadImage(image);\n            this.createEmbed({ loaderData: { type: \"image\" }, dataPromise: imagePromise });\n        }\n    };\n\n    /**\n     * Setup image upload listeners and handlers.\n     */\n    private setupImageUploads() {\n        this.quill.root.addEventListener(\"drop\", this.dragHandler, false);\n        this.quill.root.addEventListener(\"paste\", this.pasteHandler, false);\n    }\n}\n","/**\n * @author Adam (charrondev) Charron <adam.c@vanillaforums.com>\n * @copyright 2009-2018 Vanilla Forums Inc.\n * @license https://opensource.org/licenses/GPL-2.0 GPL-2.0\n */\n\nimport get from \"lodash/get\";\nimport BaseHistoryModule from \"quill/modules/history\";\nimport { DeltaOperation, DeltaStatic } from \"quill/core\";\nimport { FOCUS_CLASS } from \"@dashboard/embeds\";\n\nconst SHORTKEY = /Mac/i.test(navigator.platform) ? \"metaKey\" : \"ctrlKey\";\n\n/**\n * A custom history module to allow redo/undo to work while an Embed is focused\n * and hack around the fact that Quill doesn't have first class support for asynchronusly rendering things.\n */\nexport default class HistoryModule extends BaseHistoryModule {\n    private readonly EMBED_KEY = \"insert.embed-external\";\n    private readonly EMBED_CONFIRM_KEY = \"insert.embed-external.loaderData.loaded\";\n    private readonly CODE_KEY = \"attributes.codeBlock\";\n    private readonly Z_KEYCODE = 90;\n\n    /**\n     * Add an undo handler for when an embed blot has focus.\n     */\n    constructor(quill, options) {\n        super(quill, {\n            ...options,\n            // usersOnly: true,\n        });\n        document.addEventListener(\"keydown\", this.undoKeyboardListener, true);\n    }\n\n    public undoKeyboardListener = (event: KeyboardEvent) => {\n        // Quill's Keyboard.match() FAILS to match a shortkey + z for some reason. Just check it ourself.\n        if (event.keyCode === this.Z_KEYCODE && event[SHORTKEY]) {\n            if (document.activeElement.classList.contains(FOCUS_CLASS)) {\n                if (event.shiftKey) {\n                    this.redo();\n                } else {\n                    this.undo();\n                }\n            }\n        }\n    };\n\n    public record(changeDelta: DeltaStatic, oldDelta: DeltaStatic) {\n        if (this.operationsContainKey(changeDelta.ops, this.EMBED_KEY)) {\n            this.cutoff();\n        }\n\n        if (this.operationsContainKey(changeDelta.ops, this.CODE_KEY)) {\n            this.cutoff();\n        }\n\n        const undoDelta = this.quill.getContents().diff(oldDelta);\n        if (this.actionIsEmbedCompletion(undoDelta, changeDelta)) {\n            return;\n        }\n        super.record(changeDelta, oldDelta);\n    }\n\n    public actionIsEmbedCompletion(undoDelta: DeltaStatic, redoDelta: DeltaStatic) {\n        const hasDeleteRecordOfLoadingEmbed = this.operationsContainKey(redoDelta.ops, this.EMBED_CONFIRM_KEY);\n        const hasAddRecordOfLoadingEmbed = this.operationsContainKey(undoDelta.ops, this.EMBED_CONFIRM_KEY);\n        return hasDeleteRecordOfLoadingEmbed || hasAddRecordOfLoadingEmbed;\n    }\n\n    private operationsContainKey(ops: DeltaOperation[] | undefined, key: string) {\n        if (!ops) {\n            return false;\n        }\n\n        for (const op of ops) {\n            if (get(op, key, false)) {\n                return true;\n            }\n        }\n\n        return false;\n    }\n}\n","/**\n * @author Adam (charrondev) Charron <adam.c@vanillaforums.com>\n * @copyright 2009-2018 Vanilla Forums Inc.\n * @license https://opensource.org/licenses/GPL-2.0 GPL-2.0\n */\n\n// Quill Built-ins\nimport Quill from \"quill/core\";\nimport Bold from \"quill/formats/bold\";\nimport Italic from \"quill/formats/italic\";\nimport Link from \"quill/formats/link\";\nimport Strike from \"quill/formats/strike\";\nimport List, { ListItem } from \"quill/formats/list\";\nimport Header from \"quill/formats/header\";\nimport { IndentClass as Indent } from \"quill/formats/indent\";\n\n// Custom Inline Blots\nimport CodeInlineBlot from \"./blots/inline/CodeBlot\";\n\n// Custom Embed Blots\nimport EmojiBlot from \"./blots/embeds/EmojiBlot\";\nimport ExternalEmbedBlot from \"./blots/embeds/ExternalEmbedBlot\";\nimport EmbedErrorBlot from \"./blots/embeds/ErrorBlot\";\nimport MentionBlot from \"./blots/embeds/MentionBlot\";\nimport MentionComboBoxBlot from \"./blots/embeds/MentionComboBoxBlot\";\nimport MentionAutoCompleteBlot from \"./blots/embeds/MentionAutoCompleteBlot\";\n\n// Custom Block Blots\nimport BlockBlot from \"./blots/blocks/BlockBlot\";\nimport SpoilerLineBlot, { SpoilerWrapperBlot, SpoilerContentBlot } from \"./blots/blocks/SpoilerBlot\";\nimport BlockquoteLineBlot, { BlockquoteWrapperBlot, BlockquoteContentBlot } from \"./blots/blocks/BlockquoteBlot\";\nimport CodeBlockBlot from \"./blots/blocks/CodeBlockBlot\";\n\n// Custom Modules/Themes\nimport VanillaTheme from \"./VanillaTheme\";\nimport FocusModule from \"./FocusModule\";\nimport EmbedInsertionModule from \"./EmbedInsertionModule\";\nimport HistoryModule from \"./HistoryModule\";\nimport ClipboardModule from \"./ClipboardModule\";\nimport LoadingBlot from \"./blots/embeds/LoadingBlot\";\n\nexport default function registerQuill() {\n    Quill.register(\n        {\n            // Block formats\n            \"blots/block\": BlockBlot,\n            \"formats/blockquote/line\": BlockquoteLineBlot,\n            \"formats/blockquote/content\": BlockquoteContentBlot,\n            \"formats/blockquote/wrapper\": BlockquoteWrapperBlot,\n            \"formats/spoiler/line\": SpoilerLineBlot,\n            \"formats/spoiler/content\": SpoilerContentBlot,\n            \"formats/spoiler/wrapper\": SpoilerWrapperBlot,\n            \"formats/codeBlock\": CodeBlockBlot,\n            \"formats/header\": Header,\n            \"formats/list\": List,\n            \"formats/list/item\": ListItem,\n            \"formats/embed-error\": EmbedErrorBlot,\n            \"formats/embed-loading\": LoadingBlot,\n            \"formats/embed-external\": ExternalEmbedBlot,\n            \"formats/mention\": MentionBlot,\n            \"formats/mention-combobox\": MentionComboBoxBlot,\n            \"formats/mention-autocomplete\": MentionAutoCompleteBlot,\n\n            // Inline formats\n            \"formats/bold\": Bold,\n            \"formats/codeInline\": CodeInlineBlot,\n            \"formats/italic\": Italic,\n            \"formats/link\": Link,\n            \"formats/strike\": Strike,\n            \"formats/emoji\": EmojiBlot,\n\n            // Other\n            \"formats/indent\": Indent,\n            \"themes/vanilla\": VanillaTheme,\n            \"modules/embed/insertion\": EmbedInsertionModule,\n            \"modules/embed/focus\": FocusModule,\n            \"modules/history\": HistoryModule,\n            \"modules/clipboard\": ClipboardModule,\n        },\n        true,\n    );\n\n    // Ensure the InlineCodeBlock is the outermost when formats are nested.\n    const inlineFormatBlots = [\n        \"blots/inline\",\n        \"formats/bold\",\n        \"formats/italic\",\n        \"formats/strike\",\n        \"formats/link\",\n        \"formats/codeInline\",\n    ];\n\n    inlineFormatBlots.forEach(blotLookup => {\n        const BlotClass = Quill.import(blotLookup);\n        BlotClass.order = [...BlotClass.order, CodeInlineBlot.blotName];\n    });\n\n    // The inline blot needs its order changed\n    const blotsAllowingMentionComboBox = [\n        \"blots/block\",\n        \"formats/list/item\",\n        \"formats/header\",\n        \"formats/bold\",\n        \"formats/italic\",\n        \"formats/strike\",\n    ];\n\n    blotsAllowingMentionComboBox.forEach(blotLookup => {\n        const BlotClass = Quill.import(blotLookup);\n        BlotClass.allowedChildren = [...BlotClass.allowedChildren, MentionComboBoxBlot];\n    });\n}\n","/**\n * A filtered down version of the emoij data we use.\n *\n * This is significantly filtered. The original data sources are in the `emojibase-data` node module.\n * - `emojibase-data/en/data.json`\n * Transformation applied: data.map(({emoji, group}) => {emoji, group});\n *\n * - `emojibase-data/meta/groups.json`\n * Transformation applied: Manually copying/pasting out the groups.\n *\n * @author Adam (charrondev) Charron <adam.c@vanillaforums.com>\n * @copyright 2009-2018 Vanilla Forums Inc.\n * @license https://opensource.org/licenses/GPL-2.0 GPL-2.0\n */\n\nimport {\n    emojiGroup_smileysPeople,\n    emojiGroup_animalsNature,\n    emojiGroup_foodDrink,\n    emojiGroup_travelPlaces,\n    emojiGroup_activities,\n    emojiGroup_objects,\n    emojiGroup_symbols,\n    emojiGroup_flags,\n} from \"@rich-editor/components/icons\";\n\nexport const EMOJI_GROUPS = [\n    {\n        name: \"Smileys & People\",\n        icon: emojiGroup_smileysPeople(),\n    },\n    {\n        name: \"Animals & Nature\",\n        icon: emojiGroup_animalsNature(),\n    },\n    {\n        name: \"Food & Drink\",\n        icon: emojiGroup_foodDrink(),\n    },\n    {\n        name: \"Travel & Places\",\n        icon: emojiGroup_travelPlaces(),\n    },\n    {\n        name: \"Activities\",\n        icon: emojiGroup_activities(),\n    },\n    {\n        name: \"Objects\",\n        icon: emojiGroup_objects(),\n    },\n    {\n        name: \"Symbols\",\n        icon: emojiGroup_symbols(),\n    },\n    {\n        name: \"Flags\",\n        icon: emojiGroup_flags(),\n    },\n];\n\nexport const EMOJIS = [\n    { emoji: \"😀\", group: 0 },\n    { emoji: \"😁\", group: 0 },\n    { emoji: \"😂\", group: 0 },\n    { emoji: \"🤣\", group: 0 },\n    { emoji: \"😃\", group: 0 },\n    { emoji: \"😄\", group: 0 },\n    { emoji: \"😅\", group: 0 },\n    { emoji: \"😆\", group: 0 },\n    { emoji: \"😉\", group: 0 },\n    { emoji: \"😊\", group: 0 },\n    { emoji: \"😋\", group: 0 },\n    { emoji: \"😎\", group: 0 },\n    { emoji: \"😍\", group: 0 },\n    { emoji: \"😘\", group: 0 },\n    { emoji: \"😗\", group: 0 },\n    { emoji: \"😙\", group: 0 },\n    { emoji: \"😚\", group: 0 },\n    { emoji: \"☺️\", group: 0 },\n    { emoji: \"🙂\", group: 0 },\n    { emoji: \"🤗\", group: 0 },\n    { emoji: \"🤩\", group: 0 },\n    { emoji: \"🤔\", group: 0 },\n    { emoji: \"🤨\", group: 0 },\n    { emoji: \"😐️\", group: 0 },\n    { emoji: \"😑\", group: 0 },\n    { emoji: \"😶\", group: 0 },\n    { emoji: \"🙄\", group: 0 },\n    { emoji: \"😏\", group: 0 },\n    { emoji: \"😣\", group: 0 },\n    { emoji: \"😥\", group: 0 },\n    { emoji: \"😮\", group: 0 },\n    { emoji: \"🤐\", group: 0 },\n    { emoji: \"😯\", group: 0 },\n    { emoji: \"😪\", group: 0 },\n    { emoji: \"😫\", group: 0 },\n    { emoji: \"😴\", group: 0 },\n    { emoji: \"😌\", group: 0 },\n    { emoji: \"😛\", group: 0 },\n    { emoji: \"😜\", group: 0 },\n    { emoji: \"😝\", group: 0 },\n    { emoji: \"🤤\", group: 0 },\n    { emoji: \"😒\", group: 0 },\n    { emoji: \"😓\", group: 0 },\n    { emoji: \"😔\", group: 0 },\n    { emoji: \"😕\", group: 0 },\n    { emoji: \"🙃\", group: 0 },\n    { emoji: \"🤑\", group: 0 },\n    { emoji: \"😲\", group: 0 },\n    { emoji: \"☹️\", group: 0 },\n    { emoji: \"🙁\", group: 0 },\n    { emoji: \"😖\", group: 0 },\n    { emoji: \"😞\", group: 0 },\n    { emoji: \"😟\", group: 0 },\n    { emoji: \"😤\", group: 0 },\n    { emoji: \"😢\", group: 0 },\n    { emoji: \"😭\", group: 0 },\n    { emoji: \"😦\", group: 0 },\n    { emoji: \"😧\", group: 0 },\n    { emoji: \"😨\", group: 0 },\n    { emoji: \"😩\", group: 0 },\n    { emoji: \"🤯\", group: 0 },\n    { emoji: \"😬\", group: 0 },\n    { emoji: \"😰\", group: 0 },\n    { emoji: \"😱\", group: 0 },\n    { emoji: \"😳\", group: 0 },\n    { emoji: \"🤪\", group: 0 },\n    { emoji: \"😵\", group: 0 },\n    { emoji: \"😡\", group: 0 },\n    { emoji: \"😠\", group: 0 },\n    { emoji: \"🤬\", group: 0 },\n    { emoji: \"😷\", group: 0 },\n    { emoji: \"🤒\", group: 0 },\n    { emoji: \"🤕\", group: 0 },\n    { emoji: \"🤢\", group: 0 },\n    { emoji: \"🤮\", group: 0 },\n    { emoji: \"🤧\", group: 0 },\n    { emoji: \"😇\", group: 0 },\n    { emoji: \"🤠\", group: 0 },\n    { emoji: \"🤡\", group: 0 },\n    { emoji: \"🤥\", group: 0 },\n    { emoji: \"🤫\", group: 0 },\n    { emoji: \"🤭\", group: 0 },\n    { emoji: \"🧐\", group: 0 },\n    { emoji: \"🤓\", group: 0 },\n    { emoji: \"😈\", group: 0 },\n    { emoji: \"👿\", group: 0 },\n    { emoji: \"👹\", group: 0 },\n    { emoji: \"👺\", group: 0 },\n    { emoji: \"💀\", group: 0 },\n    { emoji: \"☠️\", group: 0 },\n    { emoji: \"👻\", group: 0 },\n    { emoji: \"👽️\", group: 0 },\n    { emoji: \"👾\", group: 0 },\n    { emoji: \"🤖\", group: 0 },\n    { emoji: \"💩\", group: 0 },\n    { emoji: \"😺\", group: 0 },\n    { emoji: \"😸\", group: 0 },\n    { emoji: \"😹\", group: 0 },\n    { emoji: \"😻\", group: 0 },\n    { emoji: \"😼\", group: 0 },\n    { emoji: \"😽\", group: 0 },\n    { emoji: \"🙀\", group: 0 },\n    { emoji: \"😿\", group: 0 },\n    { emoji: \"😾\", group: 0 },\n    { emoji: \"🙈\", group: 0 },\n    { emoji: \"🙉\", group: 0 },\n    { emoji: \"🙊\", group: 0 },\n    { emoji: \"👶\", group: 0 },\n    { emoji: \"🧒\", group: 0 },\n    { emoji: \"👦\", group: 0 },\n    { emoji: \"👧\", group: 0 },\n    { emoji: \"🧑\", group: 0 },\n    { emoji: \"👨\", group: 0 },\n    { emoji: \"👩\", group: 0 },\n    { emoji: \"🧓\", group: 0 },\n    { emoji: \"👴\", group: 0 },\n    { emoji: \"👵\", group: 0 },\n    { emoji: \"👨‍⚕️\", group: 0 },\n    { emoji: \"👩‍⚕️\", group: 0 },\n    { emoji: \"👨‍🎓\", group: 0 },\n    { emoji: \"👩‍🎓\", group: 0 },\n    { emoji: \"👨‍🏫\", group: 0 },\n    { emoji: \"👩‍🏫\", group: 0 },\n    { emoji: \"👨‍⚖️\", group: 0 },\n    { emoji: \"👩‍⚖️\", group: 0 },\n    { emoji: \"👨‍🌾\", group: 0 },\n    { emoji: \"👩‍🌾\", group: 0 },\n    { emoji: \"👨‍🍳\", group: 0 },\n    { emoji: \"👩‍🍳\", group: 0 },\n    { emoji: \"👨‍🔧\", group: 0 },\n    { emoji: \"👩‍🔧\", group: 0 },\n    { emoji: \"👨‍🏭\", group: 0 },\n    { emoji: \"👩‍🏭\", group: 0 },\n    { emoji: \"👨‍💼\", group: 0 },\n    { emoji: \"👩‍💼\", group: 0 },\n    { emoji: \"👨‍🔬\", group: 0 },\n    { emoji: \"👩‍🔬\", group: 0 },\n    { emoji: \"👨‍💻\", group: 0 },\n    { emoji: \"👩‍💻\", group: 0 },\n    { emoji: \"👨‍🎤\", group: 0 },\n    { emoji: \"👩‍🎤\", group: 0 },\n    { emoji: \"👨‍🎨\", group: 0 },\n    { emoji: \"👩‍🎨\", group: 0 },\n    { emoji: \"👨‍✈️\", group: 0 },\n    { emoji: \"👩‍✈️\", group: 0 },\n    { emoji: \"👨‍🚀\", group: 0 },\n    { emoji: \"👩‍🚀\", group: 0 },\n    { emoji: \"👨‍🚒\", group: 0 },\n    { emoji: \"👩‍🚒\", group: 0 },\n    { emoji: \"👮\", group: 0 },\n    { emoji: \"👮‍♂️\", group: 0 },\n    { emoji: \"👮‍♀️\", group: 0 },\n    { emoji: \"🕵️\", group: 0 },\n    { emoji: \"🕵️‍♂️\", group: 0 },\n    { emoji: \"🕵️‍♀️\", group: 0 },\n    { emoji: \"💂\", group: 0 },\n    { emoji: \"💂‍♂️\", group: 0 },\n    { emoji: \"💂‍♀️\", group: 0 },\n    { emoji: \"👷\", group: 0 },\n    { emoji: \"👷‍♂️\", group: 0 },\n    { emoji: \"👷‍♀️\", group: 0 },\n    { emoji: \"🤴\", group: 0 },\n    { emoji: \"👸\", group: 0 },\n    { emoji: \"👳\", group: 0 },\n    { emoji: \"👳‍♂️\", group: 0 },\n    { emoji: \"👳‍♀️\", group: 0 },\n    { emoji: \"👲\", group: 0 },\n    { emoji: \"🧕\", group: 0 },\n    { emoji: \"🧔\", group: 0 },\n    { emoji: \"👱\", group: 0 },\n    { emoji: \"👱‍♂️\", group: 0 },\n    { emoji: \"👱‍♀️\", group: 0 },\n    { emoji: \"🤵\", group: 0 },\n    { emoji: \"👰\", group: 0 },\n    { emoji: \"🤰\", group: 0 },\n    { emoji: \"🤱\", group: 0 },\n    { emoji: \"👼\", group: 0 },\n    { emoji: \"🎅\", group: 0 },\n    { emoji: \"🤶\", group: 0 },\n    { emoji: \"🧙\", group: 0 },\n    { emoji: \"🧙‍♀️\", group: 0 },\n    { emoji: \"🧙‍♂️\", group: 0 },\n    { emoji: \"🧚\", group: 0 },\n    { emoji: \"🧚‍♀️\", group: 0 },\n    { emoji: \"🧚‍♂️\", group: 0 },\n    { emoji: \"🧛\", group: 0 },\n    { emoji: \"🧛‍♀️\", group: 0 },\n    { emoji: \"🧛‍♂️\", group: 0 },\n    { emoji: \"🧜\", group: 0 },\n    { emoji: \"🧜‍♀️\", group: 0 },\n    { emoji: \"🧜‍♂️\", group: 0 },\n    { emoji: \"🧝\", group: 0 },\n    { emoji: \"🧝‍♀️\", group: 0 },\n    { emoji: \"🧝‍♂️\", group: 0 },\n    { emoji: \"🧞\", group: 0 },\n    { emoji: \"🧞‍♀️\", group: 0 },\n    { emoji: \"🧞‍♂️\", group: 0 },\n    { emoji: \"🧟\", group: 0 },\n    { emoji: \"🧟‍♀️\", group: 0 },\n    { emoji: \"🧟‍♂️\", group: 0 },\n    { emoji: \"🙍\", group: 0 },\n    { emoji: \"🙍‍♂️\", group: 0 },\n    { emoji: \"🙍‍♀️\", group: 0 },\n    { emoji: \"🙎\", group: 0 },\n    { emoji: \"🙎‍♂️\", group: 0 },\n    { emoji: \"🙎‍♀️\", group: 0 },\n    { emoji: \"🙅\", group: 0 },\n    { emoji: \"🙅‍♂️\", group: 0 },\n    { emoji: \"🙅‍♀️\", group: 0 },\n    { emoji: \"🙆\", group: 0 },\n    { emoji: \"🙆‍♂️\", group: 0 },\n    { emoji: \"🙆‍♀️\", group: 0 },\n    { emoji: \"💁\", group: 0 },\n    { emoji: \"💁‍♂️\", group: 0 },\n    { emoji: \"💁‍♀️\", group: 0 },\n    { emoji: \"🙋\", group: 0 },\n    { emoji: \"🙋‍♂️\", group: 0 },\n    { emoji: \"🙋‍♀️\", group: 0 },\n    { emoji: \"🙇\", group: 0 },\n    { emoji: \"🙇‍♂️\", group: 0 },\n    { emoji: \"🙇‍♀️\", group: 0 },\n    { emoji: \"🤦\", group: 0 },\n    { emoji: \"🤦‍♂️\", group: 0 },\n    { emoji: \"🤦‍♀️\", group: 0 },\n    { emoji: \"🤷\", group: 0 },\n    { emoji: \"🤷‍♂️\", group: 0 },\n    { emoji: \"🤷‍♀️\", group: 0 },\n    { emoji: \"💆\", group: 0 },\n    { emoji: \"💆‍♂️\", group: 0 },\n    { emoji: \"💆‍♀️\", group: 0 },\n    { emoji: \"💇\", group: 0 },\n    { emoji: \"💇‍♂️\", group: 0 },\n    { emoji: \"💇‍♀️\", group: 0 },\n    { emoji: \"🚶\", group: 0 },\n    { emoji: \"🚶‍♂️\", group: 0 },\n    { emoji: \"🚶‍♀️\", group: 0 },\n    { emoji: \"🏃\", group: 0 },\n    { emoji: \"🏃‍♂️\", group: 0 },\n    { emoji: \"🏃‍♀️\", group: 0 },\n    { emoji: \"💃\", group: 0 },\n    { emoji: \"🕺\", group: 0 },\n    { emoji: \"👯\", group: 0 },\n    { emoji: \"👯‍♂️\", group: 0 },\n    { emoji: \"👯‍♀️\", group: 0 },\n    { emoji: \"🧖\", group: 0 },\n    { emoji: \"🧖‍♀️\", group: 0 },\n    { emoji: \"🧖‍♂️\", group: 0 },\n    { emoji: \"🧗\", group: 0 },\n    { emoji: \"🧗‍♀️\", group: 0 },\n    { emoji: \"🧗‍♂️\", group: 0 },\n    { emoji: \"🧘\", group: 0 },\n    { emoji: \"🧘‍♀️\", group: 0 },\n    { emoji: \"🧘‍♂️\", group: 0 },\n    { emoji: \"🛀\", group: 0 },\n    { emoji: \"🛌\", group: 0 },\n    { emoji: \"🕴️\", group: 0 },\n    { emoji: \"🗣️\", group: 0 },\n    { emoji: \"👤\", group: 0 },\n    { emoji: \"👥\", group: 0 },\n    { emoji: \"🤺\", group: 0 },\n    { emoji: \"🏇\", group: 0 },\n    { emoji: \"⛷️\", group: 0 },\n    { emoji: \"🏂️\", group: 0 },\n    { emoji: \"🏌️\", group: 0 },\n    { emoji: \"🏌️‍♂️\", group: 0 },\n    { emoji: \"🏌️‍♀️\", group: 0 },\n    { emoji: \"🏄️\", group: 0 },\n    { emoji: \"🏄‍♂️\", group: 0 },\n    { emoji: \"🏄‍♀️\", group: 0 },\n    { emoji: \"🚣\", group: 0 },\n    { emoji: \"🚣‍♂️\", group: 0 },\n    { emoji: \"🚣‍♀️\", group: 0 },\n    { emoji: \"🏊️\", group: 0 },\n    { emoji: \"🏊‍♂️\", group: 0 },\n    { emoji: \"🏊‍♀️\", group: 0 },\n    { emoji: \"⛹️\", group: 0 },\n    { emoji: \"⛹️‍♂️\", group: 0 },\n    { emoji: \"⛹️‍♀️\", group: 0 },\n    { emoji: \"🏋️\", group: 0 },\n    { emoji: \"🏋️‍♂️\", group: 0 },\n    { emoji: \"🏋️‍♀️\", group: 0 },\n    { emoji: \"🚴\", group: 0 },\n    { emoji: \"🚴‍♂️\", group: 0 },\n    { emoji: \"🚴‍♀️\", group: 0 },\n    { emoji: \"🚵\", group: 0 },\n    { emoji: \"🚵‍♂️\", group: 0 },\n    { emoji: \"🚵‍♀️\", group: 0 },\n    { emoji: \"🏎️\", group: 0 },\n    { emoji: \"🏍️\", group: 0 },\n    { emoji: \"🤸\", group: 0 },\n    { emoji: \"🤸‍♂️\", group: 0 },\n    { emoji: \"🤸‍♀️\", group: 0 },\n    { emoji: \"🤼\", group: 0 },\n    { emoji: \"🤼‍♂️\", group: 0 },\n    { emoji: \"🤼‍♀️\", group: 0 },\n    { emoji: \"🤽\", group: 0 },\n    { emoji: \"🤽‍♂️\", group: 0 },\n    { emoji: \"🤽‍♀️\", group: 0 },\n    { emoji: \"🤾\", group: 0 },\n    { emoji: \"🤾‍♂️\", group: 0 },\n    { emoji: \"🤾‍♀️\", group: 0 },\n    { emoji: \"🤹\", group: 0 },\n    { emoji: \"🤹‍♂️\", group: 0 },\n    { emoji: \"🤹‍♀️\", group: 0 },\n    { emoji: \"👫\", group: 0 },\n    { emoji: \"👬\", group: 0 },\n    { emoji: \"👭\", group: 0 },\n    { emoji: \"💏\", group: 0 },\n    { emoji: \"👩‍❤️‍💋‍👨\", group: 0 },\n    { emoji: \"👨‍❤️‍💋‍👨\", group: 0 },\n    { emoji: \"👩‍❤️‍💋‍👩\", group: 0 },\n    { emoji: \"💑\", group: 0 },\n    { emoji: \"👩‍❤️‍👨\", group: 0 },\n    { emoji: \"👨‍❤️‍👨\", group: 0 },\n    { emoji: \"👩‍❤️‍👩\", group: 0 },\n    { emoji: \"👪️\", group: 0 },\n    { emoji: \"👨‍👩‍👦\", group: 0 },\n    { emoji: \"👨‍👩‍👧\", group: 0 },\n    { emoji: \"👨‍👩‍👧‍👦\", group: 0 },\n    { emoji: \"👨‍👩‍👦‍👦\", group: 0 },\n    { emoji: \"👨‍👩‍👧‍👧\", group: 0 },\n    { emoji: \"👨‍👨‍👦\", group: 0 },\n    { emoji: \"👨‍👨‍👧\", group: 0 },\n    { emoji: \"👨‍👨‍👧‍👦\", group: 0 },\n    { emoji: \"👨‍👨‍👦‍👦\", group: 0 },\n    { emoji: \"👨‍👨‍👧‍👧\", group: 0 },\n    { emoji: \"👩‍👩‍👦\", group: 0 },\n    { emoji: \"👩‍👩‍👧\", group: 0 },\n    { emoji: \"👩‍👩‍👧‍👦\", group: 0 },\n    { emoji: \"👩‍👩‍👦‍👦\", group: 0 },\n    { emoji: \"👩‍👩‍👧‍👧\", group: 0 },\n    { emoji: \"👨‍👦\", group: 0 },\n    { emoji: \"👨‍👦‍👦\", group: 0 },\n    { emoji: \"👨‍👧\", group: 0 },\n    { emoji: \"👨‍👧‍👦\", group: 0 },\n    { emoji: \"👨‍👧‍👧\", group: 0 },\n    { emoji: \"👩‍👦\", group: 0 },\n    { emoji: \"👩‍👦‍👦\", group: 0 },\n    { emoji: \"👩‍👧\", group: 0 },\n    { emoji: \"👩‍👧‍👦\", group: 0 },\n    { emoji: \"👩‍👧‍👧\", group: 0 },\n    { emoji: \"🤳\", group: 0 },\n    { emoji: \"💪\", group: 0 },\n    { emoji: \"👈️\", group: 0 },\n    { emoji: \"👉️\", group: 0 },\n    { emoji: \"☝️\", group: 0 },\n    { emoji: \"👆️\", group: 0 },\n    { emoji: \"🖕\", group: 0 },\n    { emoji: \"👇️\", group: 0 },\n    { emoji: \"✌️\", group: 0 },\n    { emoji: \"🤞\", group: 0 },\n    { emoji: \"🖖\", group: 0 },\n    { emoji: \"🤘\", group: 0 },\n    { emoji: \"🤙\", group: 0 },\n    { emoji: \"🖐️\", group: 0 },\n    { emoji: \"✋\", group: 0 },\n    { emoji: \"👌\", group: 0 },\n    { emoji: \"👍️\", group: 0 },\n    { emoji: \"👎️\", group: 0 },\n    { emoji: \"✊\", group: 0 },\n    { emoji: \"👊\", group: 0 },\n    { emoji: \"🤛\", group: 0 },\n    { emoji: \"🤜\", group: 0 },\n    { emoji: \"🤚\", group: 0 },\n    { emoji: \"👋\", group: 0 },\n    { emoji: \"🤟\", group: 0 },\n    { emoji: \"✍️\", group: 0 },\n    { emoji: \"👏\", group: 0 },\n    { emoji: \"👐\", group: 0 },\n    { emoji: \"🙌\", group: 0 },\n    { emoji: \"🤲\", group: 0 },\n    { emoji: \"🙏\", group: 0 },\n    { emoji: \"🤝\", group: 0 },\n    { emoji: \"💅\", group: 0 },\n    { emoji: \"👂️\", group: 0 },\n    { emoji: \"👃\", group: 0 },\n    { emoji: \"👣\", group: 0 },\n    { emoji: \"👀\", group: 0 },\n    { emoji: \"👁️\", group: 0 },\n    { emoji: \"👁️‍🗨️\", group: 0 },\n    { emoji: \"🧠\", group: 0 },\n    { emoji: \"👅\", group: 0 },\n    { emoji: \"👄\", group: 0 },\n    { emoji: \"💋\", group: 0 },\n    { emoji: \"💘\", group: 0 },\n    { emoji: \"❤️\", group: 0 },\n    { emoji: \"💓\", group: 0 },\n    { emoji: \"💔\", group: 0 },\n    { emoji: \"💕\", group: 0 },\n    { emoji: \"💖\", group: 0 },\n    { emoji: \"💗\", group: 0 },\n    { emoji: \"💙\", group: 0 },\n    { emoji: \"💚\", group: 0 },\n    { emoji: \"💛\", group: 0 },\n    { emoji: \"🧡\", group: 0 },\n    { emoji: \"💜\", group: 0 },\n    { emoji: \"🖤\", group: 0 },\n    { emoji: \"💝\", group: 0 },\n    { emoji: \"💞\", group: 0 },\n    { emoji: \"💟\", group: 0 },\n    { emoji: \"❣️\", group: 0 },\n    { emoji: \"💌\", group: 0 },\n    { emoji: \"💤\", group: 0 },\n    { emoji: \"💢\", group: 0 },\n    { emoji: \"💣️\", group: 0 },\n    { emoji: \"💥\", group: 0 },\n    { emoji: \"💦\", group: 0 },\n    { emoji: \"💨\", group: 0 },\n    { emoji: \"💫\", group: 0 },\n    { emoji: \"💬\", group: 0 },\n    { emoji: \"🗨️\", group: 0 },\n    { emoji: \"🗯️\", group: 0 },\n    { emoji: \"💭\", group: 0 },\n    { emoji: \"🕳️\", group: 0 },\n    { emoji: \"👓️\", group: 0 },\n    { emoji: \"🕶️\", group: 0 },\n    { emoji: \"👔\", group: 0 },\n    { emoji: \"👕\", group: 0 },\n    { emoji: \"👖\", group: 0 },\n    { emoji: \"🧣\", group: 0 },\n    { emoji: \"🧤\", group: 0 },\n    { emoji: \"🧥\", group: 0 },\n    { emoji: \"🧦\", group: 0 },\n    { emoji: \"👗\", group: 0 },\n    { emoji: \"👘\", group: 0 },\n    { emoji: \"👙\", group: 0 },\n    { emoji: \"👚\", group: 0 },\n    { emoji: \"👛\", group: 0 },\n    { emoji: \"👜\", group: 0 },\n    { emoji: \"👝\", group: 0 },\n    { emoji: \"🛍️\", group: 0 },\n    { emoji: \"🎒\", group: 0 },\n    { emoji: \"👞\", group: 0 },\n    { emoji: \"👟\", group: 0 },\n    { emoji: \"👠\", group: 0 },\n    { emoji: \"👡\", group: 0 },\n    { emoji: \"👢\", group: 0 },\n    { emoji: \"👑\", group: 0 },\n    { emoji: \"👒\", group: 0 },\n    { emoji: \"🎩\", group: 0 },\n    { emoji: \"🎓️\", group: 0 },\n    { emoji: \"🧢\", group: 0 },\n    { emoji: \"⛑️\", group: 0 },\n    { emoji: \"📿\", group: 0 },\n    { emoji: \"💄\", group: 0 },\n    { emoji: \"💍\", group: 0 },\n    { emoji: \"💎\", group: 0 },\n    { emoji: \"🐵\", group: 1 },\n    { emoji: \"🐒\", group: 1 },\n    { emoji: \"🦍\", group: 1 },\n    { emoji: \"🐶\", group: 1 },\n    { emoji: \"🐕️\", group: 1 },\n    { emoji: \"🐩\", group: 1 },\n    { emoji: \"🐺\", group: 1 },\n    { emoji: \"🦊\", group: 1 },\n    { emoji: \"🐱\", group: 1 },\n    { emoji: \"🐈️\", group: 1 },\n    { emoji: \"🦁\", group: 1 },\n    { emoji: \"🐯\", group: 1 },\n    { emoji: \"🐅\", group: 1 },\n    { emoji: \"🐆\", group: 1 },\n    { emoji: \"🐴\", group: 1 },\n    { emoji: \"🐎\", group: 1 },\n    { emoji: \"🦄\", group: 1 },\n    { emoji: \"🦓\", group: 1 },\n    { emoji: \"🦌\", group: 1 },\n    { emoji: \"🐮\", group: 1 },\n    { emoji: \"🐂\", group: 1 },\n    { emoji: \"🐃\", group: 1 },\n    { emoji: \"🐄\", group: 1 },\n    { emoji: \"🐷\", group: 1 },\n    { emoji: \"🐖\", group: 1 },\n    { emoji: \"🐗\", group: 1 },\n    { emoji: \"🐽\", group: 1 },\n    { emoji: \"🐏\", group: 1 },\n    { emoji: \"🐑\", group: 1 },\n    { emoji: \"🐐\", group: 1 },\n    { emoji: \"🐪\", group: 1 },\n    { emoji: \"🐫\", group: 1 },\n    { emoji: \"🦒\", group: 1 },\n    { emoji: \"🐘\", group: 1 },\n    { emoji: \"🦏\", group: 1 },\n    { emoji: \"🐭\", group: 1 },\n    { emoji: \"🐁\", group: 1 },\n    { emoji: \"🐀\", group: 1 },\n    { emoji: \"🐹\", group: 1 },\n    { emoji: \"🐰\", group: 1 },\n    { emoji: \"🐇\", group: 1 },\n    { emoji: \"🐿️\", group: 1 },\n    { emoji: \"🦔\", group: 1 },\n    { emoji: \"🦇\", group: 1 },\n    { emoji: \"🐻\", group: 1 },\n    { emoji: \"🐨\", group: 1 },\n    { emoji: \"🐼\", group: 1 },\n    { emoji: \"🐾\", group: 1 },\n    { emoji: \"🦃\", group: 1 },\n    { emoji: \"🐔\", group: 1 },\n    { emoji: \"🐓\", group: 1 },\n    { emoji: \"🐣\", group: 1 },\n    { emoji: \"🐤\", group: 1 },\n    { emoji: \"🐥\", group: 1 },\n    { emoji: \"🐦️\", group: 1 },\n    { emoji: \"🐧\", group: 1 },\n    { emoji: \"🕊️\", group: 1 },\n    { emoji: \"🦅\", group: 1 },\n    { emoji: \"🦆\", group: 1 },\n    { emoji: \"🦉\", group: 1 },\n    { emoji: \"🐸\", group: 1 },\n    { emoji: \"🐊\", group: 1 },\n    { emoji: \"🐢\", group: 1 },\n    { emoji: \"🦎\", group: 1 },\n    { emoji: \"🐍\", group: 1 },\n    { emoji: \"🐲\", group: 1 },\n    { emoji: \"🐉\", group: 1 },\n    { emoji: \"🦕\", group: 1 },\n    { emoji: \"🦖\", group: 1 },\n    { emoji: \"🐳\", group: 1 },\n    { emoji: \"🐋\", group: 1 },\n    { emoji: \"🐬\", group: 1 },\n    { emoji: \"🐟️\", group: 1 },\n    { emoji: \"🐠\", group: 1 },\n    { emoji: \"🐡\", group: 1 },\n    { emoji: \"🦈\", group: 1 },\n    { emoji: \"🐙\", group: 1 },\n    { emoji: \"🐚\", group: 1 },\n    { emoji: \"🦀\", group: 1 },\n    { emoji: \"🦐\", group: 1 },\n    { emoji: \"🦑\", group: 1 },\n    { emoji: \"🐌\", group: 1 },\n    { emoji: \"🦋\", group: 1 },\n    { emoji: \"🐛\", group: 1 },\n    { emoji: \"🐜\", group: 1 },\n    { emoji: \"🐝\", group: 1 },\n    { emoji: \"🐞\", group: 1 },\n    { emoji: \"🦗\", group: 1 },\n    { emoji: \"🕷️\", group: 1 },\n    { emoji: \"🕸️\", group: 1 },\n    { emoji: \"🦂\", group: 1 },\n    { emoji: \"💐\", group: 1 },\n    { emoji: \"🌸\", group: 1 },\n    { emoji: \"💮\", group: 1 },\n    { emoji: \"🏵️\", group: 1 },\n    { emoji: \"🌹\", group: 1 },\n    { emoji: \"🥀\", group: 1 },\n    { emoji: \"🌺\", group: 1 },\n    { emoji: \"🌻\", group: 1 },\n    { emoji: \"🌼\", group: 1 },\n    { emoji: \"🌷\", group: 1 },\n    { emoji: \"🌱\", group: 1 },\n    { emoji: \"🌲\", group: 1 },\n    { emoji: \"🌳\", group: 1 },\n    { emoji: \"🌴\", group: 1 },\n    { emoji: \"🌵\", group: 1 },\n    { emoji: \"🌾\", group: 1 },\n    { emoji: \"🌿\", group: 1 },\n    { emoji: \"☘️\", group: 1 },\n    { emoji: \"🍀\", group: 1 },\n    { emoji: \"🍁\", group: 1 },\n    { emoji: \"🍂\", group: 1 },\n    { emoji: \"🍃\", group: 1 },\n    { emoji: \"🍇\", group: 2 },\n    { emoji: \"🍈\", group: 2 },\n    { emoji: \"🍉\", group: 2 },\n    { emoji: \"🍊\", group: 2 },\n    { emoji: \"🍋\", group: 2 },\n    { emoji: \"🍌\", group: 2 },\n    { emoji: \"🍍\", group: 2 },\n    { emoji: \"🍎\", group: 2 },\n    { emoji: \"🍏\", group: 2 },\n    { emoji: \"🍐\", group: 2 },\n    { emoji: \"🍑\", group: 2 },\n    { emoji: \"🍒\", group: 2 },\n    { emoji: \"🍓\", group: 2 },\n    { emoji: \"🥝\", group: 2 },\n    { emoji: \"🍅\", group: 2 },\n    { emoji: \"🥥\", group: 2 },\n    { emoji: \"🥑\", group: 2 },\n    { emoji: \"🍆\", group: 2 },\n    { emoji: \"🥔\", group: 2 },\n    { emoji: \"🥕\", group: 2 },\n    { emoji: \"🌽\", group: 2 },\n    { emoji: \"🌶️\", group: 2 },\n    { emoji: \"🥒\", group: 2 },\n    { emoji: \"🥦\", group: 2 },\n    { emoji: \"🍄\", group: 2 },\n    { emoji: \"🥜\", group: 2 },\n    { emoji: \"🌰\", group: 2 },\n    { emoji: \"🍞\", group: 2 },\n    { emoji: \"🥐\", group: 2 },\n    { emoji: \"🥖\", group: 2 },\n    { emoji: \"🥨\", group: 2 },\n    { emoji: \"🥞\", group: 2 },\n    { emoji: \"🧀\", group: 2 },\n    { emoji: \"🍖\", group: 2 },\n    { emoji: \"🍗\", group: 2 },\n    { emoji: \"🥩\", group: 2 },\n    { emoji: \"🥓\", group: 2 },\n    { emoji: \"🍔\", group: 2 },\n    { emoji: \"🍟\", group: 2 },\n    { emoji: \"🍕\", group: 2 },\n    { emoji: \"🌭\", group: 2 },\n    { emoji: \"🥪\", group: 2 },\n    { emoji: \"🌮\", group: 2 },\n    { emoji: \"🌯\", group: 2 },\n    { emoji: \"🥙\", group: 2 },\n    { emoji: \"🥚\", group: 2 },\n    { emoji: \"🍳\", group: 2 },\n    { emoji: \"🥘\", group: 2 },\n    { emoji: \"🍲\", group: 2 },\n    { emoji: \"🥣\", group: 2 },\n    { emoji: \"🥗\", group: 2 },\n    { emoji: \"🍿\", group: 2 },\n    { emoji: \"🥫\", group: 2 },\n    { emoji: \"🍱\", group: 2 },\n    { emoji: \"🍘\", group: 2 },\n    { emoji: \"🍙\", group: 2 },\n    { emoji: \"🍚\", group: 2 },\n    { emoji: \"🍛\", group: 2 },\n    { emoji: \"🍜\", group: 2 },\n    { emoji: \"🍝\", group: 2 },\n    { emoji: \"🍠\", group: 2 },\n    { emoji: \"🍢\", group: 2 },\n    { emoji: \"🍣\", group: 2 },\n    { emoji: \"🍤\", group: 2 },\n    { emoji: \"🍥\", group: 2 },\n    { emoji: \"🍡\", group: 2 },\n    { emoji: \"🥟\", group: 2 },\n    { emoji: \"🥠\", group: 2 },\n    { emoji: \"🥡\", group: 2 },\n    { emoji: \"🍦\", group: 2 },\n    { emoji: \"🍧\", group: 2 },\n    { emoji: \"🍨\", group: 2 },\n    { emoji: \"🍩\", group: 2 },\n    { emoji: \"🍪\", group: 2 },\n    { emoji: \"🎂\", group: 2 },\n    { emoji: \"🍰\", group: 2 },\n    { emoji: \"🥧\", group: 2 },\n    { emoji: \"🍫\", group: 2 },\n    { emoji: \"🍬\", group: 2 },\n    { emoji: \"🍭\", group: 2 },\n    { emoji: \"🍮\", group: 2 },\n    { emoji: \"🍯\", group: 2 },\n    { emoji: \"🍼\", group: 2 },\n    { emoji: \"🥛\", group: 2 },\n    { emoji: \"☕️\", group: 2 },\n    { emoji: \"🍵\", group: 2 },\n    { emoji: \"🍶\", group: 2 },\n    { emoji: \"🍾\", group: 2 },\n    { emoji: \"🍷\", group: 2 },\n    { emoji: \"🍸️\", group: 2 },\n    { emoji: \"🍹\", group: 2 },\n    { emoji: \"🍺\", group: 2 },\n    { emoji: \"🍻\", group: 2 },\n    { emoji: \"🥂\", group: 2 },\n    { emoji: \"🥃\", group: 2 },\n    { emoji: \"🥤\", group: 2 },\n    { emoji: \"🥢\", group: 2 },\n    { emoji: \"🍽️\", group: 2 },\n    { emoji: \"🍴\", group: 2 },\n    { emoji: \"🥄\", group: 2 },\n    { emoji: \"🔪\", group: 2 },\n    { emoji: \"🏺\", group: 2 },\n    { emoji: \"🌍️\", group: 3 },\n    { emoji: \"🌎️\", group: 3 },\n    { emoji: \"🌏️\", group: 3 },\n    { emoji: \"🌐\", group: 3 },\n    { emoji: \"🗺️\", group: 3 },\n    { emoji: \"🗾\", group: 3 },\n    { emoji: \"🏔️\", group: 3 },\n    { emoji: \"⛰️\", group: 3 },\n    { emoji: \"🌋\", group: 3 },\n    { emoji: \"🗻\", group: 3 },\n    { emoji: \"🏕️\", group: 3 },\n    { emoji: \"🏖️\", group: 3 },\n    { emoji: \"🏜️\", group: 3 },\n    { emoji: \"🏝️\", group: 3 },\n    { emoji: \"🏞️\", group: 3 },\n    { emoji: \"🏟️\", group: 3 },\n    { emoji: \"🏛️\", group: 3 },\n    { emoji: \"🏗️\", group: 3 },\n    { emoji: \"🏘️\", group: 3 },\n    { emoji: \"🏙️\", group: 3 },\n    { emoji: \"🏚️\", group: 3 },\n    { emoji: \"🏠️\", group: 3 },\n    { emoji: \"🏡\", group: 3 },\n    { emoji: \"🏢\", group: 3 },\n    { emoji: \"🏣\", group: 3 },\n    { emoji: \"🏤\", group: 3 },\n    { emoji: \"🏥\", group: 3 },\n    { emoji: \"🏦\", group: 3 },\n    { emoji: \"🏨\", group: 3 },\n    { emoji: \"🏩\", group: 3 },\n    { emoji: \"🏪\", group: 3 },\n    { emoji: \"🏫\", group: 3 },\n    { emoji: \"🏬\", group: 3 },\n    { emoji: \"🏭️\", group: 3 },\n    { emoji: \"🏯\", group: 3 },\n    { emoji: \"🏰\", group: 3 },\n    { emoji: \"💒\", group: 3 },\n    { emoji: \"🗼\", group: 3 },\n    { emoji: \"🗽\", group: 3 },\n    { emoji: \"⛪️\", group: 3 },\n    { emoji: \"🕌\", group: 3 },\n    { emoji: \"🕍\", group: 3 },\n    { emoji: \"⛩️\", group: 3 },\n    { emoji: \"🕋\", group: 3 },\n    { emoji: \"⛲️\", group: 3 },\n    { emoji: \"⛺️\", group: 3 },\n    { emoji: \"🌁\", group: 3 },\n    { emoji: \"🌃\", group: 3 },\n    { emoji: \"🌄\", group: 3 },\n    { emoji: \"🌅\", group: 3 },\n    { emoji: \"🌆\", group: 3 },\n    { emoji: \"🌇\", group: 3 },\n    { emoji: \"🌉\", group: 3 },\n    { emoji: \"♨️\", group: 3 },\n    { emoji: \"🌌\", group: 3 },\n    { emoji: \"🎠\", group: 3 },\n    { emoji: \"🎡\", group: 3 },\n    { emoji: \"🎢\", group: 3 },\n    { emoji: \"💈\", group: 3 },\n    { emoji: \"🎪\", group: 3 },\n    { emoji: \"🎭️\", group: 3 },\n    { emoji: \"🖼️\", group: 3 },\n    { emoji: \"🎨\", group: 3 },\n    { emoji: \"🎰\", group: 3 },\n    { emoji: \"🚂\", group: 3 },\n    { emoji: \"🚃\", group: 3 },\n    { emoji: \"🚄\", group: 3 },\n    { emoji: \"🚅\", group: 3 },\n    { emoji: \"🚆\", group: 3 },\n    { emoji: \"🚇️\", group: 3 },\n    { emoji: \"🚈\", group: 3 },\n    { emoji: \"🚉\", group: 3 },\n    { emoji: \"🚊\", group: 3 },\n    { emoji: \"🚝\", group: 3 },\n    { emoji: \"🚞\", group: 3 },\n    { emoji: \"🚋\", group: 3 },\n    { emoji: \"🚌\", group: 3 },\n    { emoji: \"🚍️\", group: 3 },\n    { emoji: \"🚎\", group: 3 },\n    { emoji: \"🚐\", group: 3 },\n    { emoji: \"🚑️\", group: 3 },\n    { emoji: \"🚒\", group: 3 },\n    { emoji: \"🚓\", group: 3 },\n    { emoji: \"🚔️\", group: 3 },\n    { emoji: \"🚕\", group: 3 },\n    { emoji: \"🚖\", group: 3 },\n    { emoji: \"🚗\", group: 3 },\n    { emoji: \"🚘️\", group: 3 },\n    { emoji: \"🚙\", group: 3 },\n    { emoji: \"🚚\", group: 3 },\n    { emoji: \"🚛\", group: 3 },\n    { emoji: \"🚜\", group: 3 },\n    { emoji: \"🚲️\", group: 3 },\n    { emoji: \"🛴\", group: 3 },\n    { emoji: \"🛵\", group: 3 },\n    { emoji: \"🚏\", group: 3 },\n    { emoji: \"🛣️\", group: 3 },\n    { emoji: \"🛤️\", group: 3 },\n    { emoji: \"⛽️\", group: 3 },\n    { emoji: \"🚨\", group: 3 },\n    { emoji: \"🚥\", group: 3 },\n    { emoji: \"🚦\", group: 3 },\n    { emoji: \"🚧\", group: 3 },\n    { emoji: \"🛑\", group: 3 },\n    { emoji: \"⚓️\", group: 3 },\n    { emoji: \"⛵️\", group: 3 },\n    { emoji: \"🛶\", group: 3 },\n    { emoji: \"🚤\", group: 3 },\n    { emoji: \"🛳️\", group: 3 },\n    { emoji: \"⛴️\", group: 3 },\n    { emoji: \"🛥️\", group: 3 },\n    { emoji: \"🚢\", group: 3 },\n    { emoji: \"✈️\", group: 3 },\n    { emoji: \"🛩️\", group: 3 },\n    { emoji: \"🛫\", group: 3 },\n    { emoji: \"🛬\", group: 3 },\n    { emoji: \"💺\", group: 3 },\n    { emoji: \"🚁\", group: 3 },\n    { emoji: \"🚟\", group: 3 },\n    { emoji: \"🚠\", group: 3 },\n    { emoji: \"🚡\", group: 3 },\n    { emoji: \"🛰️\", group: 3 },\n    { emoji: \"🚀\", group: 3 },\n    { emoji: \"🛸\", group: 3 },\n    { emoji: \"🛎️\", group: 3 },\n    { emoji: \"🚪\", group: 3 },\n    { emoji: \"🛏️\", group: 3 },\n    { emoji: \"🛋️\", group: 3 },\n    { emoji: \"🚽\", group: 3 },\n    { emoji: \"🚿\", group: 3 },\n    { emoji: \"🛁\", group: 3 },\n    { emoji: \"⌛️\", group: 3 },\n    { emoji: \"⏳️\", group: 3 },\n    { emoji: \"⌚️\", group: 3 },\n    { emoji: \"⏰\", group: 3 },\n    { emoji: \"⏱️\", group: 3 },\n    { emoji: \"⏲️\", group: 3 },\n    { emoji: \"🕰️\", group: 3 },\n    { emoji: \"🕛️\", group: 3 },\n    { emoji: \"🕧️\", group: 3 },\n    { emoji: \"🕐️\", group: 3 },\n    { emoji: \"🕜️\", group: 3 },\n    { emoji: \"🕑️\", group: 3 },\n    { emoji: \"🕝️\", group: 3 },\n    { emoji: \"🕒️\", group: 3 },\n    { emoji: \"🕞️\", group: 3 },\n    { emoji: \"🕓️\", group: 3 },\n    { emoji: \"🕟️\", group: 3 },\n    { emoji: \"🕔️\", group: 3 },\n    { emoji: \"🕠️\", group: 3 },\n    { emoji: \"🕕️\", group: 3 },\n    { emoji: \"🕡️\", group: 3 },\n    { emoji: \"🕖️\", group: 3 },\n    { emoji: \"🕢️\", group: 3 },\n    { emoji: \"🕗️\", group: 3 },\n    { emoji: \"🕣️\", group: 3 },\n    { emoji: \"🕘️\", group: 3 },\n    { emoji: \"🕤️\", group: 3 },\n    { emoji: \"🕙️\", group: 3 },\n    { emoji: \"🕥️\", group: 3 },\n    { emoji: \"🕚️\", group: 3 },\n    { emoji: \"🕦️\", group: 3 },\n    { emoji: \"🌑\", group: 3 },\n    { emoji: \"🌒\", group: 3 },\n    { emoji: \"🌓\", group: 3 },\n    { emoji: \"🌔\", group: 3 },\n    { emoji: \"🌕️\", group: 3 },\n    { emoji: \"🌖\", group: 3 },\n    { emoji: \"🌗\", group: 3 },\n    { emoji: \"🌘\", group: 3 },\n    { emoji: \"🌙\", group: 3 },\n    { emoji: \"🌚\", group: 3 },\n    { emoji: \"🌛\", group: 3 },\n    { emoji: \"🌜️\", group: 3 },\n    { emoji: \"🌡️\", group: 3 },\n    { emoji: \"☀️\", group: 3 },\n    { emoji: \"🌝\", group: 3 },\n    { emoji: \"🌞\", group: 3 },\n    { emoji: \"⭐️\", group: 3 },\n    { emoji: \"🌟\", group: 3 },\n    { emoji: \"🌠\", group: 3 },\n    { emoji: \"☁️\", group: 3 },\n    { emoji: \"⛅️\", group: 3 },\n    { emoji: \"⛈️\", group: 3 },\n    { emoji: \"🌤️\", group: 3 },\n    { emoji: \"🌥️\", group: 3 },\n    { emoji: \"🌦️\", group: 3 },\n    { emoji: \"🌧️\", group: 3 },\n    { emoji: \"🌨️\", group: 3 },\n    { emoji: \"🌩️\", group: 3 },\n    { emoji: \"🌪️\", group: 3 },\n    { emoji: \"🌫️\", group: 3 },\n    { emoji: \"🌬️\", group: 3 },\n    { emoji: \"🌀\", group: 3 },\n    { emoji: \"🌈\", group: 3 },\n    { emoji: \"🌂\", group: 3 },\n    { emoji: \"☂️\", group: 3 },\n    { emoji: \"☔️\", group: 3 },\n    { emoji: \"⛱️\", group: 3 },\n    { emoji: \"⚡️\", group: 3 },\n    { emoji: \"❄️\", group: 3 },\n    { emoji: \"☃️\", group: 3 },\n    { emoji: \"⛄️\", group: 3 },\n    { emoji: \"☄️\", group: 3 },\n    { emoji: \"🔥\", group: 3 },\n    { emoji: \"💧\", group: 3 },\n    { emoji: \"🌊\", group: 3 },\n    { emoji: \"🎃\", group: 4 },\n    { emoji: \"🎄\", group: 4 },\n    { emoji: \"🎆\", group: 4 },\n    { emoji: \"🎇\", group: 4 },\n    { emoji: \"✨\", group: 4 },\n    { emoji: \"🎈\", group: 4 },\n    { emoji: \"🎉\", group: 4 },\n    { emoji: \"🎊\", group: 4 },\n    { emoji: \"🎋\", group: 4 },\n    { emoji: \"🎍\", group: 4 },\n    { emoji: \"🎎\", group: 4 },\n    { emoji: \"🎏\", group: 4 },\n    { emoji: \"🎐\", group: 4 },\n    { emoji: \"🎑\", group: 4 },\n    { emoji: \"🎀\", group: 4 },\n    { emoji: \"🎁\", group: 4 },\n    { emoji: \"🎗️\", group: 4 },\n    { emoji: \"🎟️\", group: 4 },\n    { emoji: \"🎫\", group: 4 },\n    { emoji: \"🎖️\", group: 4 },\n    { emoji: \"🏆️\", group: 4 },\n    { emoji: \"🏅\", group: 4 },\n    { emoji: \"🥇\", group: 4 },\n    { emoji: \"🥈\", group: 4 },\n    { emoji: \"🥉\", group: 4 },\n    { emoji: \"⚽️\", group: 4 },\n    { emoji: \"⚾️\", group: 4 },\n    { emoji: \"🏀\", group: 4 },\n    { emoji: \"🏐\", group: 4 },\n    { emoji: \"🏈\", group: 4 },\n    { emoji: \"🏉\", group: 4 },\n    { emoji: \"🎾\", group: 4 },\n    { emoji: \"🎱\", group: 4 },\n    { emoji: \"🎳\", group: 4 },\n    { emoji: \"🏏\", group: 4 },\n    { emoji: \"🏑\", group: 4 },\n    { emoji: \"🏒\", group: 4 },\n    { emoji: \"🏓\", group: 4 },\n    { emoji: \"🏸\", group: 4 },\n    { emoji: \"🥊\", group: 4 },\n    { emoji: \"🥋\", group: 4 },\n    { emoji: \"🥅\", group: 4 },\n    { emoji: \"🎯\", group: 4 },\n    { emoji: \"⛳️\", group: 4 },\n    { emoji: \"⛸️\", group: 4 },\n    { emoji: \"🎣\", group: 4 },\n    { emoji: \"🎽\", group: 4 },\n    { emoji: \"🎿\", group: 4 },\n    { emoji: \"🛷\", group: 4 },\n    { emoji: \"🥌\", group: 4 },\n    { emoji: \"🎮️\", group: 4 },\n    { emoji: \"🕹️\", group: 4 },\n    { emoji: \"🎲\", group: 4 },\n    { emoji: \"♠️\", group: 4 },\n    { emoji: \"♥️\", group: 4 },\n    { emoji: \"♦️\", group: 4 },\n    { emoji: \"♣️\", group: 4 },\n    { emoji: \"🃏\", group: 4 },\n    { emoji: \"🀄️\", group: 4 },\n    { emoji: \"🎴\", group: 4 },\n    { emoji: \"🔇\", group: 5 },\n    { emoji: \"🔈️\", group: 5 },\n    { emoji: \"🔉\", group: 5 },\n    { emoji: \"🔊\", group: 5 },\n    { emoji: \"📢\", group: 5 },\n    { emoji: \"📣\", group: 5 },\n    { emoji: \"📯\", group: 5 },\n    { emoji: \"🔔\", group: 5 },\n    { emoji: \"🔕\", group: 5 },\n    { emoji: \"🎼\", group: 5 },\n    { emoji: \"🎵\", group: 5 },\n    { emoji: \"🎶\", group: 5 },\n    { emoji: \"🎙️\", group: 5 },\n    { emoji: \"🎚️\", group: 5 },\n    { emoji: \"🎛️\", group: 5 },\n    { emoji: \"🎤\", group: 5 },\n    { emoji: \"🎧️\", group: 5 },\n    { emoji: \"📻️\", group: 5 },\n    { emoji: \"🎷\", group: 5 },\n    { emoji: \"🎸\", group: 5 },\n    { emoji: \"🎹\", group: 5 },\n    { emoji: \"🎺\", group: 5 },\n    { emoji: \"🎻\", group: 5 },\n    { emoji: \"🥁\", group: 5 },\n    { emoji: \"📱\", group: 5 },\n    { emoji: \"📲\", group: 5 },\n    { emoji: \"☎️\", group: 5 },\n    { emoji: \"📞\", group: 5 },\n    { emoji: \"📟️\", group: 5 },\n    { emoji: \"📠\", group: 5 },\n    { emoji: \"🔋\", group: 5 },\n    { emoji: \"🔌\", group: 5 },\n    { emoji: \"💻️\", group: 5 },\n    { emoji: \"🖥️\", group: 5 },\n    { emoji: \"🖨️\", group: 5 },\n    { emoji: \"⌨️\", group: 5 },\n    { emoji: \"🖱️\", group: 5 },\n    { emoji: \"🖲️\", group: 5 },\n    { emoji: \"💽\", group: 5 },\n    { emoji: \"💾\", group: 5 },\n    { emoji: \"💿️\", group: 5 },\n    { emoji: \"📀\", group: 5 },\n    { emoji: \"🎥\", group: 5 },\n    { emoji: \"🎞️\", group: 5 },\n    { emoji: \"📽️\", group: 5 },\n    { emoji: \"🎬️\", group: 5 },\n    { emoji: \"📺️\", group: 5 },\n    { emoji: \"📷️\", group: 5 },\n    { emoji: \"📸\", group: 5 },\n    { emoji: \"📹️\", group: 5 },\n    { emoji: \"📼\", group: 5 },\n    { emoji: \"🔍️\", group: 5 },\n    { emoji: \"🔎\", group: 5 },\n    { emoji: \"🔬\", group: 5 },\n    { emoji: \"🔭\", group: 5 },\n    { emoji: \"📡\", group: 5 },\n    { emoji: \"🕯️\", group: 5 },\n    { emoji: \"💡\", group: 5 },\n    { emoji: \"🔦\", group: 5 },\n    { emoji: \"🏮\", group: 5 },\n    { emoji: \"📔\", group: 5 },\n    { emoji: \"📕\", group: 5 },\n    { emoji: \"📖\", group: 5 },\n    { emoji: \"📗\", group: 5 },\n    { emoji: \"📘\", group: 5 },\n    { emoji: \"📙\", group: 5 },\n    { emoji: \"📚️\", group: 5 },\n    { emoji: \"📓\", group: 5 },\n    { emoji: \"📒\", group: 5 },\n    { emoji: \"📃\", group: 5 },\n    { emoji: \"📜\", group: 5 },\n    { emoji: \"📄\", group: 5 },\n    { emoji: \"📰\", group: 5 },\n    { emoji: \"🗞️\", group: 5 },\n    { emoji: \"📑\", group: 5 },\n    { emoji: \"🔖\", group: 5 },\n    { emoji: \"🏷️\", group: 5 },\n    { emoji: \"💰️\", group: 5 },\n    { emoji: \"💴\", group: 5 },\n    { emoji: \"💵\", group: 5 },\n    { emoji: \"💶\", group: 5 },\n    { emoji: \"💷\", group: 5 },\n    { emoji: \"💸\", group: 5 },\n    { emoji: \"💳️\", group: 5 },\n    { emoji: \"💹\", group: 5 },\n    { emoji: \"💱\", group: 5 },\n    { emoji: \"💲\", group: 5 },\n    { emoji: \"✉️\", group: 5 },\n    { emoji: \"📧\", group: 5 },\n    { emoji: \"📨\", group: 5 },\n    { emoji: \"📩\", group: 5 },\n    { emoji: \"📤️\", group: 5 },\n    { emoji: \"📥️\", group: 5 },\n    { emoji: \"📦️\", group: 5 },\n    { emoji: \"📫️\", group: 5 },\n    { emoji: \"📪️\", group: 5 },\n    { emoji: \"📬️\", group: 5 },\n    { emoji: \"📭️\", group: 5 },\n    { emoji: \"📮\", group: 5 },\n    { emoji: \"🗳️\", group: 5 },\n    { emoji: \"✏️\", group: 5 },\n    { emoji: \"✒️\", group: 5 },\n    { emoji: \"🖋️\", group: 5 },\n    { emoji: \"🖊️\", group: 5 },\n    { emoji: \"🖌️\", group: 5 },\n    { emoji: \"🖍️\", group: 5 },\n    { emoji: \"📝\", group: 5 },\n    { emoji: \"💼\", group: 5 },\n    { emoji: \"📁\", group: 5 },\n    { emoji: \"📂\", group: 5 },\n    { emoji: \"🗂️\", group: 5 },\n    { emoji: \"📅\", group: 5 },\n    { emoji: \"📆\", group: 5 },\n    { emoji: \"🗒️\", group: 5 },\n    { emoji: \"🗓️\", group: 5 },\n    { emoji: \"📇\", group: 5 },\n    { emoji: \"📈\", group: 5 },\n    { emoji: \"📉\", group: 5 },\n    { emoji: \"📊\", group: 5 },\n    { emoji: \"📋️\", group: 5 },\n    { emoji: \"📌\", group: 5 },\n    { emoji: \"📍\", group: 5 },\n    { emoji: \"📎\", group: 5 },\n    { emoji: \"🖇️\", group: 5 },\n    { emoji: \"📏\", group: 5 },\n    { emoji: \"📐\", group: 5 },\n    { emoji: \"✂️\", group: 5 },\n    { emoji: \"🗃️\", group: 5 },\n    { emoji: \"🗄️\", group: 5 },\n    { emoji: \"🗑️\", group: 5 },\n    { emoji: \"🔒️\", group: 5 },\n    { emoji: \"🔓️\", group: 5 },\n    { emoji: \"🔏\", group: 5 },\n    { emoji: \"🔐\", group: 5 },\n    { emoji: \"🔑\", group: 5 },\n    { emoji: \"🗝️\", group: 5 },\n    { emoji: \"🔨\", group: 5 },\n    { emoji: \"⛏️\", group: 5 },\n    { emoji: \"⚒️\", group: 5 },\n    { emoji: \"🛠️\", group: 5 },\n    { emoji: \"🗡️\", group: 5 },\n    { emoji: \"⚔️\", group: 5 },\n    { emoji: \"🔫\", group: 5 },\n    { emoji: \"🏹\", group: 5 },\n    { emoji: \"🛡️\", group: 5 },\n    { emoji: \"🔧\", group: 5 },\n    { emoji: \"🔩\", group: 5 },\n    { emoji: \"⚙️\", group: 5 },\n    { emoji: \"🗜️\", group: 5 },\n    { emoji: \"⚗️\", group: 5 },\n    { emoji: \"⚖️\", group: 5 },\n    { emoji: \"🔗\", group: 5 },\n    { emoji: \"⛓️\", group: 5 },\n    { emoji: \"💉\", group: 5 },\n    { emoji: \"💊\", group: 5 },\n    { emoji: \"🚬\", group: 5 },\n    { emoji: \"⚰️\", group: 5 },\n    { emoji: \"⚱️\", group: 5 },\n    { emoji: \"🗿\", group: 5 },\n    { emoji: \"🛢️\", group: 5 },\n    { emoji: \"🔮\", group: 5 },\n    { emoji: \"🛒\", group: 5 },\n    { emoji: \"🏧\", group: 6 },\n    { emoji: \"🚮\", group: 6 },\n    { emoji: \"🚰\", group: 6 },\n    { emoji: \"♿️\", group: 6 },\n    { emoji: \"🚹️\", group: 6 },\n    { emoji: \"🚺️\", group: 6 },\n    { emoji: \"🚻\", group: 6 },\n    { emoji: \"🚼️\", group: 6 },\n    { emoji: \"🚾\", group: 6 },\n    { emoji: \"🛂\", group: 6 },\n    { emoji: \"🛃\", group: 6 },\n    { emoji: \"🛄\", group: 6 },\n    { emoji: \"🛅\", group: 6 },\n    { emoji: \"⚠️\", group: 6 },\n    { emoji: \"🚸\", group: 6 },\n    { emoji: \"⛔️\", group: 6 },\n    { emoji: \"🚫\", group: 6 },\n    { emoji: \"🚳\", group: 6 },\n    { emoji: \"🚭️\", group: 6 },\n    { emoji: \"🚯\", group: 6 },\n    { emoji: \"🚱\", group: 6 },\n    { emoji: \"🚷\", group: 6 },\n    { emoji: \"📵\", group: 6 },\n    { emoji: \"🔞\", group: 6 },\n    { emoji: \"☢️\", group: 6 },\n    { emoji: \"☣️\", group: 6 },\n    { emoji: \"⬆️\", group: 6 },\n    { emoji: \"↗️\", group: 6 },\n    { emoji: \"➡️\", group: 6 },\n    { emoji: \"↘️\", group: 6 },\n    { emoji: \"⬇️\", group: 6 },\n    { emoji: \"↙️\", group: 6 },\n    { emoji: \"⬅️\", group: 6 },\n    { emoji: \"↖️\", group: 6 },\n    { emoji: \"↕️\", group: 6 },\n    { emoji: \"↔️\", group: 6 },\n    { emoji: \"↩️\", group: 6 },\n    { emoji: \"↪️\", group: 6 },\n    { emoji: \"⤴️\", group: 6 },\n    { emoji: \"⤵️\", group: 6 },\n    { emoji: \"🔃\", group: 6 },\n    { emoji: \"🔄\", group: 6 },\n    { emoji: \"🔙\", group: 6 },\n    { emoji: \"🔚\", group: 6 },\n    { emoji: \"🔛\", group: 6 },\n    { emoji: \"🔜\", group: 6 },\n    { emoji: \"🔝\", group: 6 },\n    { emoji: \"🛐\", group: 6 },\n    { emoji: \"⚛️\", group: 6 },\n    { emoji: \"🕉️\", group: 6 },\n    { emoji: \"✡️\", group: 6 },\n    { emoji: \"☸️\", group: 6 },\n    { emoji: \"☯️\", group: 6 },\n    { emoji: \"✝️\", group: 6 },\n    { emoji: \"☦️\", group: 6 },\n    { emoji: \"☪️\", group: 6 },\n    { emoji: \"☮️\", group: 6 },\n    { emoji: \"🕎\", group: 6 },\n    { emoji: \"🔯\", group: 6 },\n    { emoji: \"♈️\", group: 6 },\n    { emoji: \"♉️\", group: 6 },\n    { emoji: \"♊️\", group: 6 },\n    { emoji: \"♋️\", group: 6 },\n    { emoji: \"♌️\", group: 6 },\n    { emoji: \"♍️\", group: 6 },\n    { emoji: \"♎️\", group: 6 },\n    { emoji: \"♏️\", group: 6 },\n    { emoji: \"♐️\", group: 6 },\n    { emoji: \"♑️\", group: 6 },\n    { emoji: \"♒️\", group: 6 },\n    { emoji: \"♓️\", group: 6 },\n    { emoji: \"⛎\", group: 6 },\n    { emoji: \"🔀\", group: 6 },\n    { emoji: \"🔁\", group: 6 },\n    { emoji: \"🔂\", group: 6 },\n    { emoji: \"▶️\", group: 6 },\n    { emoji: \"⏩️\", group: 6 },\n    { emoji: \"⏭️\", group: 6 },\n    { emoji: \"⏯️\", group: 6 },\n    { emoji: \"◀️\", group: 6 },\n    { emoji: \"⏪️\", group: 6 },\n    { emoji: \"⏮️\", group: 6 },\n    { emoji: \"🔼\", group: 6 },\n    { emoji: \"⏫\", group: 6 },\n    { emoji: \"🔽\", group: 6 },\n    { emoji: \"⏬\", group: 6 },\n    { emoji: \"⏸️\", group: 6 },\n    { emoji: \"⏹️\", group: 6 },\n    { emoji: \"⏺️\", group: 6 },\n    { emoji: \"⏏️\", group: 6 },\n    { emoji: \"🎦\", group: 6 },\n    { emoji: \"🔅\", group: 6 },\n    { emoji: \"🔆\", group: 6 },\n    { emoji: \"📶\", group: 6 },\n    { emoji: \"📳\", group: 6 },\n    { emoji: \"📴\", group: 6 },\n    { emoji: \"♀️\", group: 6 },\n    { emoji: \"♂️\", group: 6 },\n    { emoji: \"⚕️\", group: 6 },\n    { emoji: \"♻️\", group: 6 },\n    { emoji: \"⚜️\", group: 6 },\n    { emoji: \"🔱\", group: 6 },\n    { emoji: \"📛\", group: 6 },\n    { emoji: \"🔰\", group: 6 },\n    { emoji: \"⭕️\", group: 6 },\n    { emoji: \"✅\", group: 6 },\n    { emoji: \"☑️\", group: 6 },\n    { emoji: \"✔️\", group: 6 },\n    { emoji: \"✖️\", group: 6 },\n    { emoji: \"❌\", group: 6 },\n    { emoji: \"❎\", group: 6 },\n    { emoji: \"➕\", group: 6 },\n    { emoji: \"➖\", group: 6 },\n    { emoji: \"➗\", group: 6 },\n    { emoji: \"➰\", group: 6 },\n    { emoji: \"➿\", group: 6 },\n    { emoji: \"〽️\", group: 6 },\n    { emoji: \"✳️\", group: 6 },\n    { emoji: \"✴️\", group: 6 },\n    { emoji: \"❇️\", group: 6 },\n    { emoji: \"‼️\", group: 6 },\n    { emoji: \"⁉️\", group: 6 },\n    { emoji: \"❓️\", group: 6 },\n    { emoji: \"❔\", group: 6 },\n    { emoji: \"❕\", group: 6 },\n    { emoji: \"❗️\", group: 6 },\n    { emoji: \"〰️\", group: 6 },\n    { emoji: \"©️\", group: 6 },\n    { emoji: \"®️\", group: 6 },\n    { emoji: \"™️\", group: 6 },\n    { emoji: \"#️⃣\", group: 6 },\n    { emoji: \"*️⃣\", group: 6 },\n    { emoji: \"0️⃣\", group: 6 },\n    { emoji: \"1️⃣\", group: 6 },\n    { emoji: \"2️⃣\", group: 6 },\n    { emoji: \"3️⃣\", group: 6 },\n    { emoji: \"4️⃣\", group: 6 },\n    { emoji: \"5️⃣\", group: 6 },\n    { emoji: \"6️⃣\", group: 6 },\n    { emoji: \"7️⃣\", group: 6 },\n    { emoji: \"8️⃣\", group: 6 },\n    { emoji: \"9️⃣\", group: 6 },\n    { emoji: \"🔟\", group: 6 },\n    { emoji: \"💯\", group: 6 },\n    { emoji: \"🔠\", group: 6 },\n    { emoji: \"🔡\", group: 6 },\n    { emoji: \"🔢\", group: 6 },\n    { emoji: \"🔣\", group: 6 },\n    { emoji: \"🔤\", group: 6 },\n    { emoji: \"🅰️\", group: 6 },\n    { emoji: \"🆎\", group: 6 },\n    { emoji: \"🅱️\", group: 6 },\n    { emoji: \"🆑\", group: 6 },\n    { emoji: \"🆒\", group: 6 },\n    { emoji: \"🆓\", group: 6 },\n    { emoji: \"ℹ️\", group: 6 },\n    { emoji: \"🆔\", group: 6 },\n    { emoji: \"Ⓜ️\", group: 6 },\n    { emoji: \"🆕\", group: 6 },\n    { emoji: \"🆖\", group: 6 },\n    { emoji: \"🅾️\", group: 6 },\n    { emoji: \"🆗\", group: 6 },\n    { emoji: \"🅿️\", group: 6 },\n    { emoji: \"🆘\", group: 6 },\n    { emoji: \"🆙\", group: 6 },\n    { emoji: \"🆚\", group: 6 },\n    { emoji: \"🈁\", group: 6 },\n    { emoji: \"🈂️\", group: 6 },\n    { emoji: \"🈷️\", group: 6 },\n    { emoji: \"🈶\", group: 6 },\n    { emoji: \"🈯️\", group: 6 },\n    { emoji: \"🉐\", group: 6 },\n    { emoji: \"🈹\", group: 6 },\n    { emoji: \"🈚️\", group: 6 },\n    { emoji: \"🈲\", group: 6 },\n    { emoji: \"🉑\", group: 6 },\n    { emoji: \"🈸\", group: 6 },\n    { emoji: \"🈴\", group: 6 },\n    { emoji: \"🈳\", group: 6 },\n    { emoji: \"㊗️\", group: 6 },\n    { emoji: \"㊙️\", group: 6 },\n    { emoji: \"🈺\", group: 6 },\n    { emoji: \"🈵\", group: 6 },\n    { emoji: \"▪️\", group: 6 },\n    { emoji: \"▫️\", group: 6 },\n    { emoji: \"◻️\", group: 6 },\n    { emoji: \"◼️\", group: 6 },\n    { emoji: \"◽️\", group: 6 },\n    { emoji: \"◾️\", group: 6 },\n    { emoji: \"⬛️\", group: 6 },\n    { emoji: \"⬜️\", group: 6 },\n    { emoji: \"🔶\", group: 6 },\n    { emoji: \"🔷\", group: 6 },\n    { emoji: \"🔸\", group: 6 },\n    { emoji: \"🔹\", group: 6 },\n    { emoji: \"🔺\", group: 6 },\n    { emoji: \"🔻\", group: 6 },\n    { emoji: \"💠\", group: 6 },\n    { emoji: \"🔘\", group: 6 },\n    { emoji: \"🔲\", group: 6 },\n    { emoji: \"🔳\", group: 6 },\n    { emoji: \"⚪️\", group: 6 },\n    { emoji: \"⚫️\", group: 6 },\n    { emoji: \"🔴\", group: 6 },\n    { emoji: \"🔵\", group: 6 },\n    { emoji: \"🏁\", group: 7 },\n    { emoji: \"🚩\", group: 7 },\n    { emoji: \"🎌\", group: 7 },\n    { emoji: \"🏴\", group: 7 },\n    { emoji: \"🏳️\", group: 7 },\n    { emoji: \"🏳️‍🌈\", group: 7 },\n    { emoji: \"🇦🇨\", group: 7 },\n    { emoji: \"🇦🇩\", group: 7 },\n    { emoji: \"🇦🇪\", group: 7 },\n    { emoji: \"🇦🇫\", group: 7 },\n    { emoji: \"🇦🇬\", group: 7 },\n    { emoji: \"🇦🇮\", group: 7 },\n    { emoji: \"🇦🇱\", group: 7 },\n    { emoji: \"🇦🇲\", group: 7 },\n    { emoji: \"🇦🇴\", group: 7 },\n    { emoji: \"🇦🇶\", group: 7 },\n    { emoji: \"🇦🇷\", group: 7 },\n    { emoji: \"🇦🇸\", group: 7 },\n    { emoji: \"🇦🇹\", group: 7 },\n    { emoji: \"🇦🇺\", group: 7 },\n    { emoji: \"🇦🇼\", group: 7 },\n    { emoji: \"🇦🇽\", group: 7 },\n    { emoji: \"🇦🇿\", group: 7 },\n    { emoji: \"🇧🇦\", group: 7 },\n    { emoji: \"🇧🇧\", group: 7 },\n    { emoji: \"🇧🇩\", group: 7 },\n    { emoji: \"🇧🇪\", group: 7 },\n    { emoji: \"🇧🇫\", group: 7 },\n    { emoji: \"🇧🇬\", group: 7 },\n    { emoji: \"🇧🇭\", group: 7 },\n    { emoji: \"🇧🇮\", group: 7 },\n    { emoji: \"🇧🇯\", group: 7 },\n    { emoji: \"🇧🇱\", group: 7 },\n    { emoji: \"🇧🇲\", group: 7 },\n    { emoji: \"🇧🇳\", group: 7 },\n    { emoji: \"🇧🇴\", group: 7 },\n    { emoji: \"🇧🇶\", group: 7 },\n    { emoji: \"🇧🇷\", group: 7 },\n    { emoji: \"🇧🇸\", group: 7 },\n    { emoji: \"🇧🇹\", group: 7 },\n    { emoji: \"🇧🇻\", group: 7 },\n    { emoji: \"🇧🇼\", group: 7 },\n    { emoji: \"🇧🇾\", group: 7 },\n    { emoji: \"🇧🇿\", group: 7 },\n    { emoji: \"🇨🇦\", group: 7 },\n    { emoji: \"🇨🇨\", group: 7 },\n    { emoji: \"🇨🇩\", group: 7 },\n    { emoji: \"🇨🇫\", group: 7 },\n    { emoji: \"🇨🇬\", group: 7 },\n    { emoji: \"🇨🇭\", group: 7 },\n    { emoji: \"🇨🇮\", group: 7 },\n    { emoji: \"🇨🇰\", group: 7 },\n    { emoji: \"🇨🇱\", group: 7 },\n    { emoji: \"🇨🇲\", group: 7 },\n    { emoji: \"🇨🇳\", group: 7 },\n    { emoji: \"🇨🇴\", group: 7 },\n    { emoji: \"🇨🇵\", group: 7 },\n    { emoji: \"🇨🇷\", group: 7 },\n    { emoji: \"🇨🇺\", group: 7 },\n    { emoji: \"🇨🇻\", group: 7 },\n    { emoji: \"🇨🇼\", group: 7 },\n    { emoji: \"🇨🇽\", group: 7 },\n    { emoji: \"🇨🇾\", group: 7 },\n    { emoji: \"🇨🇿\", group: 7 },\n    { emoji: \"🇩🇪\", group: 7 },\n    { emoji: \"🇩🇬\", group: 7 },\n    { emoji: \"🇩🇯\", group: 7 },\n    { emoji: \"🇩🇰\", group: 7 },\n    { emoji: \"🇩🇲\", group: 7 },\n    { emoji: \"🇩🇴\", group: 7 },\n    { emoji: \"🇩🇿\", group: 7 },\n    { emoji: \"🇪🇦\", group: 7 },\n    { emoji: \"🇪🇨\", group: 7 },\n    { emoji: \"🇪🇪\", group: 7 },\n    { emoji: \"🇪🇬\", group: 7 },\n    { emoji: \"🇪🇭\", group: 7 },\n    { emoji: \"🇪🇷\", group: 7 },\n    { emoji: \"🇪🇸\", group: 7 },\n    { emoji: \"🇪🇹\", group: 7 },\n    { emoji: \"🇪🇺\", group: 7 },\n    { emoji: \"🇫🇮\", group: 7 },\n    { emoji: \"🇫🇯\", group: 7 },\n    { emoji: \"🇫🇰\", group: 7 },\n    { emoji: \"🇫🇲\", group: 7 },\n    { emoji: \"🇫🇴\", group: 7 },\n    { emoji: \"🇫🇷\", group: 7 },\n    { emoji: \"🇬🇦\", group: 7 },\n    { emoji: \"🇬🇧\", group: 7 },\n    { emoji: \"🇬🇩\", group: 7 },\n    { emoji: \"🇬🇪\", group: 7 },\n    { emoji: \"🇬🇫\", group: 7 },\n    { emoji: \"🇬🇬\", group: 7 },\n    { emoji: \"🇬🇭\", group: 7 },\n    { emoji: \"🇬🇮\", group: 7 },\n    { emoji: \"🇬🇱\", group: 7 },\n    { emoji: \"🇬🇲\", group: 7 },\n    { emoji: \"🇬🇳\", group: 7 },\n    { emoji: \"🇬🇵\", group: 7 },\n    { emoji: \"🇬🇶\", group: 7 },\n    { emoji: \"🇬🇷\", group: 7 },\n    { emoji: \"🇬🇸\", group: 7 },\n    { emoji: \"🇬🇹\", group: 7 },\n    { emoji: \"🇬🇺\", group: 7 },\n    { emoji: \"🇬🇼\", group: 7 },\n    { emoji: \"🇬🇾\", group: 7 },\n    { emoji: \"🇭🇰\", group: 7 },\n    { emoji: \"🇭🇲\", group: 7 },\n    { emoji: \"🇭🇳\", group: 7 },\n    { emoji: \"🇭🇷\", group: 7 },\n    { emoji: \"🇭🇹\", group: 7 },\n    { emoji: \"🇭🇺\", group: 7 },\n    { emoji: \"🇮🇨\", group: 7 },\n    { emoji: \"🇮🇩\", group: 7 },\n    { emoji: \"🇮🇪\", group: 7 },\n    { emoji: \"🇮🇱\", group: 7 },\n    { emoji: \"🇮🇲\", group: 7 },\n    { emoji: \"🇮🇳\", group: 7 },\n    { emoji: \"🇮🇴\", group: 7 },\n    { emoji: \"🇮🇶\", group: 7 },\n    { emoji: \"🇮🇷\", group: 7 },\n    { emoji: \"🇮🇸\", group: 7 },\n    { emoji: \"🇮🇹\", group: 7 },\n    { emoji: \"🇯🇪\", group: 7 },\n    { emoji: \"🇯🇲\", group: 7 },\n    { emoji: \"🇯🇴\", group: 7 },\n    { emoji: \"🇯🇵\", group: 7 },\n    { emoji: \"🇰🇪\", group: 7 },\n    { emoji: \"🇰🇬\", group: 7 },\n    { emoji: \"🇰🇭\", group: 7 },\n    { emoji: \"🇰🇮\", group: 7 },\n    { emoji: \"🇰🇲\", group: 7 },\n    { emoji: \"🇰🇳\", group: 7 },\n    { emoji: \"🇰🇵\", group: 7 },\n    { emoji: \"🇰🇷\", group: 7 },\n    { emoji: \"🇰🇼\", group: 7 },\n    { emoji: \"🇰🇾\", group: 7 },\n    { emoji: \"🇰🇿\", group: 7 },\n    { emoji: \"🇱🇦\", group: 7 },\n    { emoji: \"🇱🇧\", group: 7 },\n    { emoji: \"🇱🇨\", group: 7 },\n    { emoji: \"🇱🇮\", group: 7 },\n    { emoji: \"🇱🇰\", group: 7 },\n    { emoji: \"🇱🇷\", group: 7 },\n    { emoji: \"🇱🇸\", group: 7 },\n    { emoji: \"🇱🇹\", group: 7 },\n    { emoji: \"🇱🇺\", group: 7 },\n    { emoji: \"🇱🇻\", group: 7 },\n    { emoji: \"🇱🇾\", group: 7 },\n    { emoji: \"🇲🇦\", group: 7 },\n    { emoji: \"🇲🇨\", group: 7 },\n    { emoji: \"🇲🇩\", group: 7 },\n    { emoji: \"🇲🇪\", group: 7 },\n    { emoji: \"🇲🇫\", group: 7 },\n    { emoji: \"🇲🇬\", group: 7 },\n    { emoji: \"🇲🇭\", group: 7 },\n    { emoji: \"🇲🇰\", group: 7 },\n    { emoji: \"🇲🇱\", group: 7 },\n    { emoji: \"🇲🇲\", group: 7 },\n    { emoji: \"🇲🇳\", group: 7 },\n    { emoji: \"🇲🇴\", group: 7 },\n    { emoji: \"🇲🇵\", group: 7 },\n    { emoji: \"🇲🇶\", group: 7 },\n    { emoji: \"🇲🇷\", group: 7 },\n    { emoji: \"🇲🇸\", group: 7 },\n    { emoji: \"🇲🇹\", group: 7 },\n    { emoji: \"🇲🇺\", group: 7 },\n    { emoji: \"🇲🇻\", group: 7 },\n    { emoji: \"🇲🇼\", group: 7 },\n    { emoji: \"🇲🇽\", group: 7 },\n    { emoji: \"🇲🇾\", group: 7 },\n    { emoji: \"🇲🇿\", group: 7 },\n    { emoji: \"🇳🇦\", group: 7 },\n    { emoji: \"🇳🇨\", group: 7 },\n    { emoji: \"🇳🇪\", group: 7 },\n    { emoji: \"🇳🇫\", group: 7 },\n    { emoji: \"🇳🇬\", group: 7 },\n    { emoji: \"🇳🇮\", group: 7 },\n    { emoji: \"🇳🇱\", group: 7 },\n    { emoji: \"🇳🇴\", group: 7 },\n    { emoji: \"🇳🇵\", group: 7 },\n    { emoji: \"🇳🇷\", group: 7 },\n    { emoji: \"🇳🇺\", group: 7 },\n    { emoji: \"🇳🇿\", group: 7 },\n    { emoji: \"🇴🇲\", group: 7 },\n    { emoji: \"🇵🇦\", group: 7 },\n    { emoji: \"🇵🇪\", group: 7 },\n    { emoji: \"🇵🇫\", group: 7 },\n    { emoji: \"🇵🇬\", group: 7 },\n    { emoji: \"🇵🇭\", group: 7 },\n    { emoji: \"🇵🇰\", group: 7 },\n    { emoji: \"🇵🇱\", group: 7 },\n    { emoji: \"🇵🇲\", group: 7 },\n    { emoji: \"🇵🇳\", group: 7 },\n    { emoji: \"🇵🇷\", group: 7 },\n    { emoji: \"🇵🇸\", group: 7 },\n    { emoji: \"🇵🇹\", group: 7 },\n    { emoji: \"🇵🇼\", group: 7 },\n    { emoji: \"🇵🇾\", group: 7 },\n    { emoji: \"🇶🇦\", group: 7 },\n    { emoji: \"🇷🇪\", group: 7 },\n    { emoji: \"🇷🇴\", group: 7 },\n    { emoji: \"🇷🇸\", group: 7 },\n    { emoji: \"🇷🇺\", group: 7 },\n    { emoji: \"🇷🇼\", group: 7 },\n    { emoji: \"🇸🇦\", group: 7 },\n    { emoji: \"🇸🇧\", group: 7 },\n    { emoji: \"🇸🇨\", group: 7 },\n    { emoji: \"🇸🇩\", group: 7 },\n    { emoji: \"🇸🇪\", group: 7 },\n    { emoji: \"🇸🇬\", group: 7 },\n    { emoji: \"🇸🇭\", group: 7 },\n    { emoji: \"🇸🇮\", group: 7 },\n    { emoji: \"🇸🇯\", group: 7 },\n    { emoji: \"🇸🇰\", group: 7 },\n    { emoji: \"🇸🇱\", group: 7 },\n    { emoji: \"🇸🇲\", group: 7 },\n    { emoji: \"🇸🇳\", group: 7 },\n    { emoji: \"🇸🇴\", group: 7 },\n    { emoji: \"🇸🇷\", group: 7 },\n    { emoji: \"🇸🇸\", group: 7 },\n    { emoji: \"🇸🇹\", group: 7 },\n    { emoji: \"🇸🇻\", group: 7 },\n    { emoji: \"🇸🇽\", group: 7 },\n    { emoji: \"🇸🇾\", group: 7 },\n    { emoji: \"🇸🇿\", group: 7 },\n    { emoji: \"🇹🇦\", group: 7 },\n    { emoji: \"🇹🇨\", group: 7 },\n    { emoji: \"🇹🇩\", group: 7 },\n    { emoji: \"🇹🇫\", group: 7 },\n    { emoji: \"🇹🇬\", group: 7 },\n    { emoji: \"🇹🇭\", group: 7 },\n    { emoji: \"🇹🇯\", group: 7 },\n    { emoji: \"🇹🇰\", group: 7 },\n    { emoji: \"🇹🇱\", group: 7 },\n    { emoji: \"🇹🇲\", group: 7 },\n    { emoji: \"🇹🇳\", group: 7 },\n    { emoji: \"🇹🇴\", group: 7 },\n    { emoji: \"🇹🇷\", group: 7 },\n    { emoji: \"🇹🇹\", group: 7 },\n    { emoji: \"🇹🇻\", group: 7 },\n    { emoji: \"🇹🇼\", group: 7 },\n    { emoji: \"🇹🇿\", group: 7 },\n    { emoji: \"🇺🇦\", group: 7 },\n    { emoji: \"🇺🇬\", group: 7 },\n    { emoji: \"🇺🇲\", group: 7 },\n    { emoji: \"🇺🇳\", group: 7 },\n    { emoji: \"🇺🇸\", group: 7 },\n    { emoji: \"🇺🇾\", group: 7 },\n    { emoji: \"🇺🇿\", group: 7 },\n    { emoji: \"🇻🇦\", group: 7 },\n    { emoji: \"🇻🇨\", group: 7 },\n    { emoji: \"🇻🇪\", group: 7 },\n    { emoji: \"🇻🇬\", group: 7 },\n    { emoji: \"🇻🇮\", group: 7 },\n    { emoji: \"🇻🇳\", group: 7 },\n    { emoji: \"🇻🇺\", group: 7 },\n    { emoji: \"🇼🇫\", group: 7 },\n    { emoji: \"🇼🇸\", group: 7 },\n    { emoji: \"🇽🇰\", group: 7 },\n    { emoji: \"🇾🇪\", group: 7 },\n    { emoji: \"🇾🇹\", group: 7 },\n    { emoji: \"🇿🇦\", group: 7 },\n    { emoji: \"🇿🇲\", group: 7 },\n    { emoji: \"🇿🇼\", group: 7 },\n    { emoji: \"🏴󠁧󠁢󠁥󠁮󠁧󠁿\", group: 7 },\n    { emoji: \"🏴󠁧󠁢󠁳󠁣󠁴󠁿\", group: 7 },\n    { emoji: \"🏴󠁧󠁢󠁷󠁬󠁳󠁿\", group: 7 },\n];\n","/**\n * @author Adam (charrondev) Charron <adam.c@vanillaforums.com>\n * @copyright 2009-2018 Vanilla Forums Inc.\n * @license https://opensource.org/licenses/GPL-2.0 GPL-2.0\n */\n\nimport React from \"react\";\nimport Quill from \"quill/core\";\nimport classNames from \"classnames\";\nimport { convertToSafeEmojiCharacters } from \"@dashboard/dom\";\nimport { withEditor, IWithEditorProps } from \"@rich-editor/components/context\";\n\ninterface IProps extends IWithEditorProps {\n    emojiData: {\n        emoji: string;\n    };\n    style: React.CSSProperties;\n    index: number;\n    activeIndex: number;\n    onKeyUp: () => void;\n    onKeyDown: () => void;\n    onKeyRight: () => void;\n    onKeyLeft: () => void;\n    closeMenuHandler(event: React.SyntheticEvent<any>);\n}\n\n/**\n * Component for a single item in a EditorToolbar.\n */\nexport class EmojiButton extends React.Component<IProps> {\n    private emojiChar: string;\n    private quill: Quill;\n    private domButton: HTMLButtonElement;\n\n    constructor(props) {\n        super(props);\n        this.emojiChar = props.emojiData.emoji;\n        this.quill = props.quill;\n    }\n\n    public render() {\n        const componentClasses = classNames(\n            \"richEditor-button\",\n            \"richEditor-insertEmoji\",\n            \"emojiChar-\" + this.emojiChar,\n        );\n        return (\n            <button\n                ref={elButton => {\n                    this.domButton = elButton as HTMLButtonElement;\n                }}\n                onKeyDown={this.handleKeyPress}\n                style={this.props.style}\n                className={componentClasses}\n                type=\"button\"\n                onClick={this.insertEmojiBlot}\n            >\n                <span\n                    className=\"safeEmoji\"\n                    dangerouslySetInnerHTML={{ __html: convertToSafeEmojiCharacters(this.emojiChar) }}\n                />\n            </button>\n        );\n    }\n\n    /**\n     * Check to see if element should get focus\n     */\n    public componentDidUpdate() {\n        this.checkFocus();\n    }\n\n    /**\n     * Check to see if element should get focus\n     */\n    public componentDidMount() {\n        this.checkFocus();\n    }\n\n    private checkFocus() {\n        if (this.domButton && this.props.activeIndex === this.props.index) {\n            this.domButton.focus();\n        }\n    }\n\n    /**\n     * Insert Emoji\n     */\n    private insertEmojiBlot = (event: React.SyntheticEvent<any>) => {\n        const range = this.quill.getSelection(true);\n        this.quill.insertEmbed(\n            range.index,\n            \"emoji\",\n            {\n                emojiChar: this.emojiChar,\n            },\n            Quill.sources.USER,\n        );\n        this.quill.setSelection(range.index + 1, 0, Quill.sources.SILENT);\n        this.props.closeMenuHandler(event);\n    };\n\n    /**\n     * Handle key presses\n     */\n    private handleKeyPress = (event: React.KeyboardEvent<any>) => {\n        switch (event.key) {\n            case \"ArrowDown\":\n                event.stopPropagation();\n                event.preventDefault();\n                this.props.onKeyDown();\n                break;\n            case \"ArrowUp\":\n                event.stopPropagation();\n                event.preventDefault();\n                this.props.onKeyUp();\n                break;\n            case \"ArrowRight\":\n                event.stopPropagation();\n                event.preventDefault();\n                this.props.onKeyRight();\n                break;\n            case \"ArrowLeft\":\n                event.stopPropagation();\n                event.preventDefault();\n                this.props.onKeyLeft();\n                break;\n        }\n    };\n}\n\nexport default withEditor<IProps>(EmojiButton);\n","/**\n * @author Stéphane (slafleche) LaFlèche <stephane.l@vanillaforums.com>\n * @copyright 2009-2018 Vanilla Forums Inc.\n * @license https://opensource.org/licenses/GPL-2.0 GPL-2.0\n */\n\nimport React from \"react\";\nimport { Grid, AutoSizer } from \"react-virtualized\";\nimport classNames from \"classnames\";\nimport { t } from \"@dashboard/application\";\nimport * as Icons from \"@rich-editor/components/icons\";\nimport Popover from \"./Popover\";\nimport { IPopoverControllerChildParameters } from \"./PopoverController\";\nimport { withEditor, IWithEditorProps } from \"@rich-editor/components/context\";\nimport { EMOJI_GROUPS, EMOJIS } from \"./emojiData\";\nimport EmojiButton from \"./EmojiButton\";\n\nconst BUTTON_SIZE = 36;\nconst COL_SIZE = 7;\nconst ROW_SIZE = 7;\nconst rowIndexesByGroupId = {};\nconst cellIndexesByGroupId = {};\n\n/**\n * Get start positions for each category\n */\nEMOJIS.forEach((data, key) => {\n    const groupID = data.group;\n    if (!(groupID in rowIndexesByGroupId)) {\n        rowIndexesByGroupId[groupID] = Math.floor(key / COL_SIZE);\n        cellIndexesByGroupId[groupID] = key;\n    }\n});\n\nconst lastEmojiIndex = EMOJIS.length - 1;\n\ninterface IProps extends IWithEditorProps, IPopoverControllerChildParameters {\n    contentID: string;\n}\n\ninterface IState {\n    id: string;\n    contentID: string;\n    activeIndex: number;\n    rowStartIndex: number;\n    scrollToRow: number;\n    selectedGroupIndex: number;\n    alertMessage?: string;\n    title: string;\n}\n\nexport class EmojiPicker extends React.PureComponent<IProps, IState> {\n    private categoryPickerID: string;\n    private gridEl: Grid;\n    private lastRowIndex = this.getRowFromIndex(EMOJIS.length);\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            id: props.id,\n            contentID: props.contentID,\n            activeIndex: 0,\n            title: t(\"Emojis\"),\n            scrollToRow: 0,\n            rowStartIndex: 0,\n            selectedGroupIndex: 0,\n        };\n\n        this.categoryPickerID = \"emojiPicker-categories-\" + props.editorID;\n    }\n\n    get descriptionID(): string {\n        return this.state.id + \"-description\";\n    }\n    get titleID(): string {\n        return this.state.id + \"-title\";\n    }\n\n    public render() {\n        const description = [\n            t(\"Insert an emoji in your message.\"),\n            t(\n                'Use keyboard shortcuts \"page up\" and \"page down\" to cycle through available categories when menu is open.',\n            ),\n        ].join(\" \");\n\n        const extraHeadingContent = (\n            <button type=\"button\" className=\"accessibility-jumpTo\" onClick={this.focusOnCategories}>\n                {t(\"Jump past emoji list, to emoji categories.\")}\n            </button>\n        );\n\n        const Icon = <Icons.emoji />;\n\n        const footer = (\n            <div id={this.categoryPickerID} className=\"emojiGroups\" aria-label={t(\"Emoji Categories\")} tabIndex={-1}>\n                {Object.values(EMOJI_GROUPS).map((group, groupIndex) => {\n                    const { name, icon } = group;\n                    const isSelected = this.state.selectedGroupIndex === groupIndex;\n                    const buttonClasses = classNames(\"richEditor-button\", \"emojiGroup\", { isSelected });\n\n                    const onClick = event => this.handleCategoryClick(event, groupIndex);\n\n                    return (\n                        <button\n                            type=\"button\"\n                            onClick={onClick}\n                            aria-current={isSelected}\n                            aria-label={t(\"Jump to emoji category: \") + t(name)}\n                            key={\"emojiGroup-\" + name}\n                            title={t(name)}\n                            className={buttonClasses}\n                        >\n                            {icon}\n                            <span className=\"sr-only\">{t(\"Jump to emoji category: \") + t(name)}</span>\n                        </button>\n                    );\n                })}\n            </div>\n        );\n\n        const grid = (\n            <AutoSizer>\n                {({ height, width }) => (\n                    <Grid\n                        containerRole=\"\"\n                        cellRenderer={this.cellRenderer}\n                        columnCount={COL_SIZE}\n                        columnWidth={BUTTON_SIZE}\n                        rowCount={this.lastRowIndex + 1}\n                        rowHeight={BUTTON_SIZE}\n                        height={height}\n                        width={width}\n                        overscanRowCount={20}\n                        tabIndex={-1}\n                        scrollToAlignment=\"start\"\n                        scrollToRow={this.state.scrollToRow}\n                        aria-readonly={undefined}\n                        aria-label={\"\"}\n                        role={\"\"}\n                        onSectionRendered={this.handleOnSectionRendered}\n                        ref={gridEl => {\n                            this.gridEl = gridEl as Grid;\n                        }}\n                    />\n                )}\n            </AutoSizer>\n        );\n\n        return (\n            <Popover\n                id={this.state.id}\n                descriptionID={this.descriptionID}\n                titleID={this.titleID}\n                title={this.state.title}\n                titleRef={this.props.initialFocusRef}\n                accessibleDescription={description}\n                alertMessage={this.state.alertMessage}\n                additionalHeaderContent={extraHeadingContent}\n                body={grid}\n                footer={footer}\n                additionalClassRoot=\"insertEmoji\"\n                onCloseClick={this.props.closeMenuHandler}\n                isVisible={this.props.isVisible}\n            />\n        );\n    }\n\n    public componentDidMount() {\n        document.addEventListener(\"keydown\", this.handleKeyDown, false);\n    }\n\n    public componentWillUnmount() {\n        document.removeEventListener(\"keydown\", this.handleKeyDown, false);\n    }\n\n    private getRowFromIndex(index): number {\n        return Math.floor(index / COL_SIZE);\n    }\n\n    /**\n     * Handler when new rows are rendered. We use this to figure out what category is current\n     */\n    private handleOnSectionRendered = event => {\n        const newRowIndex = event.rowStartIndex;\n        let selectedGroupIndex = 0;\n\n        Object.values(rowIndexesByGroupId).map((groupRow, groupKey) => {\n            if (newRowIndex >= groupRow) {\n                selectedGroupIndex = groupKey;\n            }\n        });\n\n        this.setState({\n            rowStartIndex: event.rowStartIndex,\n            selectedGroupIndex,\n            alertMessage: t(\"In emoji category: \") + t(EMOJI_GROUPS[selectedGroupIndex].name),\n            title: t(EMOJI_GROUPS[selectedGroupIndex].name),\n        });\n    };\n\n    private handleCategoryClick(event: React.MouseEvent<any>, categoryID: number) {\n        event.preventDefault();\n        event.stopPropagation();\n        this.scrollToCategory(categoryID);\n    }\n\n    /**\n     * Scroll to category\n     */\n    private scrollToCategory = (categoryID: number) => {\n        const newIndex = cellIndexesByGroupId[categoryID];\n        this.setState({\n            activeIndex: newIndex,\n            scrollToRow: this.getRowFromIndex(newIndex),\n            alertMessage: t(\"Jumped to emoji category: \") + t(EMOJI_GROUPS[categoryID].name),\n        });\n    };\n\n    /**\n     * Render list row\n     */\n    private cellRenderer = ({ columnIndex, rowIndex, style }) => {\n        const pos = rowIndex * ROW_SIZE + columnIndex;\n        const emojiData = EMOJIS[pos];\n\n        return emojiData ? (\n            <EmojiButton\n                activeIndex={this.state.activeIndex}\n                style={style}\n                closeMenuHandler={this.props.closeMenuHandler}\n                key={\"emoji-\" + emojiData.emoji}\n                emojiData={emojiData}\n                index={pos}\n                onKeyUp={this.jumpRowUp}\n                onKeyDown={this.jumpRowDown}\n                onKeyLeft={this.jumpIndexLeft}\n                onKeyRight={this.jumpIndexRight}\n            />\n        ) : null;\n    };\n\n    /**\n     * Focus on Emoji Categories\n     */\n    private focusOnCategories = () => {\n        const categories = document.getElementById(this.categoryPickerID);\n        if (categories) {\n            const firstButton = categories.querySelector(\".richEditor-button\");\n            if (firstButton instanceof HTMLElement) {\n                firstButton.focus();\n            }\n        }\n    };\n\n    /**\n     * Jump to adjacent category\n     *\n     * @param offset - How many rows to jump\n     */\n\n    private jumpIndex = (offset: number) => {\n        const targetFocusPosition = this.keepEmojiIndexInBounds(this.state.activeIndex + offset);\n        const targetRowPosition = this.getRowFromIndex(targetFocusPosition);\n\n        let scrollToRow;\n        if (targetRowPosition >= this.state.rowStartIndex + ROW_SIZE) {\n            scrollToRow = this.keepRowIndexInBounds(targetRowPosition - ROW_SIZE + 1);\n        } else if (targetRowPosition < this.state.rowStartIndex) {\n            scrollToRow = targetRowPosition;\n        }\n        this.setState({ activeIndex: targetFocusPosition, scrollToRow }, () => {\n            this.gridEl.forceUpdate();\n        });\n    };\n\n    /**\n     * Make sure target row is within bounds\n     *\n     * @param targetRow\n     */\n    private keepRowIndexInBounds(targetRow: number) {\n        if (targetRow < 0) {\n            return 0;\n        } else if (targetRow > this.lastRowIndex - 1) {\n            return this.lastRowIndex - 1;\n        } else {\n            return targetRow;\n        }\n    }\n\n    /**\n     * Make sure target index is within bounds\n     *\n     * @param targetIndex\n     */\n    private keepEmojiIndexInBounds(targetIndex: number) {\n        if (targetIndex < 0) {\n            return 0;\n        } else if (targetIndex > lastEmojiIndex) {\n            return lastEmojiIndex;\n        } else {\n            return targetIndex;\n        }\n    }\n\n    private jumpRowDown = () => {\n        this.jumpIndex(COL_SIZE);\n    };\n\n    private jumpRowUp = () => {\n        this.jumpIndex(-COL_SIZE);\n    };\n\n    private jumpIndexRight = () => {\n        this.jumpIndex(1);\n    };\n\n    private jumpIndexLeft = () => {\n        this.jumpIndex(-1);\n    };\n\n    /**\n     * Handle key press.\n     *\n     * @param event - A synthetic keyboard event.\n     */\n    private handleKeyDown = (event: KeyboardEvent) => {\n        if (this.props.isVisible) {\n            switch (event.code) {\n                case \"PageUp\":\n                    event.preventDefault();\n                    event.stopPropagation();\n                    this.jumpIndex(-ROW_SIZE * COL_SIZE);\n                    break;\n                case \"PageDown\":\n                    event.preventDefault();\n                    event.stopPropagation();\n                    this.jumpIndex(ROW_SIZE * COL_SIZE);\n                    break;\n                case \"Home\":\n                    event.preventDefault();\n                    event.stopPropagation();\n                    this.jumpIndex(-lastEmojiIndex);\n                    break;\n                case \"End\":\n                    event.preventDefault();\n                    event.stopPropagation();\n                    this.jumpIndex(lastEmojiIndex);\n                    break;\n            }\n        }\n    };\n}\n\nexport default withEditor<IProps>(EmojiPicker);\n","/**\n * @author Stéphane (slafleche) LaFlèche <stephane.l@vanillaforums.com>\n * @copyright 2009-2018 Vanilla Forums Inc.\n * @license https://opensource.org/licenses/GPL-2.0 GPL-2.0\n */\n\nimport React from \"react\";\nimport EmojiPicker from \"./pieces/EmojiPicker\";\nimport PopoverController, { IPopoverControllerChildParameters } from \"./pieces/PopoverController\";\nimport * as Icons from \"@rich-editor/components/icons\";\nimport { getRequiredID, IRequiredComponentID, IOptionalComponentID } from \"@dashboard/componentIDs\";\n\nexport default class EmojiPopover extends React.Component<IOptionalComponentID, IRequiredComponentID> {\n    public constructor(props) {\n        super(props);\n        this.state = {\n            id: getRequiredID(props, \"emojiPopover\"),\n        };\n    }\n\n    /**\n     * @inheritDoc\n     */\n    public render() {\n        const icon = Icons.emoji();\n\n        return (\n            <PopoverController id={this.state.id} classNameRoot=\"emojiPicker\" icon={icon}>\n                {(options: IPopoverControllerChildParameters) => {\n                    return <EmojiPicker {...options} contentID={options.id} />;\n                }}\n            </PopoverController>\n        );\n    }\n}\n","/**\n * @author Adam (charrondev) Charron <adam.c@vanillaforums.com>\n * @copyright 2009-2018 Vanilla Forums Inc.\n * @license https://opensource.org/licenses/GPL-2.0 GPL-2.0\n */\n\nimport React from \"react\";\nimport Quill, { RangeStatic } from \"quill/core\";\nimport { withEditor, IWithEditorProps } from \"@rich-editor/components/context\";\nimport ToolbarPositioner from \"./ToolbarPositioner\";\n\ninterface IProps extends IWithEditorProps {\n    selection: RangeStatic;\n    isVisible: boolean;\n}\n\ninterface IState {\n    flyoutWidth: number | null;\n    flyoutHeight: number | null;\n    nubHeight: number | null;\n}\n\nexport class ToolbarContainer extends React.PureComponent<IProps, IState> {\n    private flyoutRef: React.RefObject<any> = React.createRef();\n    private nubRef: React.RefObject<any> = React.createRef();\n\n    /**\n     * @inheritDoc\n     */\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            flyoutHeight: null,\n            flyoutWidth: null,\n            nubHeight: null,\n        };\n    }\n\n    public render() {\n        const { isVisible, selection } = this.props;\n        return (\n            <ToolbarPositioner\n                {...this.state}\n                selectionIndex={selection.index}\n                selectionLength={selection.length}\n                isActive={isVisible}\n            >\n                {({ x, y }) => {\n                    let toolbarStyles: React.CSSProperties = {\n                        visibility: \"hidden\",\n                        position: \"absolute\",\n                    };\n                    let nubStyles = {};\n                    let classes = \"richEditor-inlineToolbarContainer richEditor-toolbarContainer \";\n\n                    if (x && y && isVisible) {\n                        toolbarStyles = {\n                            position: \"absolute\",\n                            top: y ? y.position : 0,\n                            left: x ? x.position : 0,\n                            zIndex: 5,\n                            visibility: \"visible\",\n                        };\n\n                        nubStyles = {\n                            left: x ? x.nubPosition : 0,\n                            top: y ? y.nubPosition : 0,\n                        };\n\n                        classes += y && y.nubPointsDown ? \"isUp\" : \"isDown\";\n                    }\n                    return (\n                        <div className={classes} style={toolbarStyles} ref={this.flyoutRef}>\n                            {this.props.children}\n                            <div style={nubStyles} className=\"richEditor-nubPosition\" ref={this.nubRef}>\n                                <div className=\"richEditor-nub\" />\n                            </div>\n                        </div>\n                    );\n                }}\n            </ToolbarPositioner>\n        );\n    }\n\n    /**\n     * Mount quill listeners.\n     */\n    public componentDidMount() {\n        this.setState({\n            flyoutWidth: this.flyoutRef.current ? this.flyoutRef.current.offsetWidth : null,\n            flyoutHeight: this.flyoutRef.current ? this.flyoutRef.current.offsetHeight : null,\n            nubHeight: this.nubRef.current ? this.nubRef.current.offsetHeight : null,\n        });\n    }\n}\n\nexport default withEditor<IProps>(ToolbarContainer);\n","/**\n * @author Adam (charrondev) Charron <adam.c@vanillaforums.com>\n * @copyright 2009-2018 Vanilla Forums Inc.\n * @license https://opensource.org/licenses/GPL-2.0 GPL-2.0\n */\n\nimport React from \"react\";\nimport { t } from \"@dashboard/application\";\n\ninterface IProps {\n    inputRef: React.RefObject<HTMLInputElement>;\n    inputValue: string;\n    onInputKeyDown: React.KeyboardEventHandler<any>;\n    onInputChange: React.ChangeEventHandler<any>;\n    onCloseClick: React.MouseEventHandler<any>;\n}\n\nexport class InlineToolbarLinkInput extends React.Component<IProps, {}> {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            linkValue: \"\",\n            cachedRange: {\n                index: 0,\n                length: 0,\n            },\n            showFormatMenu: false,\n            showLinkMenu: false,\n        };\n    }\n\n    public render() {\n        return (\n            <div className=\"richEditor-menu insertLink\" role=\"dialog\" aria-label={t(\"Insert Url\")}>\n                <input\n                    value={this.props.inputValue}\n                    onChange={this.props.onInputChange}\n                    ref={this.props.inputRef}\n                    onKeyDown={this.props.onInputKeyDown}\n                    className=\"InputBox insertLink-input\"\n                    placeholder={t(\"Paste or type a link…\")}\n                />\n                <button type=\"button\" onClick={this.props.onCloseClick} className=\"Close richEditor-close\">\n                    <span className=\"Close-x\" aria-hidden=\"true\">\n                        {t(\"×\")}\n                    </span>\n                    <span className=\"sr-only\">{t(\"Close\")}</span>\n                </button>\n            </div>\n        );\n    }\n}\n\nexport default InlineToolbarLinkInput;\n","/**\n * @author Adam (charrondev) Charron <adam.c@vanillaforums.com>\n * @copyright 2009-2018 Vanilla Forums Inc.\n * @license https://opensource.org/licenses/GPL-2.0 GPL-2.0\n */\n\nimport React from \"react\";\nimport MenuItems from \"@rich-editor/components/toolbars/pieces/MenuItems\";\nimport MenuItem, { IMenuItemData } from \"@rich-editor/components/toolbars/pieces/MenuItem\";\nimport { t } from \"@dashboard/application\";\nimport * as icons from \"../../icons\";\n\nimport Formatter from \"@rich-editor/quill/Formatter\";\nimport { IFormats, RangeStatic } from \"quill/core\";\n\ninterface IProps {\n    formatter: Formatter;\n    activeFormats: IFormats;\n    lastGoodSelection: RangeStatic;\n    onLinkClick: (event: React.MouseEvent<HTMLButtonElement>) => void;\n}\n\nexport default class InlineToolbarMenuItems extends React.PureComponent<IProps> {\n    public render() {\n        return <MenuItems menuItemData={this.menuItemData} menuItemsClass=\"richEditor-inlineToolbarContainer\" />;\n    }\n\n    private get menuItemData(): IMenuItemData[] {\n        const { activeFormats, onLinkClick } = this.props;\n\n        return [\n            {\n                label: t(\"Format as Bold\"),\n                icon: icons.bold(),\n                isActive: activeFormats.bold === true,\n                onClick: this.formatBold,\n            },\n            {\n                label: t(\"Format as Italic\"),\n                icon: icons.italic(),\n                isActive: activeFormats.italic === true,\n                onClick: this.formatItalic,\n            },\n            {\n                label: t(\"Format as Strikethrough\"),\n                icon: icons.strike(),\n                isActive: activeFormats.strike === true,\n                onClick: this.formatStrike,\n            },\n            {\n                label: t(\"Format as Inline Code\"),\n                icon: icons.code(),\n                isActive: activeFormats.codeInline === true,\n                onClick: this.formatCode,\n            },\n            {\n                label: t(\"Format as Link\"),\n                icon: icons.link(),\n                isActive: typeof activeFormats.link === \"string\",\n                onClick: onLinkClick,\n            },\n        ];\n    }\n\n    //\n    // These are implicitly written out for performance reasons.\n    // Lambas or binding in the render method slows down renders significantly.\n    //\n\n    private formatBold = (event: React.MouseEvent<HTMLButtonElement>) => {\n        event.preventDefault();\n        this.props.formatter.bold(this.props.lastGoodSelection);\n    };\n    private formatItalic = (event: React.MouseEvent<HTMLButtonElement>) => {\n        event.preventDefault();\n        this.props.formatter.italic(this.props.lastGoodSelection);\n    };\n    private formatStrike = (event: React.MouseEvent<HTMLButtonElement>) => {\n        event.preventDefault();\n        this.props.formatter.strike(this.props.lastGoodSelection);\n    };\n    private formatCode = (event: React.MouseEvent<HTMLButtonElement>) => {\n        event.preventDefault();\n        this.props.formatter.codeInline(this.props.lastGoodSelection);\n    };\n}\n","/**\n * @author Adam (charrondev) Charron <adam.c@vanillaforums.com>\n * @copyright 2009-2018 Vanilla Forums Inc.\n * @license https://opensource.org/licenses/GPL-2.0 GPL-2.0\n */\n\nimport React from \"react\";\nimport Quill from \"quill/core\";\nimport Emitter from \"quill/core/emitter\";\nimport Keyboard from \"quill/modules/keyboard\";\nimport LinkBlot from \"quill/formats/link\";\nimport { t, isAllowedUrl } from \"@dashboard/application\";\nimport ToolbarContainer from \"./pieces/ToolbarContainer\";\nimport { withEditor, IWithEditorProps } from \"@rich-editor/components/context\";\nimport InlineToolbarLinkInput from \"./pieces/InlineToolbarLinkInput\";\nimport { watchFocusInDomTree } from \"@dashboard/dom\";\nimport { rangeContainsBlot } from \"@rich-editor/quill/utility\";\nimport CodeBlot from \"@rich-editor/quill/blots/inline/CodeBlot\";\nimport CodeBlockBlot from \"@rich-editor/quill/blots/blocks/CodeBlockBlot\";\nimport Formatter from \"@rich-editor/quill/Formatter\";\nimport InlineToolbarMenuItems from \"@rich-editor/components/toolbars/pieces/InlineToolbarMenuItems\";\n\ninterface IProps extends IWithEditorProps {}\n\ninterface IState {\n    inputValue: string;\n    isLinkMenuOpen: boolean;\n    menuHasFocus: boolean;\n}\n\n/**\n * This __cannot__ be a pure component because it needs to re-render when quill emits, even if the selection is the same.\n */\nexport class InlineToolbar extends React.Component<IProps, IState> {\n    private quill: Quill;\n    private formatter: Formatter;\n    private linkInput: React.RefObject<HTMLInputElement> = React.createRef();\n    private selfRef: React.RefObject<HTMLDivElement> = React.createRef();\n\n    /**\n     * Temporaly remove the focus requirement on the toolbar so we can focus it.\n     * @see https://github.com/vanilla/rich-editor/pull/107\n     */\n    private ignoreLinkToolbarFocusRequirement: boolean = false;\n\n    /**\n     * @inheritDoc\n     */\n    constructor(props) {\n        super(props);\n\n        // Quill can directly on the class as it won't ever change in a single instance.\n        this.quill = props.quill;\n        this.formatter = new Formatter(this.quill);\n\n        this.state = {\n            inputValue: \"\",\n            isLinkMenuOpen: false,\n            menuHasFocus: false,\n        };\n    }\n\n    /**\n     * Reset the link menu state when the selection changes.\n     */\n    public componentDidUpdate(prevProps: IProps) {\n        const selection = this.props.instanceState.lastGoodSelection;\n        const prevSelection = prevProps.instanceState.lastGoodSelection;\n        if (prevSelection.index !== selection.index || prevSelection.length !== selection.length) {\n            this.setState({ isLinkMenuOpen: false });\n        }\n    }\n\n    public render() {\n        const { activeFormats, instanceState } = this.props;\n        const alertMessage = this.isFormatMenuVisible ? (\n            <span aria-live=\"assertive\" role=\"alert\" className=\"sr-only\">\n                {t(\"Inline Menu Available\")}\n            </span>\n        ) : null;\n\n        return (\n            <div ref={this.selfRef}>\n                <ToolbarContainer selection={instanceState.lastGoodSelection} isVisible={this.isFormatMenuVisible}>\n                    {alertMessage}\n                    <InlineToolbarMenuItems\n                        formatter={this.formatter}\n                        onLinkClick={this.toggleLinkMenu}\n                        activeFormats={activeFormats}\n                        lastGoodSelection={instanceState.lastGoodSelection}\n                    />\n                </ToolbarContainer>\n                <ToolbarContainer selection={instanceState.lastGoodSelection} isVisible={this.isLinkMenuVisible}>\n                    <InlineToolbarLinkInput\n                        inputRef={this.linkInput}\n                        inputValue={this.state.inputValue}\n                        onInputChange={this.onInputChange}\n                        onInputKeyDown={this.onInputKeyDown}\n                        onCloseClick={this.onCloseClick}\n                    />\n                </ToolbarContainer>\n            </div>\n        );\n    }\n\n    /**\n     * Determine visibility of the link menu.\n     */\n    private get isLinkMenuVisible(): boolean {\n        const inCodeBlock = rangeContainsBlot(this.quill, CodeBlockBlot, this.props.instanceState.lastGoodSelection);\n        return (\n            this.state.isLinkMenuOpen &&\n            (this.hasFocus || this.ignoreLinkToolbarFocusRequirement) &&\n            this.isOneLineOrLess &&\n            !inCodeBlock &&\n            this.selectionHasContent\n        );\n    }\n\n    /**\n     * Determine visibility of the formatting menu.\n     */\n    private get isFormatMenuVisible(): boolean {\n        const selectionHasLength = this.props.instanceState.lastGoodSelection.length > 0;\n        const inCodeBlock = rangeContainsBlot(this.quill, CodeBlockBlot, this.props.instanceState.lastGoodSelection);\n        return (\n            !this.isLinkMenuVisible &&\n            this.hasFocus &&\n            selectionHasLength &&\n            this.isOneLineOrLess &&\n            !inCodeBlock &&\n            this.selectionHasContent\n        );\n    }\n\n    private get selectionHasContent(): boolean {\n        const { lastGoodSelection } = this.props.instanceState;\n        const text = this.quill.getText(lastGoodSelection.index, lastGoodSelection.length);\n        return !!text && text !== \"\\n\";\n    }\n\n    /**\n     * Determine if our selection spreads over multiple lines or not.\n     */\n    private get isOneLineOrLess(): boolean {\n        const { lastGoodSelection } = this.props.instanceState;\n        const numLines = this.quill.getLines(lastGoodSelection.index || 0, lastGoodSelection.length || 0).length;\n        return numLines <= 1;\n    }\n\n    /**\n     * Determine if the inline menu or the quill content editable has focus.\n     */\n    private get hasFocus() {\n        return this.state.menuHasFocus || this.quill.hasFocus();\n    }\n\n    /**\n     * Mount quill listeners.\n     */\n    public componentDidMount() {\n        document.addEventListener(\"keydown\", this.escFunction, false);\n        watchFocusInDomTree(this.selfRef.current!, this.handleFocusChange);\n\n        // Add a key binding for the link popup.\n        const keyboard: Keyboard = this.quill.getModule(\"keyboard\");\n        keyboard.addBinding(\n            {\n                key: \"k\",\n                metaKey: true,\n            },\n            {},\n            this.commandKHandler,\n        );\n    }\n\n    /**\n     * Be sure to remove the listeners when the component unmounts.\n     */\n    public componentWillUnmount() {\n        document.removeEventListener(\"keydown\", this.escFunction, false);\n    }\n\n    /**\n     * Track the menu's focus state.\n     */\n    private handleFocusChange = hasFocus => {\n        this.setState({ menuHasFocus: hasFocus });\n    };\n\n    /**\n     * Handle create-link keyboard shortcut.\n     */\n    private commandKHandler = () => {\n        const { lastGoodSelection } = this.props.instanceState;\n        const inCodeBlock = rangeContainsBlot(this.quill, CodeBlockBlot, lastGoodSelection);\n\n        if (!this.isOneLineOrLess || this.isLinkMenuVisible || inCodeBlock) {\n            return;\n        }\n\n        const inLinkBlot = rangeContainsBlot(this.quill, LinkBlot, lastGoodSelection);\n\n        if (inLinkBlot) {\n            this.formatter.link(lastGoodSelection);\n            this.reset();\n        } else {\n            const currentText = this.quill.getText(lastGoodSelection.index, lastGoodSelection.length);\n            if (isAllowedUrl(currentText)) {\n                this.setState({\n                    inputValue: currentText,\n                });\n            }\n            this.toggleLinkMenu();\n        }\n    };\n\n    /**\n     * Open up the link menu.\n     *\n     * Opens the menu if there is no current link formatting.\n     */\n    private toggleLinkMenu = (event?: React.MouseEvent<any>) => {\n        event && event.preventDefault();\n        if (typeof this.props.activeFormats.link === \"string\") {\n            this.setState({ isLinkMenuOpen: false });\n            this.formatter.link(this.props.instanceState.lastGoodSelection);\n        } else {\n            this.ignoreLinkToolbarFocusRequirement = true;\n            this.setState({ isLinkMenuOpen: true }, () => {\n                this.linkInput.current!.focus();\n                this.ignoreLinkToolbarFocusRequirement = false;\n            });\n        }\n    };\n\n    /**\n     * Close the menu.\n     */\n    private escFunction = (event: KeyboardEvent) => {\n        if (event.keyCode === 27) {\n            if (this.isLinkMenuVisible) {\n                event.preventDefault();\n                this.clearLinkInput();\n            } else if (this.isFormatMenuVisible) {\n                event.preventDefault();\n                this.cancel();\n            }\n        }\n    };\n\n    private clearLinkInput() {\n        this.quill.setSelection(this.props.instanceState.lastGoodSelection);\n        this.setState({ isLinkMenuOpen: false, inputValue: \"\" });\n    }\n\n    /**\n     * Handle clicks on the link menu's close button.\n     */\n    private onCloseClick = (event: React.MouseEvent<any>) => {\n        event.preventDefault();\n        this.clearLinkInput();\n    };\n\n    /**\n     * Clear the link menu's input content and hide the link menu.\n     */\n    private reset = () => {\n        this.props.instanceState.lastGoodSelection &&\n            this.quill.setSelection(this.props.instanceState.lastGoodSelection, Emitter.sources.USER);\n\n        this.setState({\n            inputValue: \"\",\n        });\n    };\n\n    private cancel = () => {\n        const { lastGoodSelection } = this.props.instanceState;\n        const newSelection = {\n            index: lastGoodSelection.index + lastGoodSelection.length,\n            length: 0,\n        };\n        this.setState({\n            inputValue: \"\",\n        });\n        this.quill.setSelection(newSelection);\n    };\n\n    /**\n     * Handle key-presses for the link toolbar.\n     */\n    private onInputKeyDown = (event: React.KeyboardEvent<any>) => {\n        if (Keyboard.match(event.nativeEvent, \"enter\")) {\n            event.preventDefault();\n            this.formatter.link(this.props.instanceState.lastGoodSelection, this.state.inputValue);\n            this.clearLinkInput();\n        }\n    };\n\n    /**\n     * Handle changes to the the close menu's input.\n     */\n    private onInputChange = (event: React.ChangeEvent<any>) => {\n        this.setState({ inputValue: event.target.value });\n    };\n}\n\nexport default withEditor<IProps>(InlineToolbar);\n","/**\n * @author Adam (charrondev) Charron <adam.c@vanillaforums.com>\n * @copyright 2009-2018 Vanilla Forums Inc.\n * @license https://opensource.org/licenses/GPL-2.0 GPL-2.0\n */\n\nimport React from \"react\";\nimport classNames from \"classnames\";\nimport { t } from \"@dashboard/application\";\nimport { splitStringLoosely } from \"@dashboard/utility\";\nimport { IUserFragment } from \"@dashboard/@types/api\";\n\nexport interface IMentionSuggestionData extends IUserFragment {\n    domID: string;\n}\n\ninterface IGenericMentionProps {\n    matchedString: string;\n    isActive: boolean;\n    onMouseEnter?: React.MouseEventHandler<any>;\n    onClick?: React.MouseEventHandler<any>;\n}\n\nexport interface IMentionProps extends IGenericMentionProps {\n    mentionData: IMentionSuggestionData;\n}\n\nexport interface IMentionLoadingProps extends IGenericMentionProps {\n    loadingData: {\n        domID: string;\n    };\n}\n\n/**\n * A single Suggestion in a MentionList\n */\nexport default function MentionSuggestion(props: IMentionProps) {\n    const { isActive, matchedString, mentionData, onClick, onMouseEnter } = props;\n    const { photoUrl, name, domID } = mentionData;\n\n    const classes = classNames(\"richEditor-menuItem\", \"atMentionList-item\", {\n        isActive,\n    });\n\n    let matched = false;\n    const formattedName = splitStringLoosely(name, matchedString).map((piece, index) => {\n        const searchCollator = Intl.Collator(\"en\", {\n            usage: \"search\",\n            sensitivity: \"base\",\n            ignorePunctuation: true,\n            numeric: true,\n        });\n        if (searchCollator.compare(piece, matchedString) === 0 && !matched) {\n            matched = true;\n            return (\n                <mark className=\"atMentionList-mark\" key={index}>\n                    {piece}\n                </mark>\n            );\n        } else {\n            return piece;\n        }\n    });\n\n    return (\n        <li\n            id={domID}\n            className={classes}\n            role=\"option\"\n            aria-selected={isActive}\n            onClick={onClick}\n            onMouseEnter={onMouseEnter}\n        >\n            <button type=\"button\" className=\"atMentionList-suggestion\">\n                <span className=\"atMentionList-user\">\n                    <span className=\"PhotoWrap atMentionList-photoWrap\">\n                        <img src={photoUrl} alt={name} className=\"atMentionList-photo ProfilePhoto\" />\n                    </span>\n                    <span className=\"atMentionList-userName\">{formattedName}</span>\n                </span>\n            </button>\n        </li>\n    );\n}\n\n/**\n * A loading indicator suggestion.\n */\nexport function MentionSuggestionLoading(props: IMentionLoadingProps) {\n    const { loadingData, onMouseEnter, isActive } = props;\n    const { domID } = loadingData;\n    const classes = classNames(\"richEditor-menuItem\", \"atMentionList-item\", \"atMentionList-loader\", {\n        isActive,\n    });\n\n    return (\n        <li id={domID} className={classes} role=\"option\" aria-selected={isActive} onMouseEnter={onMouseEnter}>\n            <button type=\"button\" className=\"atMentionList-suggestion\" disabled>\n                <span className=\"atMentionList-user atMentionList-loader\">\n                    <span className=\"PhotoWrap atMentionList-photoWrap\">\n                        <img alt={name} className=\"atMentionList-photo ProfilePhoto\" />\n                    </span>\n                    <span className=\"atMentionList-userName\">{t(\"Loading...\")}</span>\n                </span>\n            </button>\n        </li>\n    );\n}\n\n/**\n * We need a dummy \"spacer\" suggestion so that we can get our initial measurements.\n */\nexport function MentionSuggestionSpacer() {\n    const classes = classNames(\"richEditor-menuItem\", \"atMentionList-item\", \"atMentionList-spacer\");\n\n    return (\n        <li aria-hidden=\"true\" className={classes} style={{ visibility: \"hidden\" }}>\n            <button type=\"button\" className=\"atMentionList-suggestion\">\n                <span className=\"atMentionList-user atMentionList-loader\">\n                    <span className=\"PhotoWrap atMentionList-photoWrap\">\n                        <img alt={name} className=\"atMentionList-photo ProfilePhoto\" />\n                    </span>\n                    <span className=\"atMentionList-userName\" />\n                </span>\n            </button>\n        </li>\n    );\n}\n","/**\n * @author Adam (charrondev) Charron <adam.c@vanillaforums.com>\n * @copyright 2009-2018 Vanilla Forums Inc.\n * @license https://opensource.org/licenses/GPL-2.0 GPL-2.0\n */\n\nimport React from \"react\";\nimport classNames from \"classnames\";\nimport { withEditor, IWithEditorProps } from \"@rich-editor/components/context\";\nimport MentionSuggestion, {\n    IMentionProps,\n    MentionSuggestionLoading,\n    MentionSuggestionSpacer,\n} from \"./MentionSuggestion\";\nimport { t } from \"@dashboard/application\";\nimport ToolbarPositioner from \"./ToolbarPositioner\";\nimport { RangeStatic } from \"quill/core\";\n\ninterface IProps extends IWithEditorProps {\n    mentionProps: Array<Partial<IMentionProps>>;\n    matchedString: string;\n    id: string;\n    loaderID: string;\n    activeItemId: string | null;\n    onItemClick: React.MouseEventHandler<any>;\n    showLoader: boolean;\n    mentionSelection: RangeStatic | null;\n}\n\ninterface IState {\n    flyoutWidth?: number | null;\n    flyoutHeight?: number | null;\n}\n\nclass MentionSuggestionList extends React.PureComponent<IProps, IState> {\n    public state = {\n        flyoutWidth: null,\n        flyoutHeight: null,\n    };\n    private flyoutRef: React.RefObject<HTMLSpanElement> = React.createRef();\n\n    constructor(props) {\n        super(props);\n    }\n\n    public render() {\n        const { activeItemId, id, onItemClick, matchedString, mentionProps, showLoader } = this.props;\n        const { mentionSelection } = this.props;\n\n        const hasResults = mentionProps.length > 0 || showLoader;\n        const classes = classNames(\"atMentionList-items\", \"MenuItems\");\n        const isVisible = hasResults && (!!mentionSelection || this.hasFocusedElement);\n\n        return (\n            <ToolbarPositioner\n                horizontalAlignment=\"start\"\n                verticalAlignment=\"below\"\n                flyoutWidth={this.state.flyoutWidth}\n                flyoutHeight={this.state.flyoutHeight}\n                isActive={isVisible}\n                selectionIndex={mentionSelection ? mentionSelection.index : 0}\n                selectionLength={mentionSelection ? mentionSelection.length : 0}\n            >\n                {({ x, y }) => {\n                    let style: React.CSSProperties = {\n                        visibility: \"hidden\",\n                        position: \"absolute\",\n                        zIndex: -1,\n                    };\n\n                    if (x && y) {\n                        style = {\n                            position: \"absolute\",\n                            top: y.position,\n                            left: x.position,\n                            zIndex: 1,\n                            visibility: \"visible\",\n                        };\n                    }\n\n                    const items = mentionProps.map(mentionProp => {\n                        if (mentionProp.mentionData == null) {\n                            return null;\n                        }\n                        const isActive = mentionProp.mentionData.domID === activeItemId;\n                        return (\n                            <MentionSuggestion\n                                mentionData={mentionProp.mentionData}\n                                key={mentionProp.mentionData.name}\n                                onMouseEnter={mentionProp.onMouseEnter}\n                                onClick={onItemClick}\n                                isActive={isActive}\n                                matchedString={matchedString}\n                            />\n                        );\n                    });\n\n                    if (showLoader) {\n                        const loadingData = {\n                            domID: this.props.loaderID,\n                        };\n                        const isActive = loadingData.domID === activeItemId;\n\n                        items.push(\n                            <MentionSuggestionLoading\n                                loadingData={loadingData}\n                                isActive={isActive}\n                                key=\"Loading\"\n                                matchedString={matchedString}\n                            />,\n                        );\n                    }\n\n                    return (\n                        <span style={style} className=\"atMentionList\" ref={this.flyoutRef}>\n                            <ul\n                                id={id}\n                                aria-label={t(\"@mention user suggestions\")}\n                                className={classes + (hasResults ? \"\" : \" isHidden\")}\n                                role=\"listbox\"\n                            >\n                                {hasResults && items}\n                            </ul>\n                            <div className={classes} style={{ visibility: \"hidden\" }}>\n                                <MentionSuggestionSpacer />\n                            </div>\n                        </span>\n                    );\n                }}\n            </ToolbarPositioner>\n        );\n    }\n\n    public componentDidMount() {\n        this.setState({\n            flyoutWidth: this.flyoutRef.current ? this.flyoutRef.current.offsetWidth : null,\n            flyoutHeight: this.flyoutRef.current ? this.flyoutRef.current.offsetHeight : null,\n        });\n    }\n\n    private get hasFocusedElement(): boolean {\n        if (!this.flyoutRef.current) {\n            return false;\n        }\n        return (\n            document.activeElement === this.flyoutRef.current || this.flyoutRef.current.contains(document.activeElement)\n        );\n    }\n}\n\nexport default withEditor<IProps>(MentionSuggestionList);\n","/**\n * @author Adam (charrondev) Charron <adam.c@vanillaforums.com>\n * @copyright 2009-2018 Vanilla Forums Inc.\n * @license https://opensource.org/licenses/GPL-2.0 GPL-2.0\n */\n\nimport React from \"react\";\nimport Quill, { Sources, DeltaStatic } from \"quill/core\";\nimport uniqueId from \"lodash/uniqueId\";\nimport debounce from \"lodash/debounce\";\nimport isEqual from \"lodash/isEqual\";\nimport Keyboard from \"quill/modules/keyboard\";\nimport { withEditor, IWithEditorProps } from \"@rich-editor/components/context\";\nimport MentionSuggestionList from \"./pieces/MentionSuggestionList\";\nimport { thunks as mentionThunks, actions as mentionActions } from \"@rich-editor/state/mention/mentionActions\";\nimport MentionAutoCompleteBlot from \"@rich-editor/quill/blots/embeds/MentionAutoCompleteBlot\";\nimport { getBlotAtIndex } from \"@rich-editor/quill/utility\";\nimport { IMentionValue } from \"@rich-editor/state/mention/MentionTrie\";\nimport { connect } from \"react-redux\";\nimport { IMentionSuggestionData, IMentionProps } from \"@rich-editor/components/toolbars/pieces/MentionSuggestion\";\nimport { IStoreState } from \"@rich-editor/@types/store\";\nimport { LoadStatus } from \"@dashboard/@types/api\";\n\ninterface IProps extends IWithEditorProps {\n    lookupMentions: (username: string, editorID: string) => void;\n    setActiveItem: (itemID: string, itemIndex: number) => void;\n    suggestions: IMentionValue;\n    lastSuccessfulUsername: string;\n    activeSuggestionID: string;\n    activeSuggestionIndex: number;\n    showLoader: boolean;\n    inActiveMention: boolean;\n}\n\ninterface IMentionState {\n    autoCompleteBlot: MentionAutoCompleteBlot | null;\n}\n\n/**\n * Module for inserting, removing, and editing at-mentions.\n */\nexport class MentionToolbar extends React.Component<IProps, IMentionState> {\n    private static SUGGESTION_LIMIT = 5;\n    private quill: Quill;\n    private ID = uniqueId(\"mentionList-\");\n    private loaderID = uniqueId(\"mentionList-noResults-\");\n    private comboBoxID = uniqueId(\"mentionComboBox-\");\n    private isConvertingMention = false;\n    private readonly MENTION_COMPLETION_CHARACTERS = [\".\", \"!\", \"?\", \" \", \"\\n\"];\n\n    constructor(props: IProps) {\n        super(props);\n        this.quill = props.quill!;\n        this.state = {\n            autoCompleteBlot: null,\n        };\n    }\n\n    public componentDidMount() {\n        document.addEventListener(\"keydown\", this.keyDownListener, true);\n        document.addEventListener(\"click\", this.onDocumentClick, false);\n        this.quill.on(\"text-change\", this.onTextChange);\n    }\n\n    public componentWillUnmount() {\n        document.removeEventListener(\"keydown\", this.keyDownListener, true);\n        document.removeEventListener(\"click\", this.onDocumentClick, false);\n        this.quill.off(\"text-change\", this.onTextChange);\n    }\n\n    /**\n     * When this component updates we need to see if the selection state has changed and trigger a lookup.\n     */\n    public componentDidUpdate(prevProps: IProps) {\n        const { mentionSelection } = this.props.instanceState;\n        const prevMentionSelection = prevProps.instanceState.mentionSelection;\n\n        if (!isEqual(mentionSelection, prevMentionSelection) && mentionSelection) {\n            const text = this.quill.getText(mentionSelection.index, mentionSelection.length).replace(\"@\", \"\");\n            this.props.lookupMentions(text, this.props.editorID);\n        }\n\n        // If we have loading or valid suggestions and a valid mention selection\n        // Create an autocompleteblot if it doesn't exist, and inject accessibility attributes into it.\n        const suggestions = this.props.suggestions;\n        if (suggestions) {\n            const isLoading = suggestions && suggestions.status === LoadStatus.LOADING;\n            const isSuccess = suggestions && suggestions.status === LoadStatus.SUCCESS && suggestions.data.length > 0;\n\n            if (mentionSelection && (isLoading || isSuccess)) {\n                if (!this.state.autoCompleteBlot) {\n                    const autoCompleteBlot = this.createAutoCompleteBlot();\n                    this.setState({ autoCompleteBlot });\n                }\n                this.injectComboBoxAccessibility();\n                return;\n            }\n        }\n\n        if (this.state.autoCompleteBlot) {\n            const selection = this.quill!.getSelection();\n            this.cancelActiveMention();\n\n            // We need to restore back the selection we had if the editor is still focused because\n            // the cancelation might have messed up our position.\n            if (this.quill.hasFocus()) {\n                this.quill!.setSelection(selection);\n            }\n        }\n    }\n\n    public render() {\n        const { suggestions, lastSuccessfulUsername, showLoader, activeSuggestionID } = this.props;\n        const data = suggestions && suggestions.status === LoadStatus.SUCCESS ? suggestions.data : [];\n\n        return (\n            <MentionSuggestionList\n                onItemClick={this.onItemClick}\n                mentionProps={this.createMentionProps(data)}\n                matchedString={lastSuccessfulUsername}\n                activeItemId={activeSuggestionID}\n                id={this.ID}\n                loaderID={this.loaderID}\n                showLoader={showLoader}\n                mentionSelection={this.props.instanceState.mentionSelection}\n            />\n        );\n    }\n\n    /**\n     * Get an autocomplete blot. Creates a new one if we haven't made one yet.\n     */\n    private createAutoCompleteBlot(): MentionAutoCompleteBlot | null {\n        const { currentSelection, mentionSelection } = this.props.instanceState;\n        if (!currentSelection || !mentionSelection) {\n            return null;\n        }\n\n        this.quill.formatText(\n            mentionSelection.index,\n            mentionSelection.length,\n            \"mention-autocomplete\",\n            true,\n            Quill.sources.API,\n        );\n        this.quill.setSelection(currentSelection.index, 0, Quill.sources.API);\n\n        // Get the autoCompleteBlot\n        const autoCompleteBlot = getBlotAtIndex(this.quill, currentSelection.index - 1, MentionAutoCompleteBlot)!;\n\n        return autoCompleteBlot;\n    }\n\n    /**\n     * Determine if we have a valid API response.\n     */\n    private get hasApiResponse() {\n        const { suggestions } = this.props;\n        return suggestions && suggestions.status === LoadStatus.SUCCESS;\n    }\n\n    /**\n     * Handle click events on a mention suggestions.\n     */\n    private onItemClick = (event: React.MouseEvent<any>) => {\n        event.preventDefault();\n        this.confirmActiveMention();\n    };\n\n    /**\n     * Keydown listener for ARIA compliance with\n     */\n    private keyDownListener = (event: KeyboardEvent) => {\n        const { suggestions, activeSuggestionIndex, activeSuggestionID, showLoader } = this.props;\n        const { mentionSelection } = this.props.instanceState;\n        const inActiveMention = mentionSelection !== null;\n\n        if (!suggestions || suggestions.status !== LoadStatus.SUCCESS) {\n            return;\n        }\n\n        if (this.quill.hasFocus() && inActiveMention && !this.hasApiResponse) {\n            if (Keyboard.match(event, Keyboard.keys.ENTER)) {\n                this.cancelActiveMention();\n            }\n            return;\n        }\n\n        if (this.quill.hasFocus() && inActiveMention) {\n            const firstIndex = 0;\n            const nextIndex = activeSuggestionIndex + 1;\n            const prevIndex = activeSuggestionIndex - 1;\n            const userLength = Math.min(MentionToolbar.SUGGESTION_LIMIT, suggestions.data.length);\n            const lastIndex = showLoader ? userLength : userLength - 1;\n            const currentItemIsLoader = activeSuggestionID === this.loaderID;\n\n            const getIDFromIndex = (newIndex: number) => {\n                return showLoader && newIndex === lastIndex ? this.loaderID : suggestions.data[newIndex].domID;\n            };\n\n            switch (true) {\n                case Keyboard.match(event, Keyboard.keys.DOWN): {\n                    const newIndex = activeSuggestionIndex === lastIndex ? firstIndex : nextIndex;\n                    const newItemID = getIDFromIndex(newIndex);\n                    this.props.setActiveItem(newItemID, newIndex);\n                    event.preventDefault();\n                    event.stopPropagation();\n                    break;\n                }\n                case Keyboard.match(event, Keyboard.keys.UP): {\n                    const newIndex = activeSuggestionIndex === firstIndex ? lastIndex : prevIndex;\n                    const newItemID = getIDFromIndex(newIndex);\n                    this.props.setActiveItem(newItemID, newIndex);\n                    event.preventDefault();\n                    event.stopPropagation();\n                    break;\n                }\n                case Keyboard.match(event, Keyboard.keys.ENTER): {\n                    if (suggestions.data.length > 0 && !currentItemIsLoader) {\n                        this.confirmActiveMention();\n                        event.preventDefault();\n                        event.stopPropagation();\n                    } else {\n                        this.cancelActiveMention();\n                    }\n                    break;\n                }\n                case Keyboard.match(event, Keyboard.keys.TAB): {\n                    if (!currentItemIsLoader) {\n                        this.confirmActiveMention();\n                        event.preventDefault();\n                        event.stopPropagation();\n                    }\n                    break;\n                }\n                case Keyboard.match(event, Keyboard.keys.ESCAPE): {\n                    this.cancelActiveMention();\n                    event.preventDefault();\n                    event.stopPropagation();\n                    break;\n                }\n            }\n        }\n    };\n\n    /**\n     * Inject accessibility attributes into the current MentionAutoComplete and ComboBox.\n     */\n    private injectComboBoxAccessibility = () => {\n        const { autoCompleteBlot } = this.state;\n        const { activeSuggestionID, activeSuggestionIndex } = this.props;\n        if (autoCompleteBlot) {\n            autoCompleteBlot.injectAccessibilityAttributes({\n                ID: this.comboBoxID,\n                activeItemID: activeSuggestionID,\n                suggestionListID: this.ID,\n                activeItemIsLoader: activeSuggestionID === this.loaderID,\n            });\n        }\n    };\n\n    private createMentionProps(suggestions: IMentionSuggestionData[]): Array<Partial<IMentionProps>> {\n        return suggestions.slice(0, MentionToolbar.SUGGESTION_LIMIT).map((data, index) => {\n            const onMouseEnter = () => {\n                this.props.setActiveItem(data.domID, index);\n            };\n\n            return {\n                mentionData: data,\n                onMouseEnter,\n            };\n        });\n    }\n\n    /**\n     * Reset the component's mention state. Also clears the current combobox.\n     *\n     * @param clearComboBox - Whether or not to clear the current combobox. An situation where you would not want to do this is if it is already deleted or it has already been detached from quill.\n     */\n    private cancelActiveMention() {\n        if (this.state.autoCompleteBlot && !this.isConvertingMention) {\n            this.isConvertingMention = true;\n            this.state.autoCompleteBlot.cancel();\n        }\n        this.isConvertingMention = false;\n        this.setState({\n            autoCompleteBlot: null,\n        });\n    }\n\n    /**\n     * Convert the active MentionAutoCompleteBlot into a MentionBlot.\n     */\n    private confirmActiveMention(insertCharacter: string = \" \") {\n        const { autoCompleteBlot } = this.state;\n        const { suggestions, activeSuggestionIndex } = this.props;\n        if (\n            !(autoCompleteBlot instanceof MentionAutoCompleteBlot) ||\n            this.isConvertingMention ||\n            !suggestions ||\n            suggestions.status !== LoadStatus.SUCCESS\n        ) {\n            return;\n        }\n\n        this.isConvertingMention = true;\n        const activeSuggestion = suggestions.data[activeSuggestionIndex];\n        const start = autoCompleteBlot.offset(this.quill.scroll);\n\n        autoCompleteBlot.finalize(activeSuggestion);\n        this.quill.insertText(start + 1, insertCharacter, Quill.sources.SILENT);\n        this.quill.setSelection(start + 2, 0, Quill.sources.SILENT);\n        this.cancelActiveMention();\n    }\n\n    private onDocumentClick = (event: MouseEvent) => {\n        if (!this.quill.root.contains(event.target as Node)) {\n            this.cancelActiveMention();\n        }\n    };\n\n    /**\n     * A quill text change event listener.\n     *\n     * - Clears mention state if we no longer match a mention.\n     * - Converts a range into mention combobox if it matches.\n     * - Triggers name lookup on match.\n     */\n    private onTextChange = (delta: DeltaStatic, oldContents: DeltaStatic, source: Sources) => {\n        // Ignore non-user changes.\n        if (source !== Quill.sources.USER) {\n            return;\n        }\n\n        const lastOperation = delta.ops && delta.ops.length > 0 ? delta.ops[delta.ops.length - 1] : null;\n        if (\n            lastOperation &&\n            lastOperation.insert &&\n            this.MENTION_COMPLETION_CHARACTERS.includes(lastOperation.insert)\n        ) {\n            const { suggestions } = this.props;\n            const users = suggestions && suggestions.status === LoadStatus.SUCCESS ? suggestions.data : [];\n\n            const isASingleExactMatch = users.length === 1 && this.props.lastSuccessfulUsername === users[0].name;\n            // Autocomplete the mention if certain conditions occur.\n\n            if (isASingleExactMatch) {\n                window.requestAnimationFrame(() => {\n                    this.confirmActiveMention(lastOperation.insert);\n                });\n                return;\n            }\n        }\n    };\n}\n\nfunction mapDispatchToProps(dispatch) {\n    const mentionLookupFn = (username: string) => dispatch(mentionThunks.loadUsers(username));\n\n    return {\n        lookupMentions: debounce(mentionLookupFn, 50) as any,\n        setActiveItem: (itemID: string, itemIndex: number) =>\n            dispatch(mentionActions.setActiveSuggestion(itemID, itemIndex)),\n    };\n}\n\nfunction mapStateToProps(state: IStoreState) {\n    const {\n        lastSuccessfulUsername,\n        currentUsername,\n        usersTrie,\n        activeSuggestionID,\n        activeSuggestionIndex,\n    } = state.editor.mentions;\n\n    const currentNode = currentUsername && usersTrie.getValue(currentUsername);\n    const showLoader = currentNode && currentNode.status === LoadStatus.LOADING;\n\n    return {\n        suggestions: lastSuccessfulUsername ? usersTrie.getValue(lastSuccessfulUsername) : null,\n        lastSuccessfulUsername,\n        activeSuggestionID,\n        activeSuggestionIndex,\n        showLoader,\n    };\n}\n\nconst withRedux = connect(\n    mapStateToProps,\n    mapDispatchToProps,\n);\n\nexport default withRedux(withEditor(MentionToolbar as any));\n","/**\n * @author Adam (charrondev) Charron <adam.c@vanillaforums.com>\n * @copyright 2009-2018 Vanilla Forums Inc.\n * @license https://opensource.org/licenses/GPL-2.0 GPL-2.0\n */\n\nimport React from \"react\";\nimport MenuItems from \"@rich-editor/components/toolbars/pieces/MenuItems\";\nimport { t } from \"@dashboard/application\";\nimport * as icons from \"../../icons\";\nimport Formatter from \"@rich-editor/quill/Formatter\";\nimport { IFormats, RangeStatic } from \"quill/core\";\n\ninterface IProps {\n    formatter: Formatter;\n    activeFormats: IFormats;\n    lastGoodSelection: RangeStatic;\n    afterClickHandler: () => void;\n    menuRef?: React.RefObject<MenuItems>;\n}\n\nexport default class ParagraphToolbarMenuItems extends React.PureComponent<IProps> {\n    public render() {\n        return <MenuItems itemRole={\"menuitemradio\"} ref={this.props.menuRef} menuItemData={this.menuItemData} />;\n    }\n\n    private get menuItemData() {\n        const { activeFormats } = this.props;\n        let isParagraphEnabled = true;\n        [\"header\", \"blockquote-line\", \"codeBlock\", \"spoiler-line\"].forEach(item => {\n            if (item in activeFormats) {\n                isParagraphEnabled = false;\n            }\n        });\n        return [\n            {\n                icon: icons.pilcrow(),\n                label: t(\"Format as Paragraph\"),\n                onClick: this.formatParagraph,\n                isActive: isParagraphEnabled,\n                isDisabled: isParagraphEnabled,\n            },\n            {\n                icon: icons.heading2(),\n                label: t(\"Format as Title\"),\n                onClick: this.formatH2,\n                isActive: activeFormats.header === 2,\n                isDisabled: activeFormats.header === 2,\n            },\n            {\n                icon: icons.heading3(),\n                label: t(\"Format as Subtitle\"),\n                onClick: this.formatH3,\n                isActive: activeFormats.header === 3,\n                isDisabled: activeFormats.header === 3,\n            },\n            {\n                icon: icons.blockquote(),\n                label: t(\"Format as blockquote\"),\n                onClick: this.formatBlockquote,\n                isActive: activeFormats[\"blockquote-line\"] === true,\n                isDisabled: activeFormats[\"blockquote-line\"] === true,\n            },\n            {\n                icon: icons.codeBlock(),\n                label: t(\"Format as code block\"),\n                onClick: this.formatCodeBlock,\n                isActive: activeFormats.codeBlock === true,\n                isDisabled: activeFormats.codeBlock === true,\n            },\n            {\n                icon: icons.spoiler(\"richEditorButton-icon\"),\n                label: t(\"Format as spoiler\"),\n                onClick: this.formatSpoiler,\n                isActive: activeFormats[\"spoiler-line\"] === true,\n                isDisabled: activeFormats[\"spoiler-line\"] === true,\n            },\n        ];\n    }\n\n    //\n    // These are implicitly written out for performance reasons.\n    // Lambas or binding in the render method slows down renders significantly.\n    //\n\n    private formatParagraph = (event: React.MouseEvent<HTMLButtonElement>) => {\n        event.preventDefault();\n        this.props.formatter.paragraph(this.props.lastGoodSelection);\n        this.props.afterClickHandler();\n    };\n    private formatH2 = (event: React.MouseEvent<HTMLButtonElement>) => {\n        event.preventDefault();\n        this.props.formatter.h2(this.props.lastGoodSelection);\n        this.props.afterClickHandler();\n    };\n    private formatH3 = (event: React.MouseEvent<HTMLButtonElement>) => {\n        event.preventDefault();\n        this.props.formatter.h3(this.props.lastGoodSelection);\n        this.props.afterClickHandler();\n    };\n    private formatBlockquote = (event: React.MouseEvent<HTMLButtonElement>) => {\n        event.preventDefault();\n        this.props.formatter.blockquote(this.props.lastGoodSelection);\n        this.props.afterClickHandler();\n    };\n    private formatCodeBlock = (event: React.MouseEvent<HTMLButtonElement>) => {\n        event.preventDefault();\n        this.props.formatter.codeBlock(this.props.lastGoodSelection);\n        this.props.afterClickHandler();\n    };\n    private formatSpoiler = (event: React.MouseEvent<HTMLButtonElement>) => {\n        event.preventDefault();\n        this.props.formatter.spoiler(this.props.lastGoodSelection);\n        this.props.afterClickHandler();\n    };\n}\n","/**\n * @author Adam (charrondev) Charron <adam.c@vanillaforums.com>\n * @copyright 2009-2018 Vanilla Forums Inc.\n * @license https://opensource.org/licenses/GPL-2.0 GPL-2.0\n */\n\nimport React from \"react\";\nimport Quill from \"quill/core\";\nimport { t } from \"@dashboard/application\";\nimport * as icons from \"@rich-editor/components/icons\";\nimport { withEditor, IWithEditorProps } from \"@rich-editor/components/context\";\nimport { watchFocusInDomTree } from \"@dashboard/dom\";\nimport { createEditorFlyoutEscapeListener, isEmbedSelected, forceSelectionUpdate } from \"@rich-editor/quill/utility\";\nimport Formatter from \"@rich-editor/quill/Formatter\";\nimport ParagraphToolbarMenuItems from \"@rich-editor/components/toolbars/pieces/ParagraphToolbarMenuItems\";\nimport CodeBlockBlot from \"@rich-editor/quill/blots/blocks/CodeBlockBlot\";\nimport BlockquoteLineBlot from \"@rich-editor/quill/blots/blocks/BlockquoteBlot\";\nimport SpoilerLineBlot from \"@rich-editor/quill/blots/blocks/SpoilerBlot\";\nimport HeadingBlot from \"quill/formats/header\";\nimport MenuItems from \"@rich-editor/components/toolbars/pieces/MenuItems\";\nimport classNames from \"classnames\";\n\ninterface IProps extends IWithEditorProps {}\n\ninterface IState {\n    hasFocus: boolean;\n}\n\nexport class ParagraphToolbar extends React.PureComponent<IProps, IState> {\n    private quill: Quill;\n    private ID: string;\n    private componentID: string;\n    private menuID: string;\n    private buttonID: string;\n    private selfRef: React.RefObject<HTMLDivElement> = React.createRef();\n    private buttonRef: React.RefObject<HTMLButtonElement> = React.createRef();\n    private menuRef: React.RefObject<MenuItems> = React.createRef();\n    private formatter: Formatter;\n\n    constructor(props: IProps) {\n        super(props);\n\n        // Quill can directly on the class as it won't ever change in a single instance.\n        this.quill = props.quill;\n        this.formatter = new Formatter(this.quill);\n        this.ID = this.props.editorID + \"paragraphMenu\";\n        this.componentID = this.ID + \"-component\";\n        this.menuID = this.ID + \"-menu\";\n        this.buttonID = this.ID + \"-button\";\n        this.state = {\n            hasFocus: false,\n        };\n    }\n\n    /**\n     * Mount quill listeners.\n     */\n    public componentDidMount() {\n        watchFocusInDomTree(this.selfRef.current!, newHasFocusState => {\n            if (!newHasFocusState) {\n                this.setState({ hasFocus: false });\n            }\n        });\n        this.selfRef.current!.addEventListener(\"keydown\", this.handleDocumentKeyDown);\n    }\n\n    public render() {\n        let pilcrowClasses = classNames(\n            { isOpen: this.isMenuVisible },\n            \"richEditor-button\",\n            \"richEditorParagraphMenu-handle\",\n        );\n\n        if (!this.isPilcrowVisible || isEmbedSelected(this.quill, this.props.instanceState.lastGoodSelection)) {\n            pilcrowClasses += \" isHidden\";\n        }\n\n        return (\n            <div\n                id={this.componentID}\n                style={this.pilcrowStyles}\n                className=\"richEditorParagraphMenu\"\n                ref={this.selfRef}\n            >\n                <button\n                    type=\"button\"\n                    id={this.buttonID}\n                    ref={this.buttonRef}\n                    aria-label={t(\"Line Level Formatting Menu\")}\n                    aria-controls={this.menuID}\n                    aria-expanded={this.isMenuVisible}\n                    disabled={!this.isPilcrowVisible}\n                    className={pilcrowClasses}\n                    aria-haspopup=\"menu\"\n                    onClick={this.pilcrowClickHandler}\n                    onKeyDown={this.handlePilcrowKeyDown}\n                >\n                    {this.activeFormatIcon}\n                </button>\n                <div id={this.menuID} className={this.toolbarClasses} style={this.toolbarStyles} role=\"menu\">\n                    <ParagraphToolbarMenuItems\n                        menuRef={this.menuRef}\n                        formatter={this.formatter}\n                        afterClickHandler={this.close}\n                        activeFormats={this.props.activeFormats}\n                        lastGoodSelection={this.props.instanceState.lastGoodSelection}\n                    />\n                </div>\n            </div>\n        );\n    }\n\n    /**\n     * Get the active format for the current line.\n     */\n    private get activeFormatIcon(): JSX.Element {\n        const { activeFormats } = this.props;\n        if (activeFormats[HeadingBlot.blotName] === 2) {\n            return icons.heading2();\n        }\n        if (activeFormats[HeadingBlot.blotName] === 3) {\n            return icons.heading3();\n        }\n        if (activeFormats[BlockquoteLineBlot.blotName] === true) {\n            return icons.blockquote();\n        }\n        if (activeFormats[CodeBlockBlot.blotName] === true) {\n            return icons.codeBlock();\n        }\n        if (activeFormats[SpoilerLineBlot.blotName] === true) {\n            return icons.spoiler(\"richEditorButton-icon\");\n        }\n\n        // Fallback to paragraph formatting.\n        return icons.pilcrow();\n    }\n\n    /**\n     * Determine whether or not we should show pilcrow at all.\n     */\n    private get isPilcrowVisible() {\n        const { currentSelection } = this.props.instanceState;\n        if (!currentSelection) {\n            return false;\n        }\n\n        return true;\n    }\n\n    /**\n     * Show the menu if we have a valid selection, and a valid focus.\n     */\n    private get isMenuVisible() {\n        const { instanceState } = this.props;\n        return !!instanceState.lastGoodSelection && this.state.hasFocus;\n    }\n\n    /**\n     * Get the inline styles for the pilcrow. This is mostly just positioning it on the Y access currently.\n     */\n    private get pilcrowStyles(): React.CSSProperties {\n        const { instanceState } = this.props;\n\n        if (!instanceState.lastGoodSelection) {\n            return {};\n        }\n        const bounds = this.quill.getBounds(\n            instanceState.lastGoodSelection.index,\n            instanceState.lastGoodSelection.length,\n        );\n\n        // This is the pixel offset from the top needed to make things align correctly.\n        const offset = 14;\n\n        return {\n            top: (bounds.top + bounds.bottom) / 2 - offset,\n        };\n    }\n\n    /**\n     * Get the classes for the toolbar.\n     */\n    private get toolbarClasses(): string {\n        const { instanceState } = this.props;\n\n        if (!instanceState.lastGoodSelection) {\n            return \"\";\n        }\n        const bounds = this.quill.getBounds(\n            instanceState.lastGoodSelection.index,\n            instanceState.lastGoodSelection.length,\n        );\n        let classes = \"richEditor-toolbarContainer richEditor-paragraphToolbarContainer\";\n\n        if (bounds.top > 30) {\n            classes += \" isUp\";\n        } else {\n            classes += \" isDown\";\n        }\n\n        return classes;\n    }\n\n    /**\n     * Get the inline styles for the toolbar. This just a matter of hiding it.\n     * This could likely be replaced by a CSS class in the future.\n     */\n    private get toolbarStyles(): React.CSSProperties {\n        if (this.isMenuVisible && !isEmbedSelected(this.quill, this.props.instanceState.lastGoodSelection)) {\n            return {};\n        } else {\n            // We hide the toolbar when its not visible.\n            return {\n                visibility: \"hidden\",\n                position: \"absolute\",\n                zIndex: -1,\n            };\n        }\n    }\n\n    /**\n     * Click handler for the Pilcrow\n     */\n    private pilcrowClickHandler = (event: React.MouseEvent<any>) => {\n        event.preventDefault();\n        this.setState({ hasFocus: !this.state.hasFocus }, () => {\n            if (this.state.hasFocus) {\n                this.menuRef.current!.focusFirstItem();\n                forceSelectionUpdate();\n            }\n        });\n    };\n\n    /**\n     * Close the paragraph menu and place the selection at the end of the current selection if there is one.\n     */\n    private close = () => {\n        this.setState({ hasFocus: false });\n        const { lastGoodSelection } = this.props.instanceState;\n        const newSelection = {\n            index: lastGoodSelection.index + lastGoodSelection.length,\n            length: 0,\n        };\n        this.quill.setSelection(newSelection);\n    };\n\n    /**\n     * Handle the escape key. when the toolbar is open. Note that focus still goes back to the main button,\n     * but the selection is set to a 0 length selection at the end of the current selection before the\n     * focus is moved.\n     */\n    private handleDocumentKeyDown = (event: KeyboardEvent) => {\n        if (event.keyCode === 27 && this.state.hasFocus) {\n            event.preventDefault();\n            this.close();\n        }\n    };\n\n    /**\n     * Implement opening/closing keyboard shortcuts in accordance with the WAI-ARIA best practices for menuitems.\n     *\n     * @see https://www.w3.org/TR/wai-aria-practices/examples/menubar/menubar-2/menubar-2.html\n     */\n    private handlePilcrowKeyDown = (event: React.KeyboardEvent<any>) => {\n        switch (event.key) {\n            case \"ArrowUp\":\n                event.preventDefault();\n                this.setState({ hasFocus: true }, () => {\n                    this.menuRef.current!.focusFirstItem();\n                });\n                break;\n            case \"ArrowDown\":\n                event.preventDefault();\n                this.setState({ hasFocus: true }, () => {\n                    this.menuRef.current!.focusLastItem();\n                });\n                break;\n        }\n    };\n}\n\nexport default withEditor<IProps>(ParagraphToolbar);\n","/**\n * @author Adam (charrondev) Charron <adam.c@vanillaforums.com>\n * @copyright 2009-2018 Vanilla Forums Inc.\n * @license https://opensource.org/licenses/GPL-2.0 GPL-2.0\n */\n\nimport CodeBlock from \"quill/formats/code\";\nimport Text from \"quill/blots/text\";\nimport Break from \"quill/blots/break\";\nimport Cursor from \"quill/blots/cursor\";\n\nexport default class CodeBlockBlot extends CodeBlock {\n    public static blotName = \"codeBlock\";\n    public static tagName = \"code\";\n    public static className = \"codeBlock\";\n    public static allowedChildren = [Text, Break, Cursor];\n\n    public static create(value) {\n        const domNode = super.create(value) as HTMLElement;\n        domNode.setAttribute(\"spellcheck\", false);\n        domNode.classList.add(\"code\");\n        domNode.classList.add(\"codeBlock\");\n        return domNode;\n    }\n}\n","/**\n * @author Adam (charrondev) Charron <adam.c@vanillaforums.com>\n * @copyright 2009-2018 Vanilla Forums Inc.\n * @license https://opensource.org/licenses/GPL-2.0 GPL-2.0\n */\n\nimport { IMentionSuggestionData } from \"@rich-editor/components/toolbars/pieces/MentionSuggestion\";\nimport { ILoadable } from \"@dashboard/@types/api\";\n\nexport type IMentionValue = ILoadable<IMentionSuggestionData[]>;\n\nexport interface IMentionNode {\n    children?: {\n        [key: string]: IMentionNode;\n    };\n    value?: IMentionValue;\n}\n\n/**\n * A trie for storage of mention data.\n */\nexport default class MentionTrie {\n    public MAX_PARTIAL_LOOKUP_ITERATIONS = 10;\n    private root: IMentionNode = {};\n\n    /**\n     * Insert a value into a node for the word. This will overwrite whatever value the node already has\n     *\n     * @param word - The location in the trie.\n     * @param value - The value for the node.\n     */\n    public insert(word: string, value: IMentionValue): void {\n        let current = this.root;\n\n        for (let i = 0; i < word.length; i++) {\n            const letter = word[i];\n            if (!current.children) {\n                current.children = {};\n            }\n\n            if (!(letter in current.children)) {\n                const contents: IMentionNode = i !== word.length - 1 ? {} : { children: {} };\n                current.children[letter] = contents;\n            }\n\n            current = current.children[letter];\n        }\n\n        current.value = value;\n    }\n\n    /**\n     * Get a node for a given word.\n     *\n     * If no word is passed the root node will be returned.\n     *\n     * @param word - The word to lookup.\n     */\n    public getNode(word?: string): IMentionNode | null {\n        let node = this.root;\n        if (word === undefined) {\n            return node;\n        }\n\n        for (let i = 0; i < word.length; i++) {\n            const char = word.charAt(i);\n            if (node.children && node.children[char]) {\n                node = node.children[char];\n            } else {\n                return null;\n            }\n        }\n        return node;\n    }\n\n    /**\n     * Get the value out of a particular node.\n     *\n     * @param word - The word to lookup.\n     */\n    public getValue(word: string): IMentionValue | null {\n        const node = this.getNode(word);\n        return (node && node.value) || null;\n    }\n\n    /**\n     * Lookup the value for a word using increasingly small substrings of the current string.\n     *\n     * Number of iterations is capped at MAX_PARTIAL_LOOKUP_ITERATIONS.\n     *\n     * ex. this.getValueFormPartials(\"test\") will lookup for\n     * - \"test\",\n     * - \"tes\",\n     * - \"te\",\n     * - \"t\"\n     *\n     * And return immediately if it finds a result.\n     */\n    public getValueFromPartialsOfWord(word: string): IMentionValue | null {\n        const startingLength = Math.min(this.MAX_PARTIAL_LOOKUP_ITERATIONS, word.length);\n        for (let x = startingLength; x > 0; x--) {\n            const substring = word.substring(0, x);\n            const potentialValue = this.getValue(substring);\n            if (potentialValue != null) {\n                return potentialValue;\n            }\n        }\n\n        return null;\n    }\n}\n","/**\n * @author Adam (charrondev) Charron <adam.c@vanillaforums.com>\n * @copyright 2009-2018 Vanilla Forums Inc.\n * @license https://opensource.org/licenses/GPL-2.0 GPL-2.0\n */\n\nimport * as mentionActions from \"./mentionActions\";\nimport MentionTrie from \"@rich-editor/state/mention/MentionTrie\";\nimport { IMentionSuggestionData } from \"@rich-editor/components/toolbars/pieces/MentionSuggestion\";\nimport { IMentionState } from \"@rich-editor/@types/store\";\nimport { LoadStatus } from \"@dashboard/@types/api\";\n\nexport const initialState: IMentionState = {\n    lastSuccessfulUsername: null,\n    currentUsername: null,\n    usersTrie: new MentionTrie(),\n    activeSuggestionID: \"\",\n    activeSuggestionIndex: 0,\n};\n\nexport function sortSuggestions(users: IMentionSuggestionData[], searchName: string) {\n    const looseCollator = Intl.Collator(\"en\", {\n        usage: \"sort\",\n        sensitivity: \"variant\",\n        ignorePunctuation: true,\n        numeric: true,\n    });\n\n    return users.sort((userA, userB) => {\n        //  Return exact matches first.\n        if (userA.name.includes(searchName) && !userB.name.includes(searchName)) {\n            return -1;\n        }\n\n        if (userB.name.includes(searchName) && !userA.name.includes(searchName)) {\n            return 1;\n        }\n\n        // Then do a loose sort.\n        return looseCollator.compare(userA.name, userB.name);\n    });\n}\n\nexport default function mentionReducer(state = initialState, action: mentionActions.ActionTypes): IMentionState {\n    switch (action.type) {\n        case mentionActions.LOAD_USERS_REQUEST: {\n            const { username } = action.payload;\n            state.usersTrie.insert(username, {\n                status: LoadStatus.LOADING,\n            });\n\n            // We want to invalidate the previous results unless:\n            // - The new string is longer than the old one\n            // - The new string is a superset of the old one.\n            let shouldKeepPreviousResults = false;\n            const previousSuccessfulName = state.lastSuccessfulUsername;\n            if (previousSuccessfulName != null && username.length >= previousSuccessfulName.length) {\n                const newNameSubstring = username.substring(0, previousSuccessfulName.length);\n                if (newNameSubstring === previousSuccessfulName) {\n                    shouldKeepPreviousResults = true;\n                }\n            }\n\n            return {\n                ...state,\n                currentUsername: username,\n                lastSuccessfulUsername: shouldKeepPreviousResults ? state.lastSuccessfulUsername : null,\n            };\n        }\n        case mentionActions.LOAD_USERS_FAILURE: {\n            const { username, error } = action.payload;\n            state.usersTrie.insert(username, {\n                status: LoadStatus.ERROR,\n                data: undefined,\n                error,\n            });\n            return state;\n        }\n        case mentionActions.LOAD_USERS_SUCCESS: {\n            const { username, users } = action.payload;\n            state.usersTrie.insert(username, {\n                status: LoadStatus.SUCCESS,\n                data: sortSuggestions(users, username),\n            });\n\n            const firstUserID = users.length > 0 ? users[0].domID : \"\";\n            return {\n                ...state,\n                activeSuggestionID: firstUserID,\n                activeSuggestionIndex: 0,\n                lastSuccessfulUsername: username,\n                currentUsername: username === state.currentUsername ? null : state.currentUsername,\n            };\n        }\n        case mentionActions.SET_ACTIVE_SUGGESTION: {\n            const { suggestionID, suggestionIndex } = action.payload;\n            return {\n                ...state,\n                activeSuggestionID: suggestionID,\n                activeSuggestionIndex: suggestionIndex,\n            };\n        }\n        default:\n            return state;\n    }\n}\n","/**\n * @author Adam (charrondev) Charron <adam.c@vanillaforums.com>\n * @copyright 2009-2018 Vanilla Forums Inc.\n * @license https://opensource.org/licenses/GPL-2.0 GPL-2.0\n */\n\nimport * as instanceActions from \"./instanceActions\";\nimport { IEditorInstanceState, IEditorInstance } from \"@rich-editor/@types/store\";\nimport Quill, { RangeStatic } from \"quill/core\";\nimport { getMentionRange, rangeContainsBlot } from \"@rich-editor/quill/utility\";\nimport CodeBlockBlot from \"@rich-editor/quill/blots/blocks/CodeBlockBlot\";\n\nconst defaultSelection = {\n    index: 0,\n    length: 0,\n};\n\nexport const initialState: IEditorInstanceState = {};\nexport const defaultInstance: IEditorInstance = {\n    currentSelection: defaultSelection,\n    lastGoodSelection: defaultSelection,\n    mentionSelection: null,\n};\n\n/**\n * Validate that an particular editor ID has been created before certain actions are taken on it.\n */\nfunction validateIDExistance(state: IEditorInstanceState, action: instanceActions.ActionTypes) {\n    const idExists = state[action.payload.editorID];\n    if (action.type === instanceActions.CREATE_INSTANCE && idExists) {\n        throw new Error(`Failed to create editor instance with id ${action.payload.editorID}. Id already exists`);\n    }\n\n    if (action.type !== instanceActions.CREATE_INSTANCE && !idExists) {\n        throw new Error(\n            `Could not perform an action for editor ID ${\n                action.payload.editorID\n            } that doesn't exist. Be sure to create an instance first.`,\n        );\n    }\n}\n\nexport default function instanceReducer(\n    state = initialState,\n    action: instanceActions.ActionTypes,\n): IEditorInstanceState {\n    switch (action.type) {\n        case instanceActions.CREATE_INSTANCE: {\n            validateIDExistance(state, action);\n            return {\n                ...state,\n                [action.payload.editorID]: defaultInstance,\n            };\n        }\n        case instanceActions.SET_SELECTION: {\n            validateIDExistance(state, action);\n            const { selection, editorID, quill } = action.payload;\n            const instanceState = state[editorID];\n            const { lastGoodSelection } = instanceState;\n\n            return {\n                ...state,\n                [editorID]: {\n                    ...instanceState,\n                    currentSelection: selection,\n                    lastGoodSelection: selection !== null ? selection : lastGoodSelection,\n                    mentionSelection: getMentionRange(quill, selection),\n                },\n            };\n        }\n        default: {\n            return state;\n        }\n    }\n}\n","/**\n * @author Adam (charrondev) Charron <adam.c@vanillaforums.com>\n * @copyright 2009-2018 Vanilla Forums Inc.\n * @license https://opensource.org/licenses/GPL-2.0 GPL-2.0\n */\n\nimport mentionReducer from \"./mention/mentionReducer\";\nimport instanceReducer from \"./instance/instanceReducer\";\nimport { combineReducers } from \"redux\";\n\nconst editorReducer = combineReducers({\n    mentions: mentionReducer,\n    instances: instanceReducer,\n});\n\nexport default editorReducer;\n","/**\n * @author Adam (charrondev) Charron <adam.c@vanillaforums.com>\n * @copyright 2009-2018 Vanilla Forums Inc.\n * @license https://opensource.org/licenses/GPL-2.0 GPL-2.0\n */\n\nimport React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport uniqueId from \"lodash/uniqueId\";\nimport { ensureHtmlElement } from \"@dashboard/dom\";\nimport Editor from \"@rich-editor/components/editor/Editor\";\n\n/**\n * Mount the editor into a DOM Node.\n *\n * @param containerSelector - The CSS selector or the HTML Element to render into.\n */\nexport default function mountEditor(containerSelector: string | Element) {\n    const container = ensureHtmlElement(containerSelector);\n    const bodybox = container.closest(\"form\")!.querySelector(\".BodyBox\");\n\n    if (!bodybox) {\n        throw new Error(\"Could not find the BodyBox to mount editor to.\");\n    }\n\n    const initialFormat = bodybox.getAttribute(\"format\") || \"Rich\";\n    const editorID = uniqueId(\"editor-\");\n    const descriptionID = editorID + \"-description\";\n\n    if (initialFormat === \"Rich\") {\n        ReactDOM.render(\n            <Editor\n                editorID={editorID}\n                editorDescriptionID={descriptionID}\n                bodybox={bodybox as HTMLInputElement}\n                isPrimaryEditor={true}\n            />,\n            container,\n        );\n        container.classList.remove(\"isDisabled\");\n    } else {\n        throw new Error(`Unsupported initial editor format ${initialFormat}`);\n    }\n}\n","/*\n * @author Adam (charrondev) Charron <adam.c@vanillaforums.com>\n * @copyright 2009-2018 Vanilla Forums Inc.\n * @license https://opensource.org/licenses/GPL-2.0 GPL-2.0\n */\n\nimport { registerReducer } from \"@dashboard/state/reducerRegistry\";\nimport editorReducer from \"@rich-editor/state/editorReducer\";\nimport { onReady } from \"@dashboard/application\";\nimport mountEditor from \"@rich-editor/mountEditor\";\n\nonReady(() => {\n    registerReducer(\"editor\", editorReducer);\n    void setupEditor();\n    void setupCommentEditForm();\n});\n\n/**\n * Set up the new discussion form if it exists.\n */\nasync function setupEditor() {\n    const discussionFormContainer = document.querySelectorAll(\".richEditor\");\n    if (discussionFormContainer.length > 0) {\n        discussionFormContainer.forEach(mountEditor);\n    }\n}\n\n/**\n * Set up the editor if the someone clicks edit on a form.\n */\nasync function setupCommentEditForm() {\n    document.addEventListener(\"X-EditCommentFormLoaded\", async event => {\n        const container = event.target;\n        if (!(container instanceof Element)) {\n            return;\n        }\n\n        const richEditor = container.querySelector(\".richEditor\");\n        if (richEditor) {\n            mountEditor(richEditor);\n        }\n    });\n}\n","/**\n * @author Adam (charrondev) Charron <adam.c@vanillaforums.com>\n * @copyright 2009-2018 Vanilla Forums Inc.\n * @license https://opensource.org/licenses/GPL-2.0 GPL-2.0\n */\n\nimport Block from \"quill/blots/block\";\n\nexport default class BlockBlot extends Block {\n    public static allowedChildren = [...Block.allowedChildren];\n}\n","/**\n * @author Adam (charrondev) Charron <adam.c@vanillaforums.com>\n * @copyright 2009-2018 Vanilla Forums Inc.\n * @license https://opensource.org/licenses/GPL-2.0 GPL-2.0\n */\n\nimport { Code } from \"quill/formats/code\";\n\nexport default class CodeBlot extends Code {\n    public static blotName = \"codeInline\";\n    public static tagName = \"code\";\n    public static className = \"codeInline\";\n\n    constructor(domNode) {\n        super(domNode);\n        domNode.classList.add(\"code\");\n        domNode.classList.add(\"isInline\");\n        domNode.setAttribute(\"spellcheck\", false);\n    }\n}\n","/**\n * @author Adam (charrondev) Charron <adam.c@vanillaforums.com>\n * @copyright 2009-2018 Vanilla Forums Inc.\n * @license https://opensource.org/licenses/GPL-2.0 GPL-2.0\n */\n\nimport Quill from \"quill/core\";\nimport Inline from \"quill/blots/inline\";\nimport { t } from \"@dashboard/application\";\nimport { IUserFragment } from \"@dashboard/@types/api/user\";\n\n/**\n * A Blot to represent text that is being matched for an autocomplete.\n *\n * This and the MentionComboBoxBlot are used for accessibility primarily and\n * don't current represent and visual changes.\n *\n * It's final state is as a MentionBlot.\n *\n * @see {MentionBlot}\n * @see {MentionComboBoxBlot}\n */\nexport default class MentionAutoCompleteBlot extends Inline {\n    public static blotName = \"mention-autocomplete\";\n    public static className = \"atMentionAutoComplete\";\n    public static tagName = \"span\";\n    public static requiredContainer = \"mention-combobox\";\n\n    public static formats() {\n        return true;\n    }\n\n    constructor(domNode) {\n        super(domNode);\n        domNode.setAttribute(\"aria-label\", t(\"@mention a user\"));\n        domNode.setAttribute(\"aria-autocomplete\", \"list\");\n    }\n\n    /**\n     * Wrap this Blot in a MentionComboBoxBlot for accessibility purposes.\n     */\n    public attach() {\n        super.attach();\n        if (\n            this.statics.requiredContainer &&\n            (this.parent as any).statics.blotName !== this.statics.requiredContainer\n        ) {\n            this.wrap(this.statics.requiredContainer);\n        }\n    }\n\n    /**\n     * Get the username out of the Blot. This is used for API requests.\n     *\n     * The @ sign is remove, and double quotes are stripped, because they can be used to allow\n     * spaces or punctuation.\n     */\n    get username() {\n        const textContent = this.domNode.textContent || \"\";\n        return textContent.replace(\"@\", \"\").replace(`\"`, \"\");\n    }\n\n    /**\n     * Be sure to unwrap this Blot into its parent before replacing itself\n     * or it will recurse ifinitelely trying to recreate its requiredContainer\n     */\n    public replaceWith(name, value?) {\n        this.moveChildren(this.parent, this.next);\n        this.remove();\n        return this.parent.replaceWith(name, value);\n    }\n\n    /**\n     * Finalize this Blot by replacing it with a full MentionBlot.\n     *\n     * @param result The new MentionBlot\n     */\n    public finalize(result: IUserFragment) {\n        this.replaceWith(\"mention\", result);\n        this.quill && this.quill.update(Quill.sources.API);\n    }\n\n    /**\n     * Remove the combobox and turn the blot into plaintext.\n     */\n    public cancel() {\n        this.replaceWith(\"inline\", this.domNode.innerHTML);\n        this.quill && this.quill.update(Quill.sources.SILENT);\n    }\n\n    /**\n     * Inject accessibility attributes into the autocomplete and it's parent combobox.\n     */\n    public injectAccessibilityAttributes(data: IComboBoxAccessibilityOptions) {\n        const domNode = this.domNode;\n        const parentNode = this.parent.domNode;\n\n        parentNode.setAttribute(\"id\", data.ID);\n        parentNode.setAttribute(\"aria-expanded\", !!data.activeItemID);\n        parentNode.setAttribute(\"aria-owns\", data.suggestionListID);\n        domNode.setAttribute(\"aria-controls\", data.suggestionListID);\n\n        if (data.activeItemIsLoader) {\n            domNode.setAttribute(\"aria-label\", t(\"Loading new @mention suggestions\"));\n            domNode.removeAttribute(\"aria-activedescendant\");\n        } else {\n            domNode.setAttribute(\"aria-activedescendant\", data.activeItemID);\n            domNode.removeAttribute(\"aria-describeby\");\n        }\n    }\n\n    /**\n     * Get the attached quill instance.\n     *\n     * This will _NOT_ work before attach() is called.\n     */\n    private get quill(): Quill | null {\n        if (!this.scroll || !this.scroll.domNode.parentNode) {\n            return null;\n        }\n\n        return Quill.find(this.scroll.domNode.parentNode!);\n    }\n}\n\ninterface IComboBoxAccessibilityOptions {\n    ID: string;\n    suggestionListID: string;\n    activeItemIsLoader: boolean;\n    activeItemID: string;\n}\n","/**\n * @author Adam (charrondev) Charron <adam.c@vanillaforums.com>\n * @copyright 2009-2018 Vanilla Forums Inc.\n * @license https://opensource.org/licenses/GPL-2.0 GPL-2.0\n */\n\nimport Container from \"quill/blots/container\";\nimport Parchment from \"parchment\";\n\n/**\n * A Blot implementing functions necessary to wrap another Blot as a \"Dump\" DOM Element.\n *\n * The wrapped blots should additionally use the `wrappedBlot` Higher-order function in `quill-utilities`.\n */\nexport default class WrapperBlot extends Container {\n    // This cannot be Parchment.Scope.BLOCK or it will match and attributor and break pasting.\n    public static scope = Parchment.Scope.BLOCK_BLOT;\n    public static tagName = \"div\";\n    public static allowedChildren = [WrapperBlot];\n    public static className: string;\n\n    /**\n     * We want to NOT return the format of this Blot. This blot should never be created on its own. Only through its\n     * child blot. Always return undefined.\n     */\n    public static formats() {\n        return;\n    }\n\n    /**\n     * Apply className if applicable.\n     *\n     * @returns {Node} - The DOM Node for the Blot.\n     */\n    public static create(value) {\n        const domNode = super.create(value) as HTMLElement;\n\n        if (this.className) {\n            domNode.classList.add(this.className);\n        }\n        return domNode;\n    }\n\n    /** @type {Node} */\n    public domNode;\n\n    /**\n     * Join the children elements together where possible.\n     *\n     * @param {any} context -\n     */\n    public optimize(context) {\n        super.optimize(context);\n        const next = this.next;\n        if (\n            next instanceof WrapperBlot &&\n            next.prev === this &&\n            next.statics.blotName === (this.constructor as any).blotName &&\n            next.domNode.tagName === this.domNode.tagName\n        ) {\n            next.moveChildren(this);\n            next.remove();\n        }\n    }\n}\n","/**\n * @author Adam (charrondev) Charron <adam.c@vanillaforums.com>\n * @copyright 2009-2018 Vanilla Forums Inc.\n * @license https://opensource.org/licenses/GPL-2.0 GPL-2.0\n */\n\n/* tslint:disable:max-classes-per-file */\n\nimport WrapperBlot from \"../abstract/WrapperBlot\";\nimport ContentBlot from \"../abstract/ContentBlot\";\nimport LineBlot from \"../abstract/LineBlot\";\n\nexport default class BlockquoteLineBlot extends LineBlot {\n    public static blotName = \"blockquote-line\";\n    public static className = \"blockquote-line\";\n    public static tagName = \"p\";\n    public static parentName = \"blockquote-content\";\n}\n\nexport class BlockquoteContentBlot extends ContentBlot {\n    public static className = \"blockquote-content\";\n    public static blotName = \"blockquote-content\";\n    public static parentName = \"blockquote\";\n}\n\nexport class BlockquoteWrapperBlot extends WrapperBlot {\n    public static className = \"blockquote\";\n    public static blotName = \"blockquote\";\n}\n","/**\n * @author Adam (charrondev) Charron <adam.c@vanillaforums.com>\n * @copyright 2009-2018 Vanilla Forums Inc.\n * @license https://opensource.org/licenses/GPL-2.0 GPL-2.0\n */\n\nimport Emitter from \"quill/core/emitter\";\nimport Quill, { RangeStatic, Blot } from \"quill/core\";\nimport KeyboardModule from \"quill/modules/keyboard\";\nimport Delta from \"quill-delta\";\nimport { matchAtMention } from \"@dashboard/utility\";\nimport uniqueId from \"lodash/uniqueId\";\nimport FocusableEmbedBlot from \"@rich-editor/quill/blots/abstract/FocusableEmbedBlot\";\nimport BlockBlot from \"@rich-editor/quill/blots/blocks/BlockBlot\";\nimport CodeBlockBlot from \"@rich-editor/quill/blots/blocks/CodeBlockBlot\";\n\ninterface IBoundary {\n    start: number;\n    end: number;\n}\n\n/**\n * Convert a range to start/end from index/length.\n *\n * @param range - The range to convert.\n *\n * @returns The converted boundary.\n */\nexport function convertRangeToBoundary(range?: RangeStatic): IBoundary | undefined {\n    if (!range) {\n        return;\n    }\n\n    return {\n        start: range.index,\n        end: range.index + range.length - 1,\n    };\n}\n\n/**\n * Convert a boundary into a range.\n *\n * @param boundary - The boundary to convert.\n *\n * @returns The converted range.\n */\nexport function convertBoundaryToRange(boundary?: IBoundary): RangeStatic | undefined {\n    if (!boundary) {\n        return;\n    }\n\n    return {\n        index: boundary.start,\n        length: boundary.end - boundary.start + 1,\n    };\n}\n\n/**\n * Extend a quill range backwards and forwards to the start/end of sub-ranges.\n *\n * @param range - The range to expand.\n * @param startRange - The range to extend the beginning with.\n * @param endRange - The range to extend the end with.\n *\n * @returns The expanded range.\n */\nexport function expandRange(\n    range: RangeStatic,\n    startRange?: RangeStatic,\n    endRange?: RangeStatic,\n): RangeStatic | undefined {\n    // Convert everything to start/end instead of index/length.\n    const boundary = convertRangeToBoundary(range);\n    const startBoundary = convertRangeToBoundary(startRange);\n    const endBoundary = convertRangeToBoundary(endRange);\n\n    if (boundary && startBoundary && startBoundary.start < boundary.start) {\n        boundary.start = startBoundary.start;\n    }\n\n    if (boundary && endBoundary && endBoundary.end > boundary.end) {\n        boundary.end = endBoundary.end;\n    }\n\n    return convertBoundaryToRange(boundary);\n}\n\n/**\n * Check if a given range contains a blot of a certain type. Could be more than one.\n *\n * @param quill - A quill instance.\n * @param range - The range to check.\n * @param blotConstructor - A class constructor for a blot.\n */\nexport function rangeContainsBlot(quill: Quill, blotConstructor: any, range: RangeStatic | null = null): boolean {\n    if (range === null) {\n        range = quill.getSelection();\n    }\n\n    if (!range) {\n        return false;\n    }\n\n    if (range.length > 0) {\n        const blots = quill.scroll.descendants(blotConstructor, range.index, range.length);\n        return blots.length > 0;\n    } else {\n        const blot = quill.scroll.descendant(blotConstructor, range.index)[0];\n        return !!blot;\n    }\n}\n\n/**\n * Format (or unformat) all blots in a given range. Will fully unformat a link even if the link is not entirely\n * inside of the current selection.\n *\n * @param quill - A quill instance.\n * @param range - The range to check.\n * @param blotConstructor - A class constructor for a blot.\n */\nexport function disableAllBlotsInRange<T extends Blot>(\n    quill: Quill,\n    blotConstructor:\n        | {\n              new (): T;\n          }\n        | typeof Blot,\n    range: RangeStatic | null = null,\n) {\n    if (range === null) {\n        range = quill.getSelection()!;\n    }\n\n    const currentBlots = quill.scroll.descendants(blotConstructor as any, range.index, range.length) as Blot[];\n    const firstBlot = currentBlots[0];\n    const lastBlot = currentBlots[currentBlots.length - 1];\n\n    const startRange = firstBlot && {\n        index: firstBlot.offset(quill.scroll),\n        length: firstBlot.length(),\n    };\n\n    const endRange = lastBlot && {\n        index: lastBlot.offset(quill.scroll),\n        length: lastBlot.length(),\n    };\n    const finalRange = expandRange(range, startRange, endRange);\n\n    if (finalRange) {\n        quill.formatText(finalRange.index, finalRange.length, \"link\", false, Emitter.sources.USER);\n    }\n}\n\n/**\n * Determine if a Blot is the first Blot in the scroll (or first through descendant blots).\n *\n * @example Both of the following are valid.\n *\n * Scroll -> Blot\n * Scroll -> Container -> Container -> Container -> Blot\n *\n * @param blot - the blot to check.\n * @param quill - Your quill instance.\n *\n * @returns Whether or not the blot is in the first position.\n */\nexport function isBlotFirstInScroll(blot: Blot, quill: Quill) {\n    const isFirstBlotInBlot = (childBlot, parentBlot) => {\n        // Bail out if there are not more children.\n        if (!parentBlot.children || !parentBlot.children.head) {\n            return false;\n        }\n\n        // We found our match.\n        if (childBlot === parentBlot.children.head) {\n            return true;\n        }\n\n        // Recurse through children.\n        return isFirstBlotInBlot(childBlot, parentBlot.children.head);\n    };\n\n    return isFirstBlotInBlot(blot, quill.scroll);\n}\n\n/**\n * Strips the formatting from the first blot in your quill instance.\n *\n * @param quill - Your quill instance\n */\nexport function stripFormattingFromFirstBlot(quill: Quill) {\n    const [firstBlot] = quill.getLine(0);\n    const blotName = (firstBlot.constructor as any).blotName;\n\n    const delta = new Delta().retain(firstBlot.length(), { [blotName]: false });\n    quill.updateContents(delta, Emitter.sources.USER);\n}\n\n/**\n * Normalize blots to what we consider a top level block.\n *\n * @param blot - The blot to normalize.\n *\n * Currently this means:\n * - LineBlot -> WrapperBlot\n */\nexport function normalizeBlotIntoBlock(blot: Blot): Blot {\n    if ((blot as any).getWrapper) {\n        return (blot as any).getWrapper(true);\n    } else {\n        return blot;\n    }\n}\n\n/**\n * Insert a new line at the end of the current Blot and trim excess newlines.\n *\n * @param range - The range that was altered.\n * @param deleteAmount - The amount of lines to trim.\n */\nexport function insertNewLineAfterBlotAndTrim(quill, range: RangeStatic, deleteAmount = 1) {\n    const [line, offset] = quill.getLine(range.index);\n\n    const newBlot = new BlockBlot(BlockBlot.create(\"\"));\n    const thisBlot = line;\n\n    const nextBlot = thisBlot.next;\n    newBlot.insertInto(quill.scroll, nextBlot);\n\n    // Now we need to clean up that extra newline.\n    const positionUpToPreviousNewline = range.index + line.length() - offset;\n    const deleteDelta = new Delta().retain(positionUpToPreviousNewline - deleteAmount).delete(deleteAmount);\n    quill.updateContents(deleteDelta, Emitter.sources.USER);\n    quill.setSelection(positionUpToPreviousNewline - deleteAmount, Emitter.sources.USER);\n}\n\n/**\n * Insert a newline at the end of the scroll. This is done through a delta like this because otherwise it gets optimized away :(\n *\n * @param quill - The quill instance.\n */\nexport function insertNewLineAtEndOfScroll(quill: Quill) {\n    const newLineBlot = new BlockBlot(BlockBlot.create(\"\"));\n    quill.scroll.appendChild(newLineBlot);\n    quill.update(Quill.sources.USER);\n    quill.setSelection(quill.scroll.length(), 0);\n}\n\n/**\n * Insert a newline at the start of the scroll. This is done through a delta like this because otherwise it gets optimized away :(\n *\n * @param quill - The quill instance.\n */\nexport function insertNewLineAtStartOfScroll(quill: Quill) {\n    const newLineBlot = new BlockBlot(BlockBlot.create(\"\"));\n    quill.scroll.insertBefore(newLineBlot, quill.scroll.children.head!);\n    quill.update(Quill.sources.USER);\n    quill.setSelection(0, 0);\n}\n\n/**\n * Get a Blot at a given index.\n *\n * @param quill - The Quill instance.\n * @param index - The index to look at.\n * @param blotClass - Optionally a blot class to filter by.\n */\nexport function getBlotAtIndex<T extends Blot>(\n    quill: Quill,\n    index: number,\n    blotClass?: { new (value?: any): T },\n): T | null {\n    const condition = blotClass ? blot => blot instanceof blotClass : blot => true;\n    return quill.scroll.descendant(condition, index)[0] as T;\n}\n\nconst MIN_MENTION_LENGTH = 1;\n\n/**\n * Get the range of text to convert to a mention.\n *\n * @param quill - A quill instance.\n * @param currentSelection - The current quill selection.\n *\n * @returns A range if a mention was matched, or null if one was not.\n */\nexport function getMentionRange(quill: Quill, currentSelection: RangeStatic | null): RangeStatic | null {\n    if (!quill.hasFocus()) {\n        return null;\n    }\n\n    if (!currentSelection) {\n        return null;\n    }\n\n    if (currentSelection.length > 0) {\n        return null;\n    }\n\n    if (rangeContainsBlot(quill, CodeBlockBlot, currentSelection)) {\n        return null;\n    }\n\n    // Get details about our current leaf (likely a TextBlot).\n    // This breaks the text to search every time there is a different DOM Node. Eg. A format, link, line break.\n    const [leaf] = quill.getLeaf(currentSelection.index);\n    const leafOffset = leaf.offset(quill.scroll);\n    const length = currentSelection.index - leafOffset;\n    const leafContentBeforeCursor = quill.getText(leafOffset, length);\n\n    // See if the leaf's content contains an `@`.\n    const leafAtSignIndex = leafContentBeforeCursor.lastIndexOf(\"@\");\n    if (leafAtSignIndex === -1) {\n        return null;\n    }\n    const mentionIndex = leafOffset + leafAtSignIndex;\n    const potentialMention = leafContentBeforeCursor.substring(leafAtSignIndex);\n\n    const usernameLength = potentialMention.length - 1;\n    const meetsLengthRequirements = usernameLength >= MIN_MENTION_LENGTH;\n    if (!meetsLengthRequirements) {\n        return null;\n    }\n\n    const isValidMention = matchAtMention(potentialMention, false, false);\n    if (!isValidMention) {\n        return null;\n    }\n\n    return {\n        index: mentionIndex,\n        length: potentialMention.length,\n    };\n}\n\n/**\n * Register an keyboard listener for the escape key.\n *\n * @param root - The element to watch for the escape listener in.\n * @param returnElement - The element to return to when escape is pressed.\n */\nexport function createEditorFlyoutEscapeListener(\n    root: HTMLElement,\n    returnElement: HTMLElement,\n    callback: (event: KeyboardEvent) => void = () => {\n        return;\n    },\n) {\n    root.addEventListener(\"keydown\", (event: KeyboardEvent) => {\n        if (KeyboardModule.match(event, { key: KeyboardModule.keys.ESCAPE, shiftKey: false })) {\n            if (root.contains(document.activeElement)) {\n                event.preventDefault();\n                returnElement.focus();\n                callback(event);\n            }\n        }\n    });\n}\n\nconst quillIDMap: Map<Quill, string> = new Map();\n\n/**\n * Generate a unique ID for a quill instance and store it in a Map with that instance.\n *\n * This is useful for generating a string key for a given quill instance.\n *\n * @param quill The quill instance.\n */\nexport function getIDForQuill(quill: Quill) {\n    if (quillIDMap.has(quill)) {\n        return quillIDMap.get(quill);\n    } else {\n        quillIDMap.set(quill, uniqueId(\"editorInstance\"));\n        return getIDForQuill(quill);\n    }\n}\n\n/**\n * Insert a blot into a quill instance at a given index.\n *\n * Why does this need to exist?\n * - The built in `blot.insertAt` method doesn't let you insert a premade blot.\n * - We need to calculate this offset anyways.\n * - Our scope is narrower because we are inserting only at the top level, where a blot is always a block.\n *\n * @param quill - A Quill instance.\n * @param index - The index to insert at.\n * @param blot - A blot already created.\n */\nexport function insertBlockBlotAt(quill: Quill, index: number, blot: Blot) {\n    const line = quill.getLine(index)[0] as Blot;\n\n    // Splitting lines is relative to the line start, the scroll start, so we need to calculate the\n    // index within the blot to split at.\n    const lineOffset = line.offset(quill.scroll);\n    const ref = line.split(index - lineOffset);\n    line.parent.insertBefore(blot, ref || undefined);\n}\n\n/**\n * Determine if and Embed inside of this class is focused.\n */\nexport function isEmbedSelected(quill: Quill, selection?: RangeStatic | null) {\n    if (!selection) {\n        return false;\n    }\n    const potentialEmbedBlot = getBlotAtIndex(quill, selection.index, FocusableEmbedBlot);\n    return !!potentialEmbedBlot;\n}\n\nexport const SELECTION_UPDATE = \"[editor] force selection update\";\n\n/**\n * Force a selection update on all quill editors.\n */\nexport function forceSelectionUpdate() {\n    document.dispatchEvent(new CustomEvent(SELECTION_UPDATE));\n}\n","/**\n * @copyright 2009-2018 Vanilla Forums Inc.\n * @license https://opensource.org/licenses/GPL-2.0 GPL-2.0\n */\n\nimport React from \"react\";\nimport { t } from \"@dashboard/application\";\nimport { spoiler } from \"@rich-editor/components/icons\";\n\nexport default class SpoilerButton extends React.Component<{}> {\n    public render() {\n        return (\n            <div contentEditable={false} className=\"spoiler-buttonContainer\">\n                <button disabled className=\"iconButton button-spoiler\" type=\"button\">\n                    <span className=\"spoiler-warning\">\n                        <span className=\"spoiler-warningMain\">\n                            {spoiler(\"spoiler-icon\")}\n                            <strong className=\"spoiler-warningBefore\">{t(\"Warning\")}</strong>\n                            <span className=\"spoiler-warningAfter\">{t(\"This is a spoiler\")}</span>\n                        </span>\n                    </span>\n                </button>\n            </div>\n        );\n    }\n}\n","/**\n * @author Adam (charrondev) Charron <adam.c@vanillaforums.com>\n * @copyright 2009-2018 Vanilla Forums Inc.\n * @license https://opensource.org/licenses/GPL-2.0 GPL-2.0\n */\n\n/* tslint:disable:max-classes-per-file */\n\nimport WrapperBlot from \"../abstract/WrapperBlot\";\nimport ContentBlot from \"../abstract/ContentBlot\";\nimport LineBlot from \"../abstract/LineBlot\";\nimport SpoilerButton from \"../../components/SpoilerButton\";\nimport ReactDOM from \"react-dom\";\nimport Editor from \"@rich-editor/components/editor/Editor\";\nimport React from \"react\";\n\n/**\n * Represent a single line of a Spoiler.\n */\nexport default class SpoilerLineBlot extends LineBlot {\n    public static blotName = \"spoiler-line\";\n    public static className = \"spoiler-line\";\n    public static tagName = \"p\";\n    public static parentName = \"spoiler-content\";\n}\n\n/**\n * Represents the full content area of a spoiler.\n */\nexport class SpoilerContentBlot extends ContentBlot {\n    public static className = \"spoiler-content\";\n    public static blotName = \"spoiler-content\";\n    public static parentName = \"spoiler\";\n}\n\n/**\n * Represents the full spoiler. This blot should not be created on it's own. It should always be created upwards\n * through a SpoilerLineBlot.\n */\nexport class SpoilerWrapperBlot extends WrapperBlot {\n    public static className = \"spoiler\";\n    public static blotName = \"spoiler\";\n    public static allowedChildren = [...WrapperBlot.allowedChildren];\n\n    public static create(value) {\n        const node = super.create(value);\n        node.classList.add(\"isShowingSpoiler\");\n        return node;\n    }\n\n    constructor(domNode) {\n        super(domNode);\n        // this.attachToggleButton();\n        const button = ReactDOM.render(<SpoilerButton />, this.domNode);\n    }\n\n    public attach() {\n        super.attach();\n    }\n\n    public optimize(context) {\n        super.optimize(context);\n    }\n}\n","/**\n * @copyright 2009-2018 Vanilla Forums Inc.\n * @license https://opensource.org/licenses/GPL-2.0 GPL-2.0\n */\n\nimport BlockBlot from \"../blocks/BlockBlot\";\n\n/**\n * A Block Blot implementing class matching functionality and representation in the outputted delta.\n */\nexport default class ClassFormatBlot extends BlockBlot {\n    public static create(value) {\n        const domNode = super.create(value) as HTMLElement;\n\n        if (this.className) {\n            domNode.classList.add(this.className);\n        }\n        return domNode;\n    }\n\n    /**\n     * Return the formats for the Blot. Check matching of the tag as well as classname if applicable.\n     *\n     * This is necessary for copy/paste to work.\n     *\n     * @param {Node} domNode - The DOM Node to check.\n     *\n     * @returns {boolean} Whether or a not a DOM Node represents this format.\n     */\n    public static formats(domNode) {\n        const classMatch = this.className && domNode.classList.contains(this.className);\n        const tagMatch = domNode.tagName.toLowerCase() === this.tagName.toLowerCase();\n\n        return this.className ? classMatch && tagMatch : tagMatch;\n    }\n\n    constructor(domNode) {\n        super(domNode);\n\n        if (!this.statics.className) {\n            throw new Error(\"Attempted to initialize a ClassFormatBlot without setting the static className\");\n        }\n    }\n\n    /**\n     * Get the formats out of the Blot instance's DOM Node.\n     *\n     * @returns The Formats for the Blot.\n     */\n    public formats() {\n        return {\n            [this.statics.blotName]: this.statics.formats(this.domNode),\n        };\n    }\n}\n","/**\n * @copyright 2009-2018 Vanilla Forums Inc.\n * @license https://opensource.org/licenses/GPL-2.0 GPL-2.0\n */\n\nimport ClassFormatBlot from \"./ClassFormatBlot\";\nimport withWrapper from \"./withWrapper\";\n\n/**\n * A Line blot is responsible for recreating it's wrapping Blots.\n */\nclass LineBlot extends ClassFormatBlot {}\n\nexport default withWrapper(LineBlot);\n","/**\n * @author Adam (charrondev) Charron <adam.c@vanillaforums.com>\n * @copyright 2009-2018 Vanilla Forums Inc.\n * @license https://opensource.org/licenses/GPL-2.0 GPL-2.0\n */\n\nimport { Dispatch } from \"redux\";\nimport { ActionsUnion, createAction } from \"@dashboard/state/utility\";\nimport api from \"@dashboard/apiv2\";\nimport { IMentionSuggestionData } from \"@rich-editor/components/toolbars/pieces/MentionSuggestion\";\nimport { IStoreState } from \"@rich-editor/@types/store\";\nimport { IApiError, LoadStatus } from \"@dashboard/@types/api\";\n\nexport const SET_ACTIVE_SUGGESTION = \"[mentions] set active suggestion\";\nexport const LOAD_USERS_REQUEST = \"[mentions] load users request\";\nexport const LOAD_USERS_FAILURE = \"[mentions] load users failure\";\nexport const LOAD_USERS_SUCCESS = \"[mentions] load users success\";\n\n// The number of characters that we will lookup to try and invalidate a lookup early.\nconst USER_LIMIT = 50;\n\n/**\n * Filter users down to a list that loosely matches the current searchName\n *\n * @see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Collator\n */\nexport function filterSuggestions(users: IMentionSuggestionData[], searchName: string) {\n    const searchCollator = Intl.Collator(\"en\", {\n        usage: \"search\",\n        sensitivity: \"base\",\n        ignorePunctuation: true,\n        numeric: true,\n    });\n\n    return users.filter((userSuggestion: IMentionSuggestionData) => {\n        if (userSuggestion.name.length < searchName.length) {\n            return false;\n        }\n\n        const suggestionNamePartial = userSuggestion.name.substring(0, searchName.length);\n        return searchCollator.compare(suggestionNamePartial, searchName) === 0;\n    });\n}\n\n// export function should;\n\n/**\n * Make an API request for mention suggestions. These results are cached by the lookup username.\n */\nfunction loadUsers(username: string) {\n    return (dispatch: Dispatch<any>, getState: () => IStoreState) => {\n        const { usersTrie } = getState().editor.mentions;\n\n        // Attempt an exact lookup first.\n        const exactLookup = usersTrie.getValue(username);\n        if (exactLookup != null) {\n            switch (exactLookup.status) {\n                case LoadStatus.SUCCESS:\n                    return dispatch(actions.loadUsersSuccess(username, exactLookup.data));\n                case LoadStatus.LOADING:\n                    // Already handled\n                    return;\n                case LoadStatus.ERROR:\n                    // Previously failed.\n                    dispatch(actions.loadUsersFailure(username, exactLookup.error));\n                    return;\n            }\n        }\n\n        // Attempt a partial lookup to try and see if we can get results without an API request\n        const partialLookup = usersTrie.getValueFromPartialsOfWord(username);\n        if (partialLookup != null) {\n            switch (partialLookup.status) {\n                case LoadStatus.SUCCESS: {\n                    if (partialLookup.data.length < USER_LIMIT) {\n                        // The previous match already found the maximum amount of users that the server had\n                        // Return the previous results.\n                        return dispatch(\n                            actions.loadUsersSuccess(username, filterSuggestions(partialLookup.data, username)),\n                        );\n                    }\n                }\n                case LoadStatus.ERROR:\n                // Previously failed. We still want to proceed to a real lookup so do nothing.\n                case LoadStatus.PENDING:\n                // We still want to proceed to a real lookup so do nothing.\n            }\n        }\n\n        // Start the lookup.\n        dispatch(actions.loadUsersRequest(username));\n\n        const params = {\n            name: username + \"*\",\n            order: \"mention\",\n            limit: USER_LIMIT,\n        };\n        return api\n            .get(\"/users/by-names/\", { params /*, cancelToken: this.apiCancelSource.token*/ })\n            .then(response => {\n                if (response.status >= 500) {\n                    throw new Error(response.data);\n                }\n\n                // Add unique domIDs to each user.\n                const users = response.data.map(data => {\n                    data.domID = \"mentionSuggestion\" + data.userID;\n                    return data;\n                });\n\n                // Result is good. Lets GO!\n                dispatch(actions.loadUsersSuccess(username, users));\n            })\n            .catch(error => {\n                dispatch(actions.loadUsersFailure(username, error));\n            });\n    };\n}\n\nexport const actions = {\n    loadUsersRequest: (username: string) => createAction(LOAD_USERS_REQUEST, { username }),\n    loadUsersFailure: (username: string, error: IApiError) => createAction(LOAD_USERS_FAILURE, { username, error }),\n    loadUsersSuccess: (username: string, users: IMentionSuggestionData[]) =>\n        createAction(LOAD_USERS_SUCCESS, { username, users }),\n    setActiveSuggestion: (suggestionID: string, suggestionIndex: number) =>\n        createAction(SET_ACTIVE_SUGGESTION, { suggestionID, suggestionIndex }),\n};\n\nexport const thunks = {\n    loadUsers,\n};\n\nexport type ActionTypes = ActionsUnion<typeof actions>;\n","/**\n * @author Adam (charrondev) Charron <adam.c@vanillaforums.com>\n * @copyright 2009-2018 Vanilla Forums Inc.\n * @license https://opensource.org/licenses/GPL-2.0 GPL-2.0\n */\n\nimport { ActionsUnion, createAction } from \"@dashboard/state/utility\";\nimport Quill, { RangeStatic } from \"quill/core\";\n\nexport const CREATE_INSTANCE = \"[instance] create\";\nexport const SET_SELECTION = \"[instance] set selection\";\nexport const CLEAR_MENTION_SELECTION = \"[instance] clear mention selection\";\n\nexport const actions = {\n    createInstance: (editorID: string | number) => createAction(CREATE_INSTANCE, { editorID }),\n    setSelection: (editorID: string | number, selection: RangeStatic | null, quill: Quill) =>\n        createAction(SET_SELECTION, { editorID, selection, quill }),\n};\n\nexport type ActionTypes = ActionsUnion<typeof actions>;\n","/**\n * Set wepback's public path.\n * Otherwise the lookups of dynamically imported webpack files can fail on sites that have a different webroot\n * Eg. installed in a subfolder / using Reverse Proxy.\n *\n * @author Adam Charron <adam.c@vanillaforums.com>\n * @copyright 2009-2018 Vanilla Forums Inc.\n * @license http://www.opensource.org/licenses/gpl-2.0.php GNU GPL v2\n */\n\nimport { assetUrl } from \"@dashboard/application\";\n\n/**\n * This needs to be a free variable.\n *\n * Webpack does some magic to make this work.\n * It you try and set a local or global version of it, it WILL NOT work.\n *\n * @see https://stackoverflow.com/questions/12934929/what-are-free-variables\n * @see https://webpack.js.org/configuration/output/#output-publicpath\n * @see https://github.com/webpack/webpack/issues/2776#issuecomment-233208623\n */\n// @ts-ignore: Cannot find variable warning. See comment aboe.\n__webpack_public_path__ = assetUrl(\"/\");\n","/**\n * @copyright 2009-2018 Vanilla Forums Inc.\n * @license https://opensource.org/licenses/GPL-2.0 GPL-2.0\n */\n\nimport { t } from \"@dashboard/application\";\nimport FocusableEmbedBlot from \"../abstract/FocusableEmbedBlot\";\nimport { FOCUS_CLASS } from \"@dashboard/embeds\";\nimport { escapeHTML, setData, getData } from \"@dashboard/dom\";\nimport { IEmbedValue } from \"@rich-editor/quill/blots/embeds/ExternalEmbedBlot\";\n\nconst LOADER_DATA_KEY = \"loadingDataKey\";\n\n/**\n * A loading blot. This should not be created on its own. Instead it should be created throught the ExternalEmbedBlot\n */\nexport default class LoadingBlot extends FocusableEmbedBlot {\n    public static blotName = \"embed-loading\";\n    public static className = \"js-embedLoader\";\n    public static tagName = \"div\";\n\n    /**\n     * Create one of two types of loaders.\n     */\n    public static create(value: IEmbedValue) {\n        let node: HTMLElement;\n        switch (value.loaderData.type) {\n            case \"link\":\n                node = this.createLinkLoader(value.loaderData.link || \"\");\n                break;\n            case \"image\":\n                node = this.createImageLoader();\n                break;\n            default:\n                throw new Error(\"Could not determine loader type for embed blot.\");\n        }\n\n        setData(node, LOADER_DATA_KEY, value);\n        return node;\n    }\n\n    /**\n     * Get the value out of a domNode.\n     */\n    public static value(element: Element): IEmbedValue {\n        const storedValue = getData(element, LOADER_DATA_KEY, null);\n\n        if (!storedValue) {\n            throw new Error(\"A loading blot should have data set\");\n        }\n\n        return storedValue;\n    }\n\n    /**\n     * Create an image upload loader. This is full size loader that does takes up a lot of space.\n     */\n    private static createImageLoader() {\n        const div = super.create();\n        div.classList.remove(FOCUS_CLASS);\n        div.classList.add(\"js-embed\");\n        div.classList.add(\"embedLinkLoader\");\n        div.innerHTML = `<div class='embedLoader'>\n                            <div class='embedLoader-box ${FOCUS_CLASS}' aria-label='${t(\n            \"Loading...\",\n        )}'><div class='embedLoader-loader'></div>\n                            </div>\n                        </div>`;\n        return div;\n    }\n\n    /**\n     * Create an inline link loader.\n     */\n    private static createLinkLoader(linkText: string) {\n        const div = super.create();\n        div.classList.remove(FOCUS_CLASS);\n        div.classList.add(\"js-embed\");\n        div.classList.add(\"embedLinkLoader\");\n\n        const sanitizedText = escapeHTML(linkText);\n        div.innerHTML = `<a href=\"#\" class=\"embedLinkLoader-link ${FOCUS_CLASS}\">${sanitizedText}&nbsp;<span aria-hidden=\"true\" class='embedLinkLoader-loader'></span></a>`;\n        return div;\n    }\n}\n"],"sourceRoot":""}