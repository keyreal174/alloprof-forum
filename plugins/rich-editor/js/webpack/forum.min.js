(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{117:function(e,n,t){t(23),e.exports=t(120)},120:function(e,n,t){"use strict";t.r(n);var r=t(19),s=t(24),u=function(){return(u=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var s in n=arguments[t])Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s]);return e}).apply(this,arguments)},a={lastSuccessfulUsername:null,currentUsername:null,usersTrie:new(function(){function e(){this.MAX_PARTIAL_LOOKUP_ITERATIONS=10,this.root={}}return e.prototype.insert=function(e,n){for(var t=this.root,r=0;r<e.length;r++){var s=e[r];if(t.children||(t.children={}),!(s in t.children)){var u=r!==e.length-1?{}:{children:{}};t.children[s]=u}t=t.children[s]}t.value=n},e.prototype.getNode=function(e){var n=this.root;if(void 0===e)return n;for(var t=0;t<e.length;t++){var r=e.charAt(t);if(!n.children||!n.children[r])return null;n=n.children[r]}return n},e.prototype.getValue=function(e){var n=this.getNode(e);return n&&n.value||null},e.prototype.getValueFromPartialsOfWord=function(e){for(var n=Math.min(this.MAX_PARTIAL_LOOKUP_ITERATIONS,e.length);n>0;n--){var t=e.substring(0,n),r=this.getValue(t);if(null!=r)return r}return null},e}()),activeSuggestionID:"",activeSuggestionIndex:0};var i=t(25),o=function(){return(o=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var s in n=arguments[t])Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s]);return e}).apply(this,arguments)},c={index:0,length:0},l={},d={currentSelection:c,lastGoodSelection:c};
/**
 * @author Adam (charrondev) Charron <adam.c@vanillaforums.com>
 * @copyright 2009-2018 Vanilla Forums Inc.
 * @license https://opensource.org/licenses/GPL-2.0 GPL-2.0
 */function f(e,n){var t=e[n.payload.editorID];if(n.type===i.a&&t)throw new Error("Failed to create editor instance with id "+n.payload.editorID+". Id already exists");if(n.type!==i.a&&!t)throw new Error("Could not perform an action for editor ID "+n.payload.editorID+" that doesn't exist. Be sure to create an instance first.")}var g=t(13),h=Object(g.c)({mentions:function(e,n){switch(void 0===e&&(e=a),n.type){case s.b:var t=n.payload.username;e.usersTrie.insert(t,{status:"PENDING"});var r=!1,i=e.lastSuccessfulUsername;return null!=i&&t.length>i.length&&t.substring(0,i.length)===i&&(r=!0),u({},e,{currentUsername:t,lastSuccessfulUsername:r?e.lastSuccessfulUsername:null});case s.a:var o=n.payload,c=(t=o.username,o.error);return e.usersTrie.insert(t,{status:"FAILED",users:null,error:c}),e;case s.c:var l=n.payload,d=(t=l.username,l.users);e.usersTrie.insert(t,{status:"SUCCESSFUL",users:function(e,n){var t=Intl.Collator("en",{usage:"sort",sensitivity:"variant",ignorePunctuation:!0,numeric:!0});return e.sort(function(e,r){return e.name.includes(n)&&!r.name.includes(n)?-1:r.name.includes(n)&&!e.name.includes(n)?1:t.compare(e.name,r.name)})}(d,t)});var f=d.length>0?d[0].domID:"";return u({},e,{activeSuggestionID:f,activeSuggestionIndex:0,lastSuccessfulUsername:t,currentUsername:t===e.currentUsername?null:e.currentUsername});case s.d:var g=n.payload,h=g.suggestionID,m=g.suggestionIndex;return u({},e,{activeSuggestionID:h,activeSuggestionIndex:m});default:return e}},instances:function(e,n){var t,r;switch(void 0===e&&(e=l),n.type){case i.a:return f(e,n),o({},e,((t={})[n.payload.editorID]=d,t));case i.b:f(e,n);var s=n.payload,u=s.selection,a=s.editorID,c=e[a],g=c.lastGoodSelection;return o({},e,((r={})[a]=o({},c,{currentSelection:u,lastGoodSelection:null!==u?u:g}),r));default:return e}}}),m=t(1);
/**
 * @author Adam (charrondev) Charron <adam.c@vanillaforums.com>
 * @copyright 2009-2018 Vanilla Forums Inc.
 * @license https://opensource.org/licenses/GPL-2.0 GPL-2.0
 */
/*
 * @author Adam (charrondev) Charron <adam.c@vanillaforums.com>
 * @copyright 2009-2018 Vanilla Forums Inc.
 * @license https://opensource.org/licenses/GPL-2.0 GPL-2.0
 */
Object(m.k)(function(){var e;Object(r.b)("editor",h),(e=document.querySelectorAll(".richEditor")).length>0&&Promise.all([t.e(0),t.e(6)]).then(t.bind(null,342)).then(function(n){e.forEach(n.default)}),document.addEventListener("X-EditCommentFormLoaded",function(e){var n=e.target;if(n instanceof Element){var r=n.querySelector(".richEditor");r&&Promise.all([t.e(0),t.e(6)]).then(t.bind(null,342)).then(function(e){e.default(r)})}})})},23:function(e,n,t){
/**
 * Set wepback's public path.
 * Otherwise the lookups of dynamically imported webpack files can fail on sites that have a different webroot
 * Eg. installed in a subfolder / using Reverse Proxy.
 *
 * @author Adam Charron <adam.c@vanillaforums.com>
 * @copyright 2009-2018 Vanilla Forums Inc.
 * @license http://www.opensource.org/licenses/gpl-2.0.php GNU GPL v2
 */
const r=window.gdn&&window.gdn.meta&&window.gdn.meta.WebRoot,s=null!=r?r:"/";t.p=s},24:function(e,n,t){"use strict";t.d(n,"d",function(){return u}),t.d(n,"b",function(){return a}),t.d(n,"a",function(){return i}),t.d(n,"c",function(){return o}),t.d(n,"e",function(){return l}),t.d(n,"f",function(){return d});var r=t(10),s=t(7),u="[mentions] set active suggestion",a="[mentions] load users request",i="[mentions] load users failure",o="[mentions] load users success",c=50;var l={loadUsersRequest:function(e){return Object(r.b)(a,{username:e})},loadUsersFailure:function(e,n){return Object(r.b)(i,{username:e,error:n})},loadUsersSuccess:function(e,n){return Object(r.b)(o,{username:e,users:n})},setActiveSuggestion:function(e,n){return Object(r.b)(u,{suggestionID:e,suggestionIndex:n})}},d={loadUsers:function(e){return function(n,t){var r=t().editor.mentions.usersTrie,u=r.getValue(e);if(null!=u)switch(u.status){case"SUCCESSFUL":return n(l.loadUsersSuccess(e,u.users));case"PENDING":return;case"FAILED":return n(l.loadUsersFailure(e,u.error))}var a,i,o,d=r.getValueFromPartialsOfWord(e);if(null!=d)switch(d.status){case"SUCCESSFUL":if(d.users.length<c)return n(l.loadUsersSuccess(e,(a=d.users,i=e,o=Intl.Collator("en",{usage:"search",sensitivity:"base",ignorePunctuation:!0,numeric:!0}),a.filter(function(e){if(e.name.length<i.length)return!1;var n=e.name.substring(0,i.length);return 0===o.compare(n,i)}))))}n(l.loadUsersRequest(e));var f={name:e+"*",order:"mention",limit:c};return s.a.get("/users/by-names/",{params:f}).then(function(t){if(t.status>=500)throw new Error(t.data);var r=t.data.map(function(e){return e.domID="mentionSuggestion"+e.userID,e});n(l.loadUsersSuccess(e,r))}).catch(function(t){return n(l.loadUsersFailure(e,t))})}}}},25:function(e,n,t){"use strict";t.d(n,"a",function(){return s}),t.d(n,"b",function(){return u}),t.d(n,"c",function(){return a});var r=t(10),s="[instance] create",u="[instance] set selection",a={createInstance:function(e){return Object(r.b)(s,{editorID:e})},setSelection:function(e,n){return Object(r.b)(u,{editorID:e,selection:n})}};
/**
 * @author Adam (charrondev) Charron <adam.c@vanillaforums.com>
 * @copyright 2009-2018 Vanilla Forums Inc.
 * @license https://opensource.org/licenses/GPL-2.0 GPL-2.0
 */}},[[117,2,0,1]]]);